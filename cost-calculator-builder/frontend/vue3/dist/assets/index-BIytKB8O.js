import{m as ie,u as se,f as le,n as oe,j as ue,a as I,o as ce,p as de}from"./widget-CbiMfhXo.js";import{_ as j}from"./RequiredHint.vue_vue_type_style_index_0_lang-DWClyS2l.js";import{u as pe}from"./translationsStore-Crbl8s4V.js";import{d as fe,B as ge,e as A,f as N,k as ve,c as p,o,l as f,m as g,h as Q,u as r,L as u,E as me}from"./runtime-dom.esm-bundler-DVhL8Vyv.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const z=v=>{if(v===void 0||(v==null?void 0:v.length)<0)return!1;const T=/^[-+]?[0-9]+\.[0-9]+$/;return!!v.toString().match(T)},_e={class:"ccb-field__label"},ye={key:0,class:"ccb-required-tooltip"},he={class:"ccb-field__title"},be={key:0,class:"ccb-field-required-mark"},Ce={key:0,class:"ccb-field__descriptions ccb-before"},xe={key:0,class:"ccb-field__description"},ke={key:1,class:"ccb-field__description"},Fe={class:"ccb-field__input-wrapper"},Ve=["value","placeholder"],Me={key:1,class:"ccb-field__descriptions ccb-after"},Ne={key:0,class:"ccb-field__description"},Te={key:1,class:"ccb-field__description"},qe=fe({__name:"Quantity",props:{field:{}},setup(v){const T=v,{field:e}=ge(T),q=A("required"),K=ie(),w=de(),E=se(),V=le(),L=oe(),O=ce(),m=pe(),G=ue(),i=A(e.value.value.toString()),B=A(!1),H=N(()=>{if(B.value)return i.value;i.value=ae(i.value).toString();let t=e.value.round?Math.round(+i.value):+i.value;return P(t.toString())});ve(()=>{i.value=e.value.multiply?(e.value.value/e.value.unit).toString():e.value.value.toString()});const M=(t=!1,a,n)=>{n&&n!==e.value.alias||(i.value=a.toString(),ee(),t&&typeof a<"u"&&(e.value.value=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=O.getCommonFieldDisplayView(e.value,i.value),V.updateField(e.value.alias,e.value),L.applyConditionForField(e.value.alias),V.getPageBreakEnabled&&V.getActivePage.action==="not_skip"&&G.checkPageFieldsConditions())},J=t=>{const a=t.target;let n=e.value.round?Math.round(parseFloat(a.value)):parseFloat(a.value);if(isNaN(n))return;let l=w.parseCurrency(n.toString(),w.getCurrencyOptions(e.value));M(!0,l)},U=t=>{const a=t.target;B.value=!0,i.value=a.value},W=()=>{B.value=!1},X=()=>{i.value=P(i.value)},Y=()=>{let t=Math.round((Number(i.value)+Number(e.value.step))*100)/100;M(!0,t)},Z=()=>{let t=Math.round((Number(i.value)-Number(e.value.step))*100)/100;t<0||M(!0,t)},ee=()=>{const t=Number(i.value)<+e.value.min,a=Number(i.value)>+e.value.max;t||a?q.value="value_range":q.value="required"},te=N(()=>{let t=0;if(z(e.value.defaultValue.toString())||z(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,n=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,n)}return t}),P=t=>{var S,d,y,h,b,C,x,k,F;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings)return parseFloat(t).toFixed(te.value);(isNaN(Number(t))||t.length===0)&&(t="0");let a=parseFloat(t);const n=I();let l=((S=n.getCurrencySettings)==null?void 0:S.numAfterInteger)||0,c=((d=n.getCurrencySettings)==null?void 0:d.decimalSeparator)||".",s=((y=n.getCurrencySettings)==null?void 0:y.thousandsSeparator)||",";if(e.value.fieldCurrency&&(l=((b=(h=e.value)==null?void 0:h.fieldCurrencySettings)==null?void 0:b.numAfterInteger)||0,c=((x=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:x.decimalSeparator)||".",s=((F=(k=e.value)==null?void 0:k.fieldCurrencySettings)==null?void 0:F.thousandsSeparator)||","),l>0){a=parseFloat(a.toFixed(parseInt(l.toString()))),t=a.toFixed(l),t=t.toString().replace(".",c);const _=t.split(c);_[0]=_[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),t=_.join(c)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,s);return t},ae=t=>{var y,h,b,C,x,k,F,_,R;const a=I();let n=((y=a.getCurrencySettings)==null?void 0:y.numAfterInteger)||0,l=((h=a.getCurrencySettings)==null?void 0:h.decimalSeparator)||".",c=((b=a.getCurrencySettings)==null?void 0:b.thousandsSeparator)||",";e.value.fieldCurrency&&(n=((x=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:x.numAfterInteger)||0,l=((F=(k=e.value)==null?void 0:k.fieldCurrencySettings)==null?void 0:F.decimalSeparator)||".",c=((R=(_=e.value)==null?void 0:_.fieldCurrencySettings)==null?void 0:R.thousandsSeparator)||",");let s;t.includes(".")&&t.includes(",")?s=t.split(l):t.includes(",")?s=t.split(","):t.includes(".")?s=t.split("."):s=[t],s[0]=s[0].split(c).join("");let S=s.join("."),d=parseFloat(S)||0;if(n!==void 0){let $=Math.pow(10,n);d=Math.round(d*$)/$}return d},re=t=>{var s,S,d;let n=((s=I().getCurrencySettings)==null?void 0:s.decimalSeparator)||".";e.value.fieldCurrency&&(n=((d=(S=e.value)==null?void 0:S.fieldCurrencySettings)==null?void 0:d.decimalSeparator)||".");let l=t.keyCode?t.keyCode:t.which,c=46;n===","&&(c=44),(l<48||l>57)&&l!==c&&t.preventDefault()},D=N(()=>{const t=Number(i.value)<e.value.min,a=Number(i.value)>e.value.max;return t||a?!0:V.checkFieldRequired(e.value)}),ne=N(()=>`
    ${m.getTranslations.valueMustBeBetween} ${e.value.min} ${m.getTranslations.and} ${e.value.max}
  `);return K.add("updateQuantity",M),(t,a)=>(o(),p("div",{class:me(["ccb-field ccb-field-quantity",{required:D.value,"ccb-field-disabled":r(e).disabled,[r(e).additionalStyles||""]:!!r(e).additionalStyles}])},[f("div",_e,[D.value?(o(),p("div",ye,[q.value==="value_range"?(o(),Q(j,{key:0,field:r(e),text:ne.value},null,8,["field","text"])):(o(),Q(j,{key:1,field:r(e),text:r(m).getTranslations.requiredField},null,8,["field","text"]))])):g("",!0),f("div",he,[f("span",null,u(r(e).label),1),r(e).required?(o(),p("span",be,"*")):g("",!0)])]),r(E).getAppearanceDescriptionPosition==="before"?(o(),p("div",Ce,[r(e).hideMinMax?g("",!0):(o(),p("div",xe,u(r(m).getTranslations.min)+": "+u(r(e).min)+" - "+u(r(m).getTranslations.max)+": "+u(r(e).max),1)),r(e).description?(o(),p("div",ke,u(r(e).description),1)):g("",!0)])):g("",!0),f("div",Fe,[f("input",{type:"text",value:H.value,placeholder:r(e).placeholder,onInput:J,onFocus:U,onFocusout:X,onBlur:W,onKeypress:re},null,40,Ve),f("div",{class:"ccb-input-counter up",onClick:Y},a[0]||(a[0]=[f("i",{class:"ccb-icon-Path-3486"},null,-1)])),f("div",{class:"ccb-input-counter down",onClick:Z},a[1]||(a[1]=[f("i",{class:"ccb-icon-Path-3485"},null,-1)]))]),r(E).getAppearanceDescriptionPosition==="after"?(o(),p("div",Me,[r(e).hideMinMax?g("",!0):(o(),p("div",Ne,u(r(m).getTranslations.min)+": "+u(r(e).min)+" - "+u(r(m).getTranslations.max)+": "+u(r(e).max),1)),r(e).description?(o(),p("div",Te,u(r(e).description),1)):g("",!0)])):g("",!0)],2))}}),De=Se(qe,[["__scopeId","data-v-ea0d3f11"]]);export{De as default};
//# sourceMappingURL=index-BIytKB8O.js.map

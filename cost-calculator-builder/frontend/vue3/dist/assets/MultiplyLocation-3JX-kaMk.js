import{d as $,B as K,e as L,f as S,z as R,k as U,c,o as d,l as a,a as _,L as r,u as o,F as j,M as H,I as Z,w as q,a2 as J,E as Q}from"./runtime-dom.esm-bundler-DVhL8Vyv.js";import{_ as h,b as W}from"./ThankYouPage-COJhIChf.js";import{f as X,m as Y,l as ee,j as se}from"./widget-Bo06FScc.js";import{L as ae,u as oe}from"./index-l3LAkAq-.js";import{u as te}from"./translationsStore-Crbl8s4V.js";import"./jquery-C7OTzgKr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"ccb-user-location"},ne={class:"ccb-user-location__input-wrapper"},ie={class:"label"},ce={class:"ccb-user-location__description"},de={key:0},re={key:1,class:"ccb-user-location__adressname"},ue={class:"ccb-location-modal"},pe={class:"ccb-location-modal__body"},me={class:"ccb-location-modal__sidebar"},_e={class:"ccb-location-modal__title"},ve={class:"ccb-location-modal__locations"},ge=["name","value","checked"],be={class:"ccb-radio-label"},fe=["id"],he={class:"ccb-location-modal__footer"},we=$({__name:"MultiplyLocation",props:{field:{}},setup(C){const v=X(),N=Y(),n=te(),w=ee(),M=se(),x=C,{field:e}=K(x),g=L(),{getGoogleApiKey:F,mapOptions:T,generateId:B,parseLocationCoordinates:i,generateGoogleLink:V,getMeasure:E,getPickUpIconPath:y}=oe(),I=new ae({apiKey:F(),version:"weekly",libraries:["places","geometry"]});let k=B(4),b=L(!0);const z=()=>{g.value.showPopup()},u=()=>{g.value.hidePopup()};let p;const A=()=>{let s=e.value.multiplyLocations[0].coordinates;I.load().then(()=>{const l=document.getElementById(k);l&&(p=new google.maps.Map(l,{...T(),center:{...i(s)}}),P.value.forEach(t=>{let m={position:i(t.coordinates),map:p};y()&&(m.icon={url:y(),scaledSize:new google.maps.Size(40,40)}),new google.maps.Marker(m)}))})},D=()=>{let s=e.value.multiplyLocations[0].coordinates;e.value.selectedPoint={addressName:"",coordinates:s,label:""},b.value=!0,f(),u()},G=()=>{if(e.value.selectedPoint.addressName){b.value=!1;const s={addressName:e.value.selectedPoint.addressName,coordinates:i(e.value.selectedPoint.coordinates),addressLink:V(i(e.value.selectedPoint.coordinates)),measure:E()};e.value.userSelectedOptions=s,f(),u()}else u()},O=S(()=>{let s=e.value.selectedPoint.label||e.value.selectedPoint.addressName||"";return s.length>15?s.slice(0,25)+"...":s}),f=s=>{s&&s!==e.value.alias||(e.value.displayValue=O.value,v.updateField(e.value.alias,e.value),N.applyConditionForField(e.value.alias),v.getPageBreakEnabled&&v.getActivePage.action==="not_skip"&&M.checkPageFieldsConditions())};w.add("updateGeolocation",s=>{setTimeout(()=>{f(s)},100)});const P=S(()=>Array.isArray(e.value.multiplyLocations)?e.value.multiplyLocations:[]);return R(()=>e.value.selectedPoint,s=>{s&&s.coordinates&&(p.panTo(i(s.coordinates)),p.setZoom(15))},{deep:!0}),U(()=>{A()}),(s,l)=>(d(),c("div",le,[a("div",ne,[a("button",{class:"ccb-user-location__action",onClick:z},[l[1]||(l[1]=a("span",{class:"icon"},[a("i",{class:"ccb-icon-location"})],-1)),a("span",ie,r(o(n).getTranslations.openMap),1)]),a("div",ce,[o(e).selectedPoint.addressName?(d(),c("span",re,r(o(e).selectedPoint.addressName),1)):(d(),c("span",de,r(o(n).getTranslations.chooseFromMap),1))])]),_(W,{ref_key:"popup",ref:g},{default:j(()=>[a("div",ue,[a("div",pe,[a("div",me,[a("div",_e,r(o(n).getTranslations.selectLocation),1),a("div",ve,[(d(!0),c(H,null,Z(P.value,t=>(d(),c("div",{key:t.addressName,class:"ccb-default-radio"},[a("label",null,[q(a("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>o(e).selectedPoint=m),type:"radio",name:t.label,value:t,checked:o(e).selectedPoint.addressName===t.addressName},null,8,ge),[[J,o(e).selectedPoint]]),a("span",be,r(t.label.length?t.label:t.addressName),1)])]))),128))])]),a("div",{id:o(k),class:"ccb-location-modal__map"},null,8,fe)]),a("div",he,[_(h,{type:"light",text:o(n).getTranslations.clearLocation,class:Q(["clear",{disable:o(b)}]),onClick:D},null,8,["text","class"]),_(h,{type:"light",text:o(n).getTranslations.cancel,onClick:u},null,8,["text"]),_(h,{type:"success",text:o(n).getTranslations.saveLocation,onClick:G},null,8,["text"])])])]),_:1},512)]))}});export{we as default};
//# sourceMappingURL=MultiplyLocation-3JX-kaMk.js.map

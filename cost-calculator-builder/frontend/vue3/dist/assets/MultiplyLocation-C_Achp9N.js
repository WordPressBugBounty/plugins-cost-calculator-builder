import{d as K,B as R,e as L,f as C,z as U,k as H,c,o as d,l as o,a as _,L as r,u as t,F as Z,M as j,I as q,w as J,a2 as Q,E as W}from"./runtime-dom.esm-bundler-B-pJJbN8.js";import{_ as b,b as X}from"./ThankYouPage-CD4sYaJx.js";import{f as Y,n as ee,m as se,i as oe,k as te}from"./widget-CufK5hD0.js";import{L as ae,u as le}from"./index-D2tDBmJP.js";import{u as ne}from"./translationsStore-DAijv8YO.js";import"./jquery-C7OTzgKr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"ccb-user-location"},ce={class:"ccb-user-location__input-wrapper"},de={class:"label"},re={class:"ccb-user-location__description"},ue={key:0},pe={key:1,class:"ccb-user-location__adressname"},me={class:"ccb-location-modal"},_e={class:"ccb-location-modal__body"},ve={class:"ccb-location-modal__sidebar"},ge={class:"ccb-location-modal__title"},fe={class:"ccb-location-modal__locations"},be=["name","value","checked"],he={class:"ccb-radio-label"},ye=["id"],ke={class:"ccb-location-modal__footer"},Fe=K({__name:"MultiplyLocation",props:{field:{}},setup(N){const h=oe(),S=te(),w=Y(),M=ee(),n=ne(),F=se(),x=N,{field:e}=R(x),v=L(),{getGoogleApiKey:T,mapOptions:V,generateId:B,parseLocationCoordinates:i,generateGoogleLink:I,getMeasure:E,getPickUpIconPath:y}=le(),z=new ae({apiKey:T(),version:"weekly",libraries:["places","geometry"]});let k=B(4),g=L(!0);const A=()=>{v.value.showPopup()},u=()=>{v.value.hidePopup()};let p;const D=()=>{let s=e.value.multiplyLocations[0].coordinates;z.load().then(()=>{const l=document.getElementById(k);l&&(p=new google.maps.Map(l,{...V(),center:{...i(s)}}),P.value.forEach(a=>{let m={position:i(a.coordinates),map:p};y()&&(m.icon={url:y(),scaledSize:new google.maps.Size(40,40)}),new google.maps.Marker(m)}))})},G=()=>{let s=e.value.multiplyLocations[0].coordinates;e.value.selectedPoint={addressName:"",coordinates:s,label:""},g.value=!0,f(),u()},O=()=>{if(e.value.selectedPoint.addressName){g.value=!1;const s={addressName:e.value.selectedPoint.addressName,coordinates:i(e.value.selectedPoint.coordinates),addressLink:I(i(e.value.selectedPoint.coordinates)),measure:E()};e.value.userSelectedOptions=s,f(),u()}else u()},$=C(()=>{let s=e.value.selectedPoint.label??e.value.selectedPoint.addressName??"";return s.length>15?s.slice(0,25)+"...":s}),f=s=>{s&&s!==e.value.alias||(e.value.displayValue=$.value,w.updateField(e.value.alias,e.value),M.applyConditionForField(e.value.alias),h.getPageBreakEnabled()&&h.getActivePage().action==="not_skip"&&S.checkPageFieldsConditions())};F.add("updateGeolocation",s=>{setTimeout(()=>{f(s)},100)});const P=C(()=>Array.isArray(e.value.multiplyLocations)?e.value.multiplyLocations:[]);return U(()=>e.value.selectedPoint,s=>{s&&s.coordinates&&(p.panTo(i(s.coordinates)),p.setZoom(15))},{deep:!0}),H(()=>{D()}),(s,l)=>(d(),c("div",ie,[o("div",ce,[o("button",{class:"ccb-user-location__action",onClick:A},[l[1]||(l[1]=o("span",{class:"icon"},[o("i",{class:"ccb-icon-location"})],-1)),o("span",de,r(t(n).getTranslations.openMap),1)]),o("div",re,[t(e).selectedPoint.addressName?(d(),c("span",pe,r(t(e).selectedPoint.addressName),1)):(d(),c("span",ue,r(t(n).getTranslations.chooseFromMap),1))])]),_(X,{ref_key:"popup",ref:v},{default:Z(()=>[o("div",me,[o("div",_e,[o("div",ve,[o("div",ge,r(t(n).getTranslations.selectLocation),1),o("div",fe,[(d(!0),c(j,null,q(P.value,a=>(d(),c("div",{key:a.addressName,class:"ccb-default-radio"},[o("label",null,[J(o("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>t(e).selectedPoint=m),type:"radio",name:a.label,value:a,checked:t(e).selectedPoint.addressName===a.addressName},null,8,be),[[Q,t(e).selectedPoint]]),o("span",he,r(a.label.length?a.label:a.addressName),1)])]))),128))])]),o("div",{id:t(k),class:"ccb-location-modal__map"},null,8,ye)]),o("div",ke,[_(b,{type:"light",text:t(n).getTranslations.clearLocation,class:W(["clear",{disable:t(g)}]),onClick:G},null,8,["text","class"]),_(b,{type:"light",text:t(n).getTranslations.cancel,onClick:u},null,8,["text"]),_(b,{type:"success",text:t(n).getTranslations.saveLocation,onClick:O},null,8,["text"])])])]),_:1},512)]))}});export{Fe as default};
//# sourceMappingURL=MultiplyLocation-C_Achp9N.js.map

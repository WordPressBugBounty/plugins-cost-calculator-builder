{"version":3,"file":"index-CK48RBp2.js","sources":["../../src/widget/features/calculator-fields/components/Html/Html.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-field\"\n    ref=\"rootEl\"\n    v-html=\"field.htmlContent\"\n    :class=\"{ [additionalClasses]: true }\"\n  ></div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, ref, onMounted, watch, nextTick } from \"vue\";\nimport { IHtmlField } from \"@/widget/shared/types/fields\";\n\ntype Props = {\n  field: IHtmlField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst additionalClasses = computed(() => {\n  return field.value?.additionalStyles || \"\";\n});\n\nconst rootEl = ref<HTMLElement | null>(null);\n\nfunction executeInlineScripts(container: HTMLElement) {\n  const scripts = Array.from(container.querySelectorAll(\"script\"));\n  for (const oldScript of scripts) {\n    const newScript = document.createElement(\"script\");\n    for (const { name, value } of Array.from(oldScript.attributes)) {\n      try {\n        newScript.setAttribute(name, value);\n      } catch (_) {}\n    }\n    if (oldScript.src) {\n      newScript.src = oldScript.src;\n    } else {\n      newScript.textContent = oldScript.textContent || \"\";\n    }\n    oldScript.parentNode?.replaceChild(newScript, oldScript);\n  }\n}\n\nasync function runScriptsIfAny() {\n  if (!rootEl.value) return;\n  await nextTick();\n  executeInlineScripts(rootEl.value);\n}\n\nonMounted(() => {\n  runScriptsIfAny();\n});\n\nwatch(\n  () => field.value?.htmlContent,\n  () => {\n    runScriptsIfAny();\n  },\n);\n</script>\n\n<style lang=\"scss\">\n.ccb-field {\n  img {\n    max-width: 100%;\n    max-height: 100%;\n    height: auto;\n    width: auto;\n    display: block;\n  }\n}\n</style>\n"],"names":["props","__props","field","toRefs","additionalClasses","computed","_a","rootEl","ref","executeInlineScripts","container","scripts","oldScript","newScript","name","value","runScriptsIfAny","nextTick","onMounted","watch"],"mappings":"4MAiBA,MAAMA,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExBI,EAAoBC,EAAS,IAAM,OAChC,QAAAC,EAAAJ,EAAM,QAAN,YAAAI,EAAa,mBAAoB,EAAA,CACzC,EAEKC,EAASC,EAAwB,IAAI,EAE3C,SAASC,EAAqBC,EAAwB,OACpD,MAAMC,EAAU,MAAM,KAAKD,EAAU,iBAAiB,QAAQ,CAAC,EAC/D,UAAWE,KAAaD,EAAS,CACzB,MAAAE,EAAY,SAAS,cAAc,QAAQ,EACtC,SAAA,CAAE,KAAAC,EAAM,MAAAC,CAAM,IAAK,MAAM,KAAKH,EAAU,UAAU,EACvD,GAAA,CACQC,EAAA,aAAaC,EAAMC,CAAK,OACxB,CAAA,CAEVH,EAAU,IACZC,EAAU,IAAMD,EAAU,IAEhBC,EAAA,YAAcD,EAAU,aAAe,IAEzCN,EAAAM,EAAA,aAAA,MAAAN,EAAY,aAAaO,EAAWD,EAAS,CACzD,CAGF,eAAeI,GAAkB,CAC1BT,EAAO,QACZ,MAAMU,EAAS,EACfR,EAAqBF,EAAO,KAAK,EAAA,CAGnC,OAAAW,EAAU,IAAM,CACEF,EAAA,CAAA,CACjB,EAEDG,EACE,IAAM,OAAA,OAAAb,EAAAJ,EAAM,QAAN,YAAAI,EAAa,aACnB,IAAM,CACYU,EAAA,CAAA,CAEpB"}
{"version":3,"mappings":";yVAoBA,MAAMA,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExBI,EAAYC,EAAIH,EAAM,MAAM,gBAAgB,EAC5CI,EAAiB,IAAM,CACtBJ,EAAM,MAAM,cACPE,EAAA,MAAQ,CAACA,EAAU,MAC/B,EAEMG,EAAmBC,GAAiC,OACxD,OAAOA,EAAE,YAAc,WAAa,CAAC,GAAEC,EAAAD,EAAoB,SAApB,MAAAC,EAA4B,WACrE,EAEMC,EAAwB,IACRC,EAAe,EACL,UACb,KAAKJ,CAAe,EAGjCK,EAAgBC,EAAS,IAAM,WACnC,IAAIC,IAAWC,GAAAN,EAAAP,EAAM,QAAN,YAAAO,EAAa,SAAb,YAAAM,EAAqB,QAAS,UAC7C,MAAMC,EAAcN,EAAsB,EACtC,OAAAO,EAAAD,GAAA,YAAAA,EAAa,SAAb,MAAAC,EAAqB,QACvBH,EAAWE,EAAY,OAAO,OAEzBF,CAAA,CACR,EAEKI,EAAiBL,EAAwB,IAAM,CACnD,MAAMM,EAAUjB,EAAM,MAChBc,EAAcN,EAAsB,EAC1C,GAAIM,GAAA,MAAAA,EAAa,OAAQ,CACvB,MAAMI,EAAIJ,EAAY,OAChBK,EAAKF,EAAQ,QAAU,CAAC,EACxBG,EAAe,CACnB,GAAGD,EACH,MAAOD,EAAE,OAASC,EAAE,MACpB,UAAWD,EAAE,WAAaC,EAAE,UAC5B,gBAAiBD,EAAE,iBAAmBC,EAAE,eAC1C,EACA,MAAO,CAAE,GAAGF,EAAS,OAAQG,CAAa,EAErC,OAAAH,CAAA,CACR,EAEKI,EAAYV,EAAS,IAEvBX,EAAM,MAAM,OAAO,KAAO,GAC1B,MAAM,KAAKA,EAAM,MAAM,OAAO,OAAO,CAAC,EAAE,KACrCsB,GAAiB,CAACA,EAAM,QAAU,CAACA,EAAM,MAAM,SAAS,OAAO,CAClE,CAEH,EAEKC,EAAiBZ,EAAS,IAAM,CACpC,MAAMC,EAAWF,EAAc,MACzBc,EAA0C,CAC9C,QAAS,IACPC,EAAA,WACE,uBACF,gDACF,MAAO,IACLA,EAAA,WACE,qBACF,gDACF,OAAQ,IACNA,EAAA,WACE,sBACF,gDACF,QAAS,IACPA,EAAA,WACE,uBACF,+CACJ,EACMC,EAASF,EAAIZ,CAAQ,GAAKY,EAAI,QACpC,OAAOG,EAAqBD,CAAM,EACnC","names":["props","__props","field","toRefs","collapsed","ref","toggleCollapse","isGlobalSection","f","_a","getFirstGlobalSection","useFieldsStore","resolvedStyle","computed","styleKey","_b","firstGlobal","_c","effectiveField","current","g","c","mergedStyles","hasFields","child","styleComponent","map","__vitePreload","loader","defineAsyncComponent"],"ignoreList":[],"sources":["../../src/widget/features/calculator-fields/components/Section/Section.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"styleComponent\"\n    :field=\"effectiveField\"\n    :effective-style=\"resolvedStyle\"\n    :has-fields=\"hasFields\"\n    :collapsed=\"collapsed\"\n    :toggle-collapse=\"toggleCollapse\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, toRefs, defineAsyncComponent, ref } from \"vue\";\nimport { ISectionField, Field } from \"@/widget/shared/types/fields\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore\";\n\ntype Props = {\n  field: ISectionField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst collapsed = ref(field.value.defaultCollapsed);\nconst toggleCollapse = () => {\n  if (!field.value.collapsible) return;\n  collapsed.value = !collapsed.value;\n};\n\nconst isGlobalSection = (f: Field): f is ISectionField => {\n  return f.fieldName === \"section\" && !!(f as ISectionField).styles?.applyToAll;\n};\n\nconst getFirstGlobalSection = (): ISectionField | undefined => {\n  const fieldsStore = useFieldsStore();\n  const allFields = fieldsStore.getFields;\n  return allFields.find(isGlobalSection);\n};\n\nconst resolvedStyle = computed(() => {\n  let styleKey = field.value?.styles?.style || \"default\";\n  const firstGlobal = getFirstGlobalSection();\n  if (firstGlobal?.styles?.style) {\n    styleKey = firstGlobal.styles.style;\n  }\n  return styleKey;\n});\n\nconst effectiveField = computed<ISectionField>(() => {\n  const current = field.value;\n  const firstGlobal = getFirstGlobalSection();\n  if (firstGlobal?.styles) {\n    const g = firstGlobal.styles as Record<string, any>;\n    const c = (current.styles || {}) as Record<string, any>;\n    const mergedStyles = {\n      ...c,\n      style: g.style ?? c.style,\n      textColor: g.textColor ?? c.textColor,\n      backgroundColor: g.backgroundColor ?? c.backgroundColor,\n    };\n    return { ...current, styles: mergedStyles };\n  }\n  return current;\n});\n\nconst hasFields = computed(() => {\n  return (\n    field.value.fields.size > 0 &&\n    Array.from(field.value.fields.values()).some(\n      (child: Field) => !child.hidden && !child.alias.includes(\"total\"),\n    )\n  );\n});\n\nconst styleComponent = computed(() => {\n  const styleKey = resolvedStyle.value;\n  const map: Record<string, () => Promise<any>> = {\n    default: () =>\n      import(\n        \"@/widget/features/calculator-fields/components/Section/styles/default.vue\"\n      ),\n    solid: () =>\n      import(\n        \"@/widget/features/calculator-fields/components/Section/styles/solid.vue\"\n      ),\n    number: () =>\n      import(\n        \"@/widget/features/calculator-fields/components/Section/styles/number.vue\"\n      ),\n    minimal: () =>\n      import(\n        \"@/widget/features/calculator-fields/components/Section/styles/minimal.vue\"\n      ),\n  };\n  const loader = map[styleKey] || map.default;\n  return defineAsyncComponent(loader);\n});\n</script>\n\n<style lang=\"scss\">\n.ccb-section__fields {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(20%, 1fr));\n  gap: 20px;\n\n  .field-width-25 {\n    grid-column: span 1;\n    @media (max-width: 1024px) {\n      grid-column: span 4;\n    }\n\n    @media (max-width: 540px) {\n      grid-column: span 4;\n    }\n  }\n  .field-width-50 {\n    grid-column: span 2;\n\n    @media (max-width: 540px) {\n      grid-column: span 4;\n    }\n  }\n  .field-width-75 {\n    grid-column: span 3;\n\n    @media (max-width: 540px) {\n      grid-column: span 4;\n    }\n  }\n  .field-width-100 {\n    grid-column: span 4;\n  }\n}\n</style>\n"],"file":"assets/index-DQ5UjsUK.js"}
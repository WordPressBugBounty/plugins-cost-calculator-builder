{"version":3,"mappings":"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","names":["isFloat","n","regExp","props","__props","field","toRefs","requiredType","ref","callbackStore","useCallbackStore","currencyInstance","useCurrency","appearanceStore","useAppearanceStore","fieldStore","useFieldsStore","conditionsStore","useConditionsStore","singleFieldMixins","useSingleField","translationsStore","useTranslationsStore","pageBreakerStore","usePageBreakerStore","backupValue","rawInput","isEditing","forceUpdateKey","requiredWarningText","computed","_a","useSettingsStore","formattedValue","value","parseQuantityValue","getStyleComponent","defineAsyncComponent","__vitePreload","updateValue","updateWithValue","numericValue","alias","fromCondition","checkMinMaxRequired","onInput","event","target","changeHandler","onIncrement","onDecrement","innerValue","onFocus","e","parseFormattedValue","onBlur","parseField","lessThenExpected","moreThenExpected","toFixedCount","count","toFixedCountDefault","toFixedCountStep","toFixedNoRound","num","decimals","factor","floatVal","settings","numAfterInteger","decimalSeparator","_b","thousandsSeparator","_c","_e","_d","_g","_f","_i","_h","parts","sanitizedValue","result","intValueFilter","keyCode","separatorCode","isRequired","getRangeRequiredText","onMounted"],"ignoreList":[],"sources":["../../src/widget/shared/utils/is-float.utils.ts","../../src/widget/features/calculator-fields/components/Quantity/Quantity.vue"],"sourcesContent":["export const isFloat = (n: string): boolean => {\n  if (n === undefined || n?.length < 0) {\n    return false;\n  }\n  const regExp = /^[-+]?[0-9]+\\.[0-9]+$/;\n  return !!n.toString().match(regExp);\n};\n","<template>\n  <div\n    class=\"ccb-field ccb-field-quantity\"\n    :class=\"{\n      required: isRequired,\n      'ccb-field-disabled': field.disabled,\n      [field.additionalStyles || '']: !!field.additionalStyles,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <div v-if=\"isRequired\" class=\"ccb-required-tooltip\">\n        <RequiredHint\n          v-if=\"requiredType === 'value_range'\"\n          :field=\"field\"\n          :text=\"getRangeRequiredText\"\n        />\n        <RequiredHint v-else :field=\"field\" :text=\"requiredWarningText\" />\n      </div>\n      <div class=\"ccb-field__title\">\n        <span>{{ field.label }}</span>\n        <span v-if=\"field.required\" class=\"ccb-field-required-mark\">*</span>\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"!field.hideMinMax\" class=\"ccb-field__description\">\n        {{ translationsStore.getTranslations.min }}: {{ field.min }} -\n        {{ translationsStore.getTranslations.max }}: {{ field.max }}\n      </div>\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <component\n      :is=\"getStyleComponent\"\n      :field=\"field\"\n      :value=\"formattedValue\"\n      @input=\"onInput\"\n      @focus=\"onFocus\"\n      @focusout=\"parseField\"\n      @blur=\"onBlur\"\n      @keypress=\"intValueFilter\"\n      :key=\"forceUpdateKey\"\n      @increment=\"onIncrement\"\n      @decrement=\"onDecrement\"\n    />\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'after'\"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div v-if=\"!field.hideMinMax\" class=\"ccb-field__description\">\n        {{ translationsStore.getTranslations.min }}: {{ field.min }} -\n        {{ translationsStore.getTranslations.max }}: {{ field.max }}\n      </div>\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, ref, onMounted, defineAsyncComponent } from \"vue\";\nimport { IQuantityField } from \"@/widget/shared/types/fields\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport { useCurrency } from \"@/widget/actions/fields/composable/useCurrency.ts\";\nimport { useSingleField } from \"@/widget/actions/fields/composable/useSingleField.ts\";\nimport { useCallbackStore } from \"@/widget/app/providers/stores/callbackStore.ts\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\nimport { isFloat } from \"@/widget/shared/utils/is-float.utils\";\nimport { usePageBreakerStore } from \"@/widget/app/providers/stores/pageBreakerStore.ts\";\n\ntype Props = {\n  field: IQuantityField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst requiredType = ref<string>(\"required\");\n\nconst callbackStore = useCallbackStore();\nconst currencyInstance = useCurrency();\nconst appearanceStore = useAppearanceStore();\nconst fieldStore = useFieldsStore();\nconst conditionsStore = useConditionsStore();\nconst singleFieldMixins = useSingleField();\nconst translationsStore = useTranslationsStore();\nconst pageBreakerStore = usePageBreakerStore();\n\nconst backupValue = ref<string>(\"\");\nconst rawInput = ref<string>(field.value.originalValue.toString());\nconst isEditing = ref<boolean>(false);\nconst forceUpdateKey = ref<number>(0);\n\nconst requiredWarningText = computed(() => {\n  const settingStore = useSettingsStore();\n  return settingStore.getWarningTexts?.requiredMsg || \"\";\n});\n\nconst formattedValue = computed(() => {\n  if (isEditing.value) {\n    backupValue.value = rawInput.value;\n    return rawInput.value;\n  }\n\n  rawInput.value = backupValue.value;\n\n  let value = field.value.round\n    ? Math.round(+backupValue.value)\n    : +backupValue.value;\n\n  return parseQuantityValue(value.toString());\n});\n\nconst getStyleComponent = computed(() => {\n  if (field.value.styles.style === \"default\") {\n    return defineAsyncComponent(() => import(`./styles/Default.vue`));\n  }\n\n  if (field.value.styles.style === \"buttons\") {\n    return defineAsyncComponent(() => import(`./styles/Buttons.vue`));\n  }\n});\n\nconst updateValue = (\n  updateWithValue = false,\n  numericValue: number,\n  alias?: string,\n  fromCondition?: boolean,\n) => {\n  if (alias && alias !== field.value.alias) {\n    return;\n  }\n\n  if (alias) {\n    backupValue.value = numericValue.toString();\n  }\n\n  rawInput.value = numericValue.toString();\n  checkMinMaxRequired();\n\n  if (updateWithValue && typeof numericValue !== \"undefined\") {\n    field.value.value = numericValue;\n    field.value.originalValue = numericValue;\n  }\n\n  if (field.value.multiply) {\n    field.value.value = field.value.value * field.value.unit;\n  }\n\n  field.value.displayValue = singleFieldMixins.getCommonFieldDisplayView(\n    field.value,\n    rawInput.value,\n  );\n\n  fieldStore.updateField(field.value.alias, field.value, fromCondition);\n  conditionsStore.applyConditionForField(field.value.alias);\n  if (\n    fieldStore.getPageBreakEnabled &&\n    fieldStore.getActivePage.action === \"not_skip\"\n  ) {\n    pageBreakerStore.checkPageFieldsConditions();\n  }\n};\n\nconst onInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n\n  if (isEditing.value) {\n    changeHandler(target.value);\n  }\n};\n\nconst onIncrement = () => {\n  if (Number(backupValue.value) < field.value.max) {\n    backupValue.value = (\n      Number(backupValue.value) + Number(field.value.step)\n    ).toString();\n  }\n\n  changeHandler(backupValue.value);\n};\n\nconst onDecrement = () => {\n  if (Number(backupValue.value) > field.value.min) {\n    backupValue.value = (\n      Number(backupValue.value) - Number(field.value.step)\n    ).toString();\n  }\n\n  changeHandler(backupValue.value);\n};\n\nconst changeHandler = (value: string) => {\n  if (value?.toString()?.includes(\",\")) {\n    value = value.replace(\",\", \".\");\n  }\n\n  let innerValue = field.value.round\n    ? Math.round(parseFloat(value))\n    : parseFloat(value);\n\n  if (isNaN(innerValue)) {\n    return;\n  }\n\n  let numericValue = currencyInstance.parseCurrency(\n    value.toString(),\n    currencyInstance.getCurrencyOptions(field.value),\n  );\n\n  updateValue(true, numericValue);\n};\n\nconst onFocus = (e: Event) => {\n  const target = e.target as HTMLInputElement;\n  isEditing.value = true;\n  rawInput.value = parseFormattedValue(target.value || \"0\").toString();\n};\n\nconst onBlur = () => {\n  isEditing.value = false;\n};\n\nconst parseField = () => {\n  rawInput.value = parseQuantityValue(backupValue.value);\n};\n\nconst checkMinMaxRequired = () => {\n  const lessThenExpected = Number(rawInput.value) < +field.value.min;\n  const moreThenExpected = Number(rawInput.value) > +field.value.max;\n\n  if (lessThenExpected || moreThenExpected) {\n    requiredType.value = \"value_range\";\n  } else {\n    requiredType.value = \"required\";\n  }\n};\n\nconst toFixedCount = computed(() => {\n  let count = 0;\n  if (\n    isFloat(field.value.defaultValue.toString()) ||\n    isFloat(field.value.step.toString())\n  ) {\n    let toFixedCountDefault = field.value.defaultValue.toString().split(\".\")[1]\n      ? field.value.defaultValue.toString().split(\".\")[1].length\n      : 0;\n    let toFixedCountStep = field.value.step.toString().split(\".\")[1]\n      ? field.value.step.toString().split(\".\")[1].length\n      : 0;\n    count = Math.max(toFixedCountDefault, toFixedCountStep);\n  }\n\n  return count;\n});\n\nconst toFixedNoRound = (num: number, decimals: number): number => {\n  const factor = Math.pow(10, decimals);\n  return Math.floor(num * factor) / factor;\n};\n\nconst parseQuantityValue = (value: number | string): string => {\n  if (typeof value === \"number\" && value < 0) {\n    value = 0;\n  }\n\n  value = value.toString().replace(\",\", \".\");\n\n  if (!field.value.enabledCurrencySettings) {\n    const floatVal = parseFloat(value);\n    return toFixedNoRound(floatVal, toFixedCount.value).toString();\n  }\n\n  if (isNaN(Number(value)) || value.length === 0) {\n    value = \"0\";\n  }\n\n  let numericValue = parseFloat(value);\n\n  const settings = useSettingsStore();\n\n  let numAfterInteger: number =\n    settings.getCurrencySettings?.numAfterInteger || 0;\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  let thousandsSeparator: string =\n    settings.getCurrencySettings?.thousandsSeparator || \",\";\n\n  if (field.value.fieldCurrency) {\n    numAfterInteger = field.value?.fieldCurrencySettings?.numAfterInteger || 0;\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n    thousandsSeparator =\n      field.value?.fieldCurrencySettings?.thousandsSeparator || \",\";\n  }\n\n  if (numAfterInteger > 0) {\n    numericValue = toFixedNoRound(\n      numericValue,\n      parseInt(numAfterInteger.toString()),\n    );\n    value = numericValue.toFixed(numAfterInteger);\n\n    // Set decimal separator\n    value = value.toString().replace(\".\", decimalSeparator);\n\n    // Set thousand separator\n    const parts = value.split(decimalSeparator);\n\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsSeparator);\n    value = parts.join(decimalSeparator);\n  } else {\n    value = numericValue\n      .toString()\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsSeparator);\n  }\n\n  return value;\n};\n\nconst parseFormattedValue = (value: string) => {\n  const settings = useSettingsStore();\n\n  let numAfterInteger: number =\n    settings.getCurrencySettings?.numAfterInteger || 0;\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  let thousandsSeparator: string =\n    settings.getCurrencySettings?.thousandsSeparator || \",\";\n\n  if (field.value.fieldCurrency) {\n    numAfterInteger = field.value?.fieldCurrencySettings?.numAfterInteger || 0;\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n    thousandsSeparator =\n      field.value?.fieldCurrencySettings?.thousandsSeparator || \",\";\n  }\n\n  let parts;\n  if (value.includes(\".\") && value.includes(\",\")) {\n    parts = value.split(decimalSeparator);\n  } else if (value.includes(\",\")) {\n    parts = value.split(\",\");\n  } else if (value.includes(\".\")) {\n    parts = value.split(\".\");\n  } else {\n    parts = [value];\n  }\n\n  parts[0] = parts[0].split(thousandsSeparator).join(\"\");\n\n  let sanitizedValue = parts.join(\".\");\n\n  let result = parseFloat(sanitizedValue) || 0;\n\n  if (numAfterInteger !== undefined) {\n    let factor = Math.pow(10, numAfterInteger);\n    result = Math.round(result * factor) / factor;\n  }\n\n  return result;\n};\n\nconst intValueFilter = (event: KeyboardEvent): void => {\n  const settings = useSettingsStore();\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  if (field.value.fieldCurrency) {\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n  }\n\n  let keyCode = event.keyCode ? event.keyCode : event.which;\n  let separatorCode = 46;\n  if (decimalSeparator === \",\") {\n    separatorCode = 44;\n  }\n\n  if ((keyCode < 48 || keyCode > 57) && keyCode !== separatorCode) {\n    // 46 is dot 44 is comma\n    event.preventDefault();\n  }\n};\n\nconst isRequired = computed(() => {\n  const lessThenExpected = Number(rawInput.value) < field.value.min;\n  const moreThenExpected = Number(rawInput.value) > field.value.max;\n\n  if (lessThenExpected || moreThenExpected) {\n    return true;\n  }\n\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst getRangeRequiredText = computed(() => {\n  return `\n    ${translationsStore.getTranslations.valueMustBeBetween} ${field.value.min} ${translationsStore.getTranslations.and} ${field.value.max}\n  `;\n});\n\ncallbackStore.add(\"updateQuantity\", updateValue);\n\nonMounted(() => {\n  rawInput.value = field.value.originalValue.toString();\n  backupValue.value = rawInput.value;\n  updateValue(false, field.value.originalValue, undefined, true);\n});\n</script>\n\n<style lang=\"scss\" scoped>\ninput[type=\"number\"]::-webkit-outer-spin-button,\ninput[type=\"number\"]::-webkit-inner-spin-button {\n  -webkit-appearance: none !important;\n  margin: 0 !important;\n}\n</style>\n"],"file":"assets/index-CC5FkcLk.js"}
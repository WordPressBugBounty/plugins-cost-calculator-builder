import{m as re,u as le,f as oe,n as ue,a as I,o as ce,i as de,k as pe,p as fe}from"./widget-G8qGMCyR.js";import{_ as j}from"./RequiredHint.vue_vue_type_style_index_0_lang-D9F99cWG.js";import{u as ge}from"./translationsStore-C4wu_Y0X.js";import{d as me,B as ve,e as B,f as M,c as p,o,l as f,m as g,h as z,u as n,L as u,E as Se}from"./runtime-dom.esm-bundler-q8x4SZ5d.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const K=m=>{if(m===void 0||(m==null?void 0:m.length)<0)return!1;const N=/^[-+]?[0-9]+\.[0-9]+$/;return!!m.toString().match(N)},ye={class:"ccb-field__label"},he={key:0,class:"ccb-required-tooltip"},be={class:"ccb-field__title"},Ce={key:0,class:"ccb-field-required-mark"},xe={key:0,class:"ccb-field__descriptions ccb-before"},Fe={key:0,class:"ccb-field__description"},ke={key:1,class:"ccb-field__description"},Ve={class:"ccb-field__input-wrapper"},Me=["value","placeholder"],Ne={key:1,class:"ccb-field__descriptions ccb-after"},Te={key:0,class:"ccb-field__description"},qe={key:1,class:"ccb-field__description"},Ie=me({__name:"Quantity",props:{field:{}},setup(m){const N=m,{field:e}=ve(N),T=B("required"),L=re(),A=fe(),w=le(),E=oe(),O=ue(),G=ce(),v=ge(),P=de(),H=pe(),s=B(e.value.value.toString()),q=B(!1),J=M(()=>{if(q.value)return s.value;s.value=ne(s.value).toString();let t=e.value.round?Math.round(+s.value):+s.value;return D(t.toString())}),V=(t=!1,a)=>{s.value=a.toString(),te(),t&&typeof a<"u"&&(e.value.value=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=G.getCommonFieldDisplayView(e.value,s.value),E.updateField(e.value.alias,e.value),O.applyConditionForField(e.value.alias),P.getPageBreakEnabled()&&P.getActivePage().action==="not_skip"&&H.checkPageFieldsConditions()},U=t=>{const a=t.target;let i=e.value.round?Math.round(parseFloat(a.value)):parseFloat(a.value);if(isNaN(i))return;let l=A.parseCurrency(i.toString(),A.getCurrencyOptions(e.value));V(!0,l)},W=t=>{const a=t.target;q.value=!0,s.value=a.value},X=()=>{q.value=!1},Y=()=>{s.value=D(s.value)},Z=()=>{let t=Math.round((Number(s.value)+Number(e.value.step))*100)/100;V(!0,t)},ee=()=>{let t=Math.round((Number(s.value)-Number(e.value.step))*100)/100;t<0||V(!0,t)},te=()=>{const t=Number(s.value)<+e.value.min,a=Number(s.value)>+e.value.max;t||a?T.value="value_range":T.value="required"},ae=M(()=>{let t=0;if(K(e.value.defaultValue.toString())||K(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,i=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,i)}return t}),D=t=>{var S,d,y,h,b,C,x,F,k;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings)return parseFloat(t).toFixed(ae.value);(isNaN(Number(t))||t.length===0)&&(t="0");let a=parseFloat(t);const i=I();let l=((S=i.getCurrencySettings)==null?void 0:S.numAfterInteger)||0,c=((d=i.getCurrencySettings)==null?void 0:d.decimalSeparator)||".",r=((y=i.getCurrencySettings)==null?void 0:y.thousandsSeparator)||",";if(e.value.fieldCurrency&&(l=((b=(h=e.value)==null?void 0:h.fieldCurrencySettings)==null?void 0:b.numAfterInteger)||0,c=((x=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:x.decimalSeparator)||".",r=((k=(F=e.value)==null?void 0:F.fieldCurrencySettings)==null?void 0:k.thousandsSeparator)||","),l>0){a=parseFloat(a.toFixed(parseInt(l.toString()))),t=a.toFixed(l),t=t.toString().replace(".",c);const _=t.split(c);_[0]=_[0].replace(/\B(?=(\d{3})+(?!\d))/g,r),t=_.join(c)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,r);return t},ne=t=>{var y,h,b,C,x,F,k,_,$;const a=I();let i=((y=a.getCurrencySettings)==null?void 0:y.numAfterInteger)||0,l=((h=a.getCurrencySettings)==null?void 0:h.decimalSeparator)||".",c=((b=a.getCurrencySettings)==null?void 0:b.thousandsSeparator)||",";e.value.fieldCurrency&&(i=((x=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:x.numAfterInteger)||0,l=((k=(F=e.value)==null?void 0:F.fieldCurrencySettings)==null?void 0:k.decimalSeparator)||".",c=(($=(_=e.value)==null?void 0:_.fieldCurrencySettings)==null?void 0:$.thousandsSeparator)||",");let r;t.includes(".")&&t.includes(",")?r=t.split(l):t.includes(",")?r=t.split(","):t.includes(".")?r=t.split("."):r=[t],r[0]=r[0].split(c).join("");let S=r.join("."),d=parseFloat(S)||0;if(i!==void 0){let Q=Math.pow(10,i);d=Math.round(d*Q)/Q}return d},se=t=>{var r,S,d;let i=((r=I().getCurrencySettings)==null?void 0:r.decimalSeparator)||".";e.value.fieldCurrency&&(i=((d=(S=e.value)==null?void 0:S.fieldCurrencySettings)==null?void 0:d.decimalSeparator)||".");let l=t.keyCode?t.keyCode:t.which,c=46;i===","&&(c=44),(l<48||l>57)&&l!==c&&t.preventDefault()},R=M(()=>{const t=Number(s.value)<e.value.min,a=Number(s.value)>e.value.max;return t||a?!0:E.checkFieldRequired(e.value)}),ie=M(()=>`
    ${v.getTranslations.valueMustBeBetween} ${e.value.min} ${v.getTranslations.and} ${e.value.max}
  `);return L.add("updateQuantity",V),(t,a)=>(o(),p("div",{class:Se(["ccb-field ccb-field-quantity",{required:R.value,"ccb-field-disabled":n(e).disabled,[n(e).additionalStyles||""]:!!n(e).additionalStyles}])},[f("div",ye,[R.value?(o(),p("div",he,[T.value==="value_range"?(o(),z(j,{key:0,field:n(e),text:ie.value},null,8,["field","text"])):(o(),z(j,{key:1,field:n(e),text:n(v).getTranslations.requiredField},null,8,["field","text"]))])):g("",!0),f("div",be,[f("span",null,u(n(e).label),1),n(e).required?(o(),p("span",Ce,"*")):g("",!0)])]),n(w).getAppearanceDescriptionPosition==="before"?(o(),p("div",xe,[n(e).hideMinMax?g("",!0):(o(),p("div",Fe,u(n(v).getTranslations.min)+": "+u(n(e).min)+" - "+u(n(v).getTranslations.max)+": "+u(n(e).max),1)),n(e).description?(o(),p("div",ke,u(n(e).description),1)):g("",!0)])):g("",!0),f("div",Ve,[f("input",{type:"text",value:J.value,placeholder:n(e).placeholder,onInput:U,onFocus:W,onFocusout:Y,onBlur:X,onKeypress:se},null,40,Me),f("div",{class:"ccb-input-counter up",onClick:Z},a[0]||(a[0]=[f("i",{class:"ccb-icon-Path-3486"},null,-1)])),f("div",{class:"ccb-input-counter down",onClick:ee},a[1]||(a[1]=[f("i",{class:"ccb-icon-Path-3485"},null,-1)]))]),n(w).getAppearanceDescriptionPosition==="after"?(o(),p("div",Ne,[n(e).hideMinMax?g("",!0):(o(),p("div",Te,u(n(v).getTranslations.min)+": "+u(n(e).min)+" - "+u(n(v).getTranslations.max)+": "+u(n(e).max),1)),n(e).description?(o(),p("div",qe,u(n(e).description),1)):g("",!0)])):g("",!0)],2))}}),Re=_e(Ie,[["__scopeId","data-v-f99674b1"]]);export{Re as default};
//# sourceMappingURL=index-DPi1IiUG.js.map

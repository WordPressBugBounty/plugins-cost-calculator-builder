import{a as M,m as r,q as d,u as t,g as n,p as e,L as J,C as se,I as q,f as Q,D as P,b as i,e as X,_ as Z,N as _e,r as ve,k as $,o as ne,M as me,n as L,w as ie,O as U,J as fe,P as re,Q as be,R as ye,U as ee,K as he}from"./convert-case-to-camel-case.utils-DRsbC-qG.js";import{b as G,a as W,e as te,f as oe,g as ge,h as we,i as ke,j as xe,c as Se}from"./widget-DTyF7X6W.js";import{c as Pe}from"./index-BZCOha1n.js";import{u as Te}from"./translationsStore-C34buciO.js";import{_ as Ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ie={key:0,class:"is-pro"},le=M({__name:"ProBadge",setup(D){const x=G();return(p,_)=>t(x).getIsLive?(n(),r("span",Ie,_[0]||(_[0]=[e("span",{class:"pro-tooltip"},[J(" pro "),e("span",{class:"pro-tooltiptext"},[J("Feature Available "),e("br"),J(" in Pro Version")])],-1)]))):d("",!0)}}),Be=["href"],O=M({__name:"Button",props:{type:{},icon:{},iconPosition:{},text:{},onClick:{type:Function},disabled:{type:Boolean},isDemo:{type:Boolean},isLink:{type:Boolean},href:{}},setup(D){const x=D,{type:p,text:_,onClick:y,icon:b,iconPosition:l,isDemo:a,href:u}=se(x),c=()=>{y.value&&y.value()};return(g,S)=>g.isLink?(n(),r("a",{key:1,class:q(["ccb-button ccb-button--link",t(p),{disable:g.disabled}]),onClick:c,href:t(u)},[t(b)&&t(l)==="before"?(n(),r("i",{key:0,class:q(t(b))},null,2)):d("",!0),e("span",null,P(t(_)),1),t(b)&&t(l)==="after"?(n(),r("i",{key:1,class:q(t(b))},null,2)):d("",!0),t(a)?(n(),Q(le,{key:2})):d("",!0)],10,Be)):(n(),r("button",{key:0,class:q(["ccb-button",t(p),{disable:g.disabled}]),onClick:c},[t(b)&&t(l)==="before"?(n(),r("i",{key:0,class:q(t(b))},null,2)):d("",!0),e("span",null,P(t(_)),1),t(b)&&t(l)==="after"?(n(),r("i",{key:1,class:q(t(b))},null,2)):d("",!0),t(a)?(n(),Q(le,{key:2})):d("",!0)],2))}}),$e=M({__name:"index",props:{pdf:{},content:{}},setup(D){const x=D,{pdf:p,content:_}=se(x),y=i(()=>{var c,g,S,v,m,k,T,C;const a={width:"100%",color:"",backgroundColor:"",backgroundImage:""},u=(g=(c=p.value)==null?void 0:c.document)==null?void 0:g.tabs;if(u!=null&&u.body){const f=u.body;a.color=((v=(S=f.data)==null?void 0:S.textColor)==null?void 0:v.value)??"",a.backgroundColor=((k=(m=f.data)==null?void 0:m.backgroundColor)==null?void 0:k.value)??"",a.backgroundImage=(C=(T=f.data)==null?void 0:T.backgroundImage)!=null&&C.value?`url('${f.data.backgroundImage.value}')`:""}return a}),b=i(()=>{var c,g,S,v,m,k;const a=(k=(m=(v=(S=(g=(c=p.value)==null?void 0:c.document)==null?void 0:g.tabs)==null?void 0:S.sidebar)==null?void 0:v.data)==null?void 0:m.layout)==null?void 0:k.value;return{no_sidebar:"layout-no-sidebar",left_sidebar:"layout-with-left-sidebar",right_sidebar:"layout-with-right-sidebar"}[a]}),l=i(()=>{const a=b.value;return a==="layout-no-sidebar"?X(()=>Z(()=>import("./LayoutNoSidebar-BbBlaJCt.js"),[],import.meta.url)):a==="layout-with-left-sidebar"?X(()=>Z(()=>import("./LeftSidebar-DnyqFE3p.js"),[],import.meta.url)):a==="layout-with-right-sidebar"?X(()=>Z(()=>import("./RightSidebar-ByUVOno7.js"),[],import.meta.url)):""});return(a,u)=>(n(),r("div",{class:"ccb-pdf-layout-wrapper",style:_e(y.value)},[(n(),Q(ve(l.value),{pdf:t(p),content:t(_)},null,8,["pdf","content"]))],4))}}),De={class:"ccb-invoice"},qe={class:"ccb-pdf-tool-manager-preview"},Le=M({__name:"Invoice",emits:["generate-quote"],setup(D,{expose:x,emit:p}){const _=p,y=$(null),b=G(),l=W(),a=$(!1),u=$(""),c=$({id:"",orderDetails:[],paymentMethodType:"",total:"",totals:[]});ne(()=>{var w;c.value.id=((w=m.value)==null?void 0:w.toString())||"";const f={cash_payment:"Cash Payment",stripe:"Stripe",paypal:"Paypal",no_payments:"No Payment",no_payment:"No Payment"};c.value.paymentMethodType=f[k.value]||"No Payment"});const g=i(()=>l.getPdfSettings||{}),S=async({html2pdf:f,options:w,pdfContent:I})=>{let B=w;B.enableLinks=!0,B.pagebreak={mode:["css"],before:".break-before",after:".break-after",avoid:".avoid-break, .pdf-keep, .pdf-total-summary--body-item, .pdf-order-block-payment-info--totals-item"},B.html2canvas={...B.html2canvas||{},scale:2,windowWidth:I.scrollWidth},I.querySelector(".ccb-pdf-tool-manager-preview").style.width="794px",a.value?await f().from(I).set(B).output("blob").then(A=>{const N=URL.createObjectURL(A);window.open(N),setTimeout(()=>{URL.revokeObjectURL(N)},1e3)}):await f().set(B).from(I).toPdf().get("pdf").output("datauristring").then(A=>{u.value=A.split(",")[1],_("generate-quote",{data:u.value})})},v=async()=>{a.value=!1,y.value&&await y.value.generatePdf()},m=i(()=>te().getOrderId),k=i(()=>{const w=te().getSendPaymentType;return w||"No Payment"}),T=i(()=>b.title),C=()=>{a.value=!0,y.value&&y.value.generatePdf()};return me(k,()=>{const f={cash_payment:"Cash Payment",stripe:"Stripe",paypal:"Paypal",no_payments:"No Payment",no_payment:"No Payment"};c.value.paymentMethodType=f[k.value]||"No Payment"}),x({generate:C,generateQuote:v}),(f,w)=>(n(),r("div",De,[L(t(Pe),{id:"pdfContent","enable-download":a.value,"show-layout":!1,"float-layout":!0,"preview-modal":!1,filename:T.value,"pdf-quality":2,"manual-pagination":!0,"pdf-format":"a4","pdf-orientation":"portrait",ref_key:"invoice",ref:y,onBeforeDownload:w[0]||(w[0]=I=>S(I))},{"pdf-content":ie(()=>[e("div",qe,[L($e,{pdf:g.value,content:c.value},null,8,["pdf","content"])])]),_:1},8,["enable-download","filename"])]))}}),Ae={class:"ccb-popup__overlay"},Ne={class:"ccb-popup__wrapper"},Ee=M({__name:"Popup",props:{size:{}},setup(D,{expose:x}){const p=D,_=i(()=>p.size||"medium"),y=$(!1);return x({showPopup:()=>{y.value=!0},hidePopup:()=>{y.value=!1}}),(a,u)=>U((n(),r("div",{class:q(["ccb-popup",{[_.value]:!0}])},[e("div",Ae,[e("div",Ne,[fe(a.$slots,"default")])])],2)),[[re,y.value]])}}),Oe={key:0,class:"ccb-pdf-invoice",ref:"pdfInvoiceRef"},Me={key:0,class:"ccb-pdf-sendquote__header"},Qe={class:"ccb-pdf-sendquote__title"},Re={key:1,class:"ccb-pdf-sendquote__body"},Ve={class:"ccb-pdf-sendquote__input"},Fe={class:"required"},Ue=["placeholder"],je={class:"ccb-pdf-sendquote__input"},ze={class:"required"},Ye=["placeholder"],Ke={class:"ccb-pdf-sendquote__input"},We=["placeholder"],Ge={key:2,class:"ccb-pdf-sendquote__success"},He={class:"message"},Je={key:3,class:"ccb-pdf-sendquote__footer"},Xe={class:"ccb-pdf-sendquote__file"},Ze={key:0,class:"ccb-pdf-sendquote__error"},et=M({__name:"SendQuote",props:{hideButtons:{type:Boolean}},setup(D,{expose:x}){const p=G(),_=Te(),y=D,{hideButtons:b}=se(y),l=i(()=>`#ccb_app_${p.getCalcId}`),a=$(!1),u=$(!1),c=$({name:"",email:"",message:"",pdfName:""}),g=$(),S=$(),v=W(),m=i(()=>{const o=v.getQuoteSettings;return o||{errorText:"",successText:"",closeBtn:"",btnText:"",submitBtnText:"",buttonText:""}}),k=()=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!(!c.value.name.trim()||!c.value.email.trim()||!o.test(c.value.email)||!c.value.message.trim())},T=()=>{var o;(o=g.value)==null||o.generate()};x({generatePdf:T});const C=()=>{var o;(o=S.value)==null||o.showPopup()},f=()=>{var o;u.value=!1,a.value=!1,c.value={name:"",email:"",message:"",pdfName:""},(o=S.value)==null||o.hidePopup()},w=()=>{if(!k()){a.value=!0;return}g.value.generateQuote(),u.value=!0},I=i(()=>m.value.errorText),B=o=>{const s=c.value;setTimeout(async()=>{const h=new FormData;h.append("action","ccb_send_invoice"),h.append("nonce",window.ccb_nonces.ccb_send_invoice),h.append("pdfString",o.data),s.pdfName=V.value;const E=ge(s);h.append("data",E),await(await fetch(window.ajax_window.ajax_url,{method:"POST",body:h})).json()},3e3)},A=i(()=>{var h,E,H;const o=(h=v.getFormSettings)==null?void 0:h.summaryDisplay;if(o!=null&&o.enable&&(o==null?void 0:o.actionAfterSubmit)!=="show_summary_block_with_pdf"||!((E=v.getInvoice)!=null&&E.useInAll))return!1;const s=oe();return!((H=v.getInvoice)!=null&&H.showAfterPayment)||s.notificationType==="finish"}),N=i(()=>m.value.successText),j=i(()=>{var o;return((o=v.getInvoice)==null?void 0:o.pdfButtonText)||"PDF Download"}),R=i(()=>{var o;return(o=v.getInvoice)==null?void 0:o.emailButton}),V=i(()=>p.getCalcTitle),z=i(()=>m.value.closeBtn),Y=i(()=>m.value.btnText),K=i(()=>m.value.submitBtnText),F=i(()=>p.getIsLive),ue=i(()=>R.value?"ccb-pdf-invoice__actions--show-share":"ccb-pdf-invoice__actions--show-pdf"),ae=()=>{T()},ce=o=>{var h;((h=o.detail)==null?void 0:h.calcId)===p.getCalcId&&C()},de=()=>{var E;const o=`__ccb_pdf_listeners_${p.getCalcId}`;if(window[o])return;const s=v.getThankYouPage,h=(E=v==null?void 0:v.stickyCalc)==null?void 0:E.oneClickAction;(p.isThankYouPage||s!=null&&s.enable&&(s==null?void 0:s.type)==="modal"&&(s!=null&&s.downloadButton)||h==="pdf")&&window.addEventListener("ccbDownLoadPdf",ae),window.addEventListener("ccbOpenModal",ce),window[o]=!0},pe=i(()=>{var s;if(b.value)return!0;const o=oe();return(s=v.getInvoice)!=null&&s.showAfterPayment?o.notificationType!=="finish":!1});return ne(()=>{de()}),be(()=>{window.removeEventListener("ccbDownLoadPdf",ae),window.removeEventListener("ccbOpenModal",ce);const o=`__ccb_pdf_listeners_${p.getCalcId}`;window[o]&&delete window[o]}),(o,s)=>(n(),r("div",null,[A.value?(n(),r("div",Oe,[pe.value?d("",!0):(n(),r("div",{key:0,class:q(["ccb-pdf-invoice__actions",ue.value])},[A.value?(n(),Q(t(O),{key:0,type:"light",text:j.value,onClick:T,isDemo:F.value},null,8,["text","isDemo"])):d("",!0),R.value?(n(),Q(t(O),{key:1,type:"light",text:Y.value,onClick:C,isDemo:F.value},null,8,["text","isDemo"])):d("",!0)],2))],512)):d("",!0),(n(),Q(ye,{to:l.value},[L(Ee,{ref_key:"popup",ref:S},{default:ie(()=>[e("div",{class:q(["ccb-pdf-sendquote",{"quote-success":u.value}])},[u.value?d("",!0):(n(),r("div",Me,[e("div",Qe,P(t(_).getTranslations.emailQuote),1),e("div",{class:"ccb-pdf-sendquote__close",onClick:f},s[3]||(s[3]=[e("i",{class:"ccb-icon-close"},null,-1)]))])),u.value?d("",!0):(n(),r("div",Re,[e("div",Ve,[e("label",Fe,P(t(_).getTranslations.name),1),U(e("input",{type:"text",placeholder:t(_).getTranslations.typeYourName,"onUpdate:modelValue":s[0]||(s[0]=h=>c.value.name=h)},null,8,Ue),[[ee,c.value.name]])]),e("div",je,[e("label",ze,P(t(_).getTranslations.email),1),U(e("input",{type:"text",placeholder:t(_).getTranslations.typeYourEmail,"onUpdate:modelValue":s[1]||(s[1]=h=>c.value.email=h)},null,8,Ye),[[ee,c.value.email]])]),e("div",Ke,[e("label",null,P(t(_).getTranslations.message),1),U(e("textarea",{placeholder:t(_).getTranslations.enterMessage,cols:"6",rows:"5",maxlength:"400","onUpdate:modelValue":s[2]||(s[2]=h=>c.value.message=h)},null,8,We),[[ee,c.value.message]])])])),u.value?(n(),r("div",Ge,[s[4]||(s[4]=e("div",{class:"ccb-pdf-sendquote__success-icon"},[e("i",{class:"ccb-icon-Octicons"})],-1)),e("div",He,P(N.value),1),L(t(O),{type:"success",text:z.value,onClick:f},null,8,["text"])])):d("",!0),u.value?d("",!0):(n(),r("div",Je,[e("div",Xe,[s[5]||(s[5]=e("i",{class:"ccb-icon-pdf"},null,-1)),e("span",null,P(V.value)+".pdf",1)]),L(t(O),{type:"success",text:K.value,onClick:w},null,8,["text"]),a.value?(n(),r("div",Ze,[s[6]||(s[6]=e("span",null,[e("i",{class:"ccb-icon-Path-3367"})],-1)),e("span",null,P(I.value),1)])):d("",!0)]))],2)]),_:1},512)],8,["to"])),L(t(Le),{ref_key:"invoiceComponent",ref:g,onGenerateQuote:B},null,512)]))}}),tt={class:"calc-thank-you-page-container vertical"},ot={class:"thank-you-page-inner-container"},st={class:"thank-you-page__title-box"},nt=["textContent"],at=["textContent"],ct={key:0,class:"thank-you-page__order"},lt=["textContent"],it=["textContent"],rt={class:"thank-you-page__actions"},ut={class:"thank-you-page__actions-wrapper"},dt={key:0},pt={key:1},_t=["href"],vt=["textContent"],mt={key:2},ft={key:3},bt=M({__name:"ThankYouPage",setup(D){const x=W(),p=te(),_=oe(),y=G(),b=$(!1),l=i(()=>x.getThankYouPage),a=i(()=>x.getInvoice),u=i(()=>{var m;return((m=l.value)==null?void 0:m.type)!=="modal"}),c=i(()=>{var m;return((m=l.value)==null?void 0:m.type)==="separate_page"}),g=()=>{if(c){const w=localStorage.getItem("ccb_previous_page");w&&(localStorage.removeItem("ccb_previous_page"),window.location.href=w)}we().updatePaymentType(""),ke().setIsPaymentAfterSubmit(!1),W().updateTermsValue(!1),xe().resetBtnData(),Se().updateActivePageIndex(0),b.value=!1,y.updateThankYouPageStatus(!1),_.resetNotifications()},S=()=>{window.dispatchEvent(new CustomEvent("ccbDownLoadPdf"))},v=()=>{window.dispatchEvent(new CustomEvent("ccbOpenModal",{detail:{calcId:y.getCalcId}}))};return ne(()=>{b.value=!0}),(m,k)=>{var T,C,f,w,I,B,A,N,j,R,V,z,Y,K,F;return n(),r("div",tt,[U(e("div",{class:q(["thank-you-page",{loaded:b.value}])},[u.value?d("",!0):(n(),r("span",{key:0,class:"thank-you-page-close",onClick:he(g,["prevent"])},k[0]||(k[0]=[e("span",{class:"ccb-icon-close-x"},null,-1)]))),e("div",ot,[k[1]||(k[1]=e("div",{class:"thank-you-page__icon-box"},[e("span",{class:"icon-wrapper"},[e("span",{class:"icon-content"},[e("i",{class:"ccb-icon-Octicons"})])])],-1)),e("div",st,[e("span",{class:"thank-you-page__title-box-title",textContent:P((T=l.value)==null?void 0:T.title)},null,8,nt),e("span",{class:"thank-you-page__title-box-desc",textContent:P((C=l.value)==null?void 0:C.description)},null,8,at)]),(f=l.value)!=null&&f.showOrderId?(n(),r("div",ct,[e("span",null,[e("span",{textContent:P((w=l.value)==null?void 0:w.orderTitle)},null,8,lt),e("span",{textContent:P(t(p).orderId)},null,8,it)])])):d("",!0),e("div",rt,[e("div",ut,[u.value?(n(),r("div",dt,[L(t(O),{text:((I=l.value)==null?void 0:I.backButtonText)||"",onClick:g,type:"light",icon:"ccb-icon-Arrow-Previous","icon-position":"before"},null,8,["text"])])):d("",!0),(B=l.value)!=null&&B.customButton?(n(),r("div",pt,[e("a",{href:(A=l.value)==null?void 0:A.customButtonLink,target:"_blank",class:"ccb-button calc-secondary"},[e("span",{textContent:P((N=l.value)==null?void 0:N.customButtonText)},null,8,vt)],8,_t)])):d("",!0),(j=l.value)!=null&&j.downloadButton&&((R=a.value)!=null&&R.useInAll)?(n(),r("div",mt,[L(t(O),{text:(V=l.value)==null?void 0:V.downloadButtonText,onClick:S,type:"success"},null,8,["text"])])):d("",!0),(z=l.value)!=null&&z.shareButton&&((Y=a.value)!=null&&Y.useInAll)&&((K=a.value)!=null&&K.emailButton)?(n(),r("div",ft,[L(t(O),{class:"calc-secondary",onClick:v,type:"success-outlined",text:(F=l.value)==null?void 0:F.shareButtonText},null,8,["text"])])):d("",!0)])])]),L(t(et),{"hide-buttons":!0})],2),[[re,b.value]])])}}}),xt=Ce(bt,[["__scopeId","data-v-d6dcb6c1"]]);export{xt as T,Ee as _,O as a,et as b,le as c};
//# sourceMappingURL=ThankYouPage-COolTCjK.js.map

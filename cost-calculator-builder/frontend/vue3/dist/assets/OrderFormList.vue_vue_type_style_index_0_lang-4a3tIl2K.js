const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./widget-CcM9jV3D.css","./RequiredHint-uxu_wpFZ.css","./index-BkHszxMX.css","./OrderEmail-CDL72wGN.css","./OrderPhone-DLhTHF1_.css","./OrderTextarea-BeyyFHRz.css","./OrderNumber-C85wQNJC.css","./OrderSpace-DPu2rkSM.css","./OrderRadio-CfY9A864.css","./OrderCheckbox-bRiJUzMz.css","./OrderDate-CZU6STgb.css","./main-CWmBI_q2.css","./index-CYSgyfdx.css"])))=>i.map(i=>d[i]);
import{g as d,d as q,B as Y,f as i,h as E,o as l,j as Ce,u as S,c as f,E as $,l as C,m as k,w as xe,a1 as ke,N as U,L as G,e as B,z as we,k as Te,a as L,M as O,I as he,T as Fe,F as Ae}from"./runtime-dom.esm-bundler-DVhL8Vyv.js";import{a as Z,h as Ee,c as Pe,b as Ie,f as Be,e as V,d as J,i as Q,t as Le}from"./widget-luNKFOfH.js";import{c as Oe}from"./index-6NMBxa6w.js";import{_ as p}from"./translationsStore-Crbl8s4V.js";import{c as De,_ as X}from"./ThankYouPage-B_6bt1UA.js";import{_ as Ne}from"./RequiredHint.vue_vue_type_style_index_0_lang-DWClyS2l.js";import{_ as Re}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ve=x=>new DOMParser().parseFromString("<!doctype html><body>"+x,"text/html").body.textContent||"",$e={name:d(()=>p(()=>import("./OrderName-BfZHGSGs.js"),__vite__mapDeps([0,1]),import.meta.url)),dropdown:d(()=>p(()=>import("./index-BQIvCupW.js"),__vite__mapDeps([0,1,2]),import.meta.url)),email:d(()=>p(()=>import("./OrderEmail-CjujmyFZ.js"),__vite__mapDeps([0,1,3]),import.meta.url)),phone:d(()=>p(()=>import("./OrderPhone-CGDxGl8F.js"),__vite__mapDeps([0,1,4]),import.meta.url)),text:d(()=>p(()=>import("./OrderText-T19QEaQd.js"),__vite__mapDeps([0,1]),import.meta.url)),textarea:d(()=>p(()=>import("./OrderTextarea-DZk_-6rI.js"),__vite__mapDeps([0,1,5]),import.meta.url)),"input-textbox":d(()=>p(()=>import("./OrderTextBox-C71tG20l.js"),__vite__mapDeps([0,1]),import.meta.url)),number:d(()=>p(()=>import("./OrderNumber-D4xwuwbc.js"),__vite__mapDeps([0,1,6]),import.meta.url)),space:d(()=>p(()=>import("./OrderSpace-Che0ffg0.js"),__vite__mapDeps([7]),import.meta.url)),radio:d(()=>p(()=>import("./OrderRadio-zzQRjY1g.js"),__vite__mapDeps([0,1,8]),import.meta.url)),checkbox:d(()=>p(()=>import("./OrderCheckbox-CNx1VW08.js"),__vite__mapDeps([0,1,9]),import.meta.url)),"formatted-text":d(()=>p(()=>import("./OrderFormattedText-Ci6FnaK9.js"),[],import.meta.url)),"date-picker":d(()=>p(()=>import("./OrderDate-CsEK9ZRg.js"),__vite__mapDeps([0,1,10,11]),import.meta.url)),"time-picker":d(()=>p(()=>import("./index-D5WIu45G.js"),__vite__mapDeps([0,1,12,11]),import.meta.url))},qe=q({__name:"OrderFormItem",props:{name:{},field:{}},setup(x){const m=x,{field:v,name:w}=Y(m),T=i(()=>{const n=w.value;return $e[n]||""});return(n,h)=>(l(),E(Ce(T.value),{field:S(v)},null,8,["field"]))}}),Me={class:"ccb-order-field__wrapper"},He={for:"terms_and_conditions"},Ke={class:"ccb-checkbox-label"},je=["href"],ze=q({__name:"TermsAndConditions",setup(x){const m=Z(),v=i({get(){var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.checkbox)||!1},set(a){m.updateTermsValue(a)}}),w=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.text)||""}),T=i(()=>{var a,o;return((o=(a=m.getWarningTexts)==null?void 0:a.formFields)==null?void 0:o.termsAndConditionsField)||"Please, check out our terms and click on the checkbox"}),n=i(()=>m.checkTermsAndConditionsApproved),h=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.linkText)||""}),c=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.link)||""});return(a,o)=>(l(),f("div",{class:$(["ccb-default-checkbox ccb-terms-check",{"ccb-terms-and-conditions-required":n.value}])},[C("div",Me,[n.value?(l(),E(Ne,{key:0,text:T.value},null,8,["text"])):k("",!0),C("label",He,[xe(C("input",{type:"checkbox",id:"terms_and_conditions",name:"terms_and_conditions","onUpdate:modelValue":o[0]||(o[0]=F=>v.value=F),value:!0},null,512),[[ke,v.value]]),C("span",Ke,[U(G(w.value)+" ",1),C("a",{href:c.value,target:"_blank"},[U(G(h.value)+" ",1),o[1]||(o[1]=C("i",{class:"ccb-icon-click-out"},null,-1))],8,je)])])])],2))}}),We=Re(ze,[["__scopeId","data-v-b1d2f2cc"]]),Ue={key:0,class:"ccb-order-form__submit ccb-col-12"},Ge=["innerHTML"],Je=["id"],Qe={key:1,class:"ccb-order-form__submit ccb-col-12"},st=q({__name:"OrderFormList",props:{payment:{type:Boolean}},setup(x){const m=B(!1),v=x,{payment:w}=Y(v),{validateOrderFormSettings:T}=Le(),n=Ee(),h=Pe(),c=Z(),a=Ie(),o=B(null),F=B(!1),b=Be(),ee=i(()=>n.getFormFields),te=i(()=>{var e;return((e=c.getFormSettings)==null?void 0:e.openModalBtnText)||"Make Order"}),re=i(()=>{const e=c.getRecaptchaSettings;return(e==null?void 0:e.enable)&&(e==null?void 0:e.type)==="v2"||!1}),oe=i(()=>{var t,r;const e=(t=c.getFormSettings)==null?void 0:t.summaryDisplay;return I.value==="woocommerce"?"Add to cart":e!=null&&e.enable?e.submitBtnText||"View Summary":((r=c.getFormSettings)==null?void 0:r.submitBtnText)||"Submit Order"}),A=B(!1),P=i(()=>a.getIsLive),se=()=>{var s;if(P.value){A.value=!0,setTimeout(()=>{A.value=!1},5e3);return}const e=c.getRecaptchaSettings;let t=!0;const r=Q();if(e!=null&&e.enable){if(e.type==="v2"){if(!n.getCaptchaToken){r.updateNotifications({status:!0,type:"error",message:"reCAPTCHA verification failed"});return}}else if(e.type==="v3"){t=!1,(s=window.grecaptcha)==null||s.ready(()=>{var u;(u=window.grecaptcha)==null||u.execute(e.siteKey,{action:"submit"}).then(_=>{n.setCaptchaToken(_),t=!0,M()}).catch(_=>{r.updateNotifications({status:!0,type:"error",message:"reCAPTCHA v3 verification failed"})})});return}}t&&M()},M=()=>{(I.value==="woocommerce"||!T())&&h.submissionCreateOrder()},ne=e=>{const t=e.detail.inputs.map(r=>({label:r.name||"",value:r.value.replace(/\n/g," ")||"",attributes:{label:r.name||"",type:r.name||""}}));h.submissionCreateOrder(t)},H=i(()=>{const e=V(),t=J();return w.value?t.isPaymentAfterSubmit&&t.getSubmit?!1:e.showForm:!0}),I=i(()=>V().paymentType),ae=i(()=>{var t;if((t=c.getFormSettings)!=null&&t.contactFormId)return!1;const e=J();return!(e.isPaymentAfterSubmit&&e.getSubmit)}),K=i(()=>{var t;const e=V();return b.pageBreakEnabled&&b.getActivePageIndex!==b.getPages.length-1&&!((t=c.getPageBreakerSettings)!=null&&t.summaryAfterLastPage)?!0:H.value?!1:e.paymentType&&!b.checkRequiredFields()?!0:!e.paymentType}),ie=()=>{b.checkRequiredFields()&&(n.updateNextButtonStatus(!1),n.updateNextButton(!0),F.value=!0,setTimeout(()=>{pe()}))},ce=i(()=>{const t=`ccb_front_template_${D.value}`,r=window[t];return r&&"cf7_form"in r?r.cf7_form:""}),D=i(()=>{var e;return((e=a.getCalcId)==null?void 0:e.toString())||""}),ue=()=>{var r;if(o.value=document.querySelector(`#ccb_app_${D.value}`),!o.value||((r=o.value)==null?void 0:r.getElementsByClassName("ccb-contact-form7").length)<=0||o.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form").length<=0)return;let e=o.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form")[0];[...e.getElementsByTagName("p")].forEach(s=>{s.classList.contains("ccb-hidden")&&(s.classList.remove("ccb-hidden"),s.style.display="block")}),e.getElementsByClassName("wpcf7-response-output").length>0&&(e.getElementsByClassName("wpcf7-response-output")[0].innerHTML="")},le=e=>{var t;e.preventDefault(),!P.value&&F.value&&(ne(e),F.value=!1,((t=e==null?void 0:e.detail)==null?void 0:t.status)==="mail_sent"&&n.updateContactFormDisabled(!0))},me=()=>{var e,t,r,s,u,_;if((e=c.getFormSettings)!=null&&e.contactFormId){let g=(t=c.getFormSettings)==null?void 0:t.body;const N=(r=o.value)==null?void 0:r.querySelector(".wpcf7-form");if(g.indexOf("[ccb-subtotal]")!==-1){let y=b.parseContactFormDescriptions();g=g.replaceAll("[ccb-subtotal]",y)}const ve=(u=(s=c.getFormSettings)==null?void 0:s.formulas)==null?void 0:u.map(y=>y.alias),be=b.parseContactFormTotals(ve),ye=/\[ccb-total(?:-\d+)?\]/g;g=g.replaceAll(ye,`${be}
`);const z=N==null?void 0:N.querySelector("textarea");if(z&&(z.value=Ve(g)),window.wpcf7&&"init"in window.wpcf7){const y=(_=o.value)==null?void 0:_.querySelectorAll(".wpcf7 > form");y==null||y.forEach(R=>{var W;(W=window.wpcf7)==null||W.init(R),P.value&&R.addEventListener("submit",Se=>{Se.preventDefault(),A.value=!0,setTimeout(()=>{A.value=!1},5e3)})})}}},de=()=>{document.addEventListener("wpcf7mailsent",le,!1)},pe=()=>{ue(),de(),me()},j=()=>{const e=c.getRecaptchaSettings;e!=null&&e.enable&&(e!=null&&e.siteKey)&&(e!=null&&e.secretKey)&&(_e(e),fe(e))},_e=e=>{const t=Q();if(e.type==="v2"){const r=document.querySelectorAll(".g-rec");window.ccbCaptchaFnc=()=>{r.forEach(s=>{var u;try{const _=(u=window==null?void 0:window.grecaptcha)==null?void 0:u.render(s,{sitekey:e.siteKey,callback:g=>{n.setCaptchaToken(g)},"expired-callback":()=>{n.setCaptchaToken("")}});_&&s.setAttribute("data-widget_id",_.toString())}catch{t.updateNotifications({status:!0,type:"error",message:"Error rendering reCAPTCHA"})}})}}else e.type==="v3"&&(window.ccbCaptchaFnc=()=>{var r;(r=window.grecaptcha)==null||r.ready(()=>{var s;(s=window.grecaptcha)==null||s.execute(e.siteKey,{action:"submit"}).then(u=>{n.setCaptchaToken(u)}).catch(u=>{t.updateNotifications({status:!0,type:"error",message:"Error executing reCAPTCHA v3"})})})})},fe=async e=>{var u;if(m.value&&(e==null?void 0:e.type)==="v3")return;const t={v2:"https://www.google.com/recaptcha/api.js?onload=ccbCaptchaFnc&render=explicit",v3:`https://www.google.com/recaptcha/api.js?render=${e.siteKey}`},r=document.createElement("script");r.src=t[e.type],r.setAttribute("defer",""),r.setAttribute("async","");const s=document.querySelectorAll("script")[0];(u=s==null?void 0:s.parentNode)==null||u.insertBefore(r,s),m.value=!0},ge=i(()=>n.getNextButtonStatus);return we(ge,e=>{const t=c.getRecaptchaSettings;!e&&(t!=null&&t.enable)&&(t==null?void 0:t.type)==="v2"?setTimeout(()=>{j()}):e&&(t!=null&&t.enable)&&(t==null?void 0:t.type)==="v2"&&n.setCaptchaToken("")}),Te(()=>{const e=c.getRecaptchaSettings;e!=null&&e.enable&&(e==null?void 0:e.type)==="v3"&&!m.value&&setTimeout(()=>{j()},1e3)}),(e,t)=>{var r,s,u;return l(),f("div",{class:$(["ccb-order-form",{"ccb-order-form-legacy":!((r=S(c).getFormSettings)!=null&&r.contactFormId),"is-live-form":!S(n).getNextButtonStatus&&P.value}])},[L(De),S(n).getNextButtonStatus&&I.value!=="woocommerce"?(l(),f("div",Ue,[L(X,{type:"success",text:te.value,"on-click":ie,disabled:K.value},null,8,["text","disabled"])])):(l(),f(O,{key:1},[H.value&&I.value!=="woocommerce"?(l(),f(O,{key:0},[(s=S(c).getFormSettings)!=null&&s.contactFormId?(l(),f("div",{key:0,class:$(["ccb-contact-form7",{"calc-cf7-disabled":S(n).getContactFormDisabled}])},[C("div",{class:"ccb-contact-form7-container",innerHTML:ce.value},null,8,Ge)],2)):(l(),f(O,{key:1},[(l(!0),f(O,null,he(ee.value,_=>(l(),E(qe,{field:_,key:_.id,name:_.type},null,8,["field","name"]))),128)),(u=S(c).getFormSettings)!=null&&u.accessTermsEmail?(l(),E(We,{key:0})):k("",!0),re.value?(l(),f("div",{key:1,id:D.value,class:"g-rec",style:{"max-width":"100px"}},null,8,Je)):k("",!0)],64))],64)):k("",!0),ae.value?(l(),f("div",Qe,[L(X,{type:"success",text:oe.value,"on-click":se,disabled:K.value},null,8,["text","disabled"])])):k("",!0),L(Fe,{name:"fade"},{default:Ae(()=>[A.value?(l(),E(Oe,{key:0})):k("",!0)]),_:1})],64))],2)}}});export{st as _};
//# sourceMappingURL=OrderFormList.vue_vue_type_style_index_0_lang-4a3tIl2K.js.map

{"version":3,"file":"RepeaterItem-CbIObANU.js","sources":["../../src/widget/shared/ui/total-summary/items/RepeaterItem.vue"],"sourcesContent":["<template>\n  <div class=\"ccb-summary-repeater\">\n    <template v-for=\"(elements, idx) in summary.groupElements\">\n      <div\n        class=\"ccb-summary-repeater__header\"\n        @click=\"collapseStore[idx] = !collapseStore[idx]\"\n        v-if=\"getFieldsFromMap(elements).length > 0\"\n      >\n        <div class=\"ccb-summary-repeater__left\">\n          <div\n            class=\"ccb-summary-repeater__btn\"\n            :aria-expanded=\"!collapseStore[idx]\"\n            :class=\"{ rotated: collapseStore[idx] }\"\n          >\n            <i class=\"ccb-icon-Path-3514\"></i>\n          </div>\n          <div class=\"ccb-summary-repeater__title\">{{ summary.label }}</div>\n          <div class=\"ccb-summary-repeater__count\">#{{ idx + 1 }}</div>\n        </div>\n        <div class=\"ccb-summary-repeater__value\">\n          {{ getGroupTotal(elements) }}\n        </div>\n      </div>\n      <div\n        class=\"ccb-summary-repeater__list\"\n        :class=\"{ hidden: collapseStore[idx] }\"\n      >\n        <template\n          v-if=\"getFieldsFromMap(elements).length > 0\"\n          v-for=\"element in getFieldsFromMap(elements)\"\n        >\n          <Transition name=\"fade\">\n            <TotalSummaryItem\n              item-type=\"summary\"\n              :summary=\"element\"\n            ></TotalSummaryItem>\n          </Transition>\n        </template>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, toRefs } from \"vue\";\nimport { Field, IRepeaterField } from \"@/widget/shared/types/fields\";\nimport TotalSummaryItem from \"@/widget/shared/ui/total-summary/TotalSummaryItem.vue\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore\";\n\ntype Props = {\n  summary: IRepeaterField;\n};\n\nconst props = defineProps<Props>();\nconst { summary } = toRefs(props);\n\nconst collapseStore = ref<Record<number, boolean>>({});\nconst fieldsStore = useFieldsStore();\n\nconst getFieldsFromMap = computed(() => {\n  return (data: Map<string, Field>): Field[] => {\n    return Array.from(data.values()).filter((item: Field) => item.addToSummary);\n  };\n});\n\nconst getGroupTotal = (data: Map<string, Field>): number => {\n  return fieldsStore.getRepeaterGroupTotal(summary.value, data);\n};\n</script>\n\n<style lang=\"scss\">\n.ccb-summary-repeater {\n  padding-left: 15px;\n\n  &__header {\n    display: grid;\n    grid-template-columns: 1fr auto;\n    align-items: center;\n    margin-bottom: 10px;\n    cursor: pointer;\n\n    &:not(:first-child) {\n      margin-top: 12px;\n    }\n\n    .ccb-summary-repeater__left {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: 4px;\n    }\n\n    .ccb-summary-repeater__btn {\n      cursor: pointer;\n      font-size: 10px;\n      margin-right: 4px;\n      color: var(--ccb-text-color);\n      transition: transform 0.4s;\n\n      &.rotated {\n        transform: rotate(180deg);\n      }\n    }\n\n    .ccb-summary-repeater__title {\n      font-size: var(--ccb-repeater-title-font-size);\n      font-weight: 700;\n      margin-right: 4px;\n      color: var(--ccb-text-color);\n    }\n\n    .ccb-summary-repeater__count {\n      font-size: var(--ccb-repeater-title-font-size);\n      font-weight: 600;\n      color: var(--ccb-summary-description-color);\n    }\n\n    .ccb-summary-repeater__value {\n      justify-self: end;\n      font-size: var(--ccb-summary-text-size);\n      font-weight: var(--ccb-summary-text-weight);\n      color: var(--ccb-text-color);\n      text-transform: var(--ccb-summary-text-transform);\n    }\n  }\n\n  &__list {\n    padding: 0 10px;\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n    transition: all 0.4s;\n    max-height: 2000px;\n    overflow: hidden;\n\n    &.hidden {\n      max-height: 0;\n    }\n  }\n}\n</style>\n"],"names":["props","__props","summary","toRefs","collapseStore","ref","fieldsStore","useFieldsStore","getFieldsFromMap","computed","data","item","getGroupTotal"],"mappings":"80BAqDA,MAAMA,EAAQC,EACR,CAAE,QAAAC,CAAA,EAAYC,EAAOH,CAAK,EAE1BI,EAAgBC,EAA6B,EAAE,EAC/CC,EAAcC,EAAe,EAE7BC,EAAmBC,EAAS,IACxBC,GACC,MAAM,KAAKA,EAAK,OAAO,CAAC,EAAE,OAAQC,GAAgBA,EAAK,YAAY,CAE7E,EAEKC,EAAiBF,GACdJ,EAAY,sBAAsBJ,EAAQ,MAAOQ,CAAI"}
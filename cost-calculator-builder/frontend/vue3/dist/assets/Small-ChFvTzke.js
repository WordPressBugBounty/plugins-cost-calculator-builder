import{m as L}from"./slider-CdghZgAd.js";import{d as $,k as y,t as B,c as r,m as P,R as z,L as C,l as p,o as f,n as o,p as D,s as x,A as b,u as i,q as S,F as q,z as E,M as R}from"./pinia-Bf90yW2D.js";const U={class:"slider-min-max"},A={class:"label"},O={class:"label"},G={class:"custom-marks"},H=["onClick"],K=$({__name:"Small",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup(h,{emit:w}){const m=h,d=w,N=y(m.modelValue),{field:t}=B(m),V=r({get:()=>m.modelValue,set:a=>d("update:modelValue",a)}),s=r(()=>Number(t.value.min)),u=r(()=>Number(t.value.max)),M=r(()=>t.value.jump?1:Number(t.value.step||1)),_=r(()=>t.value.jump),c=r(()=>{var l;return(((l=t.value.scalePoints)==null?void 0:l.trim())||"").split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e)&&e>=s.value&&e<=u.value)}),j=a=>({left:`${(a-s.value)/(u.value-s.value)*100}%`}),F=a=>{const l=a.toFixed(2);return parseFloat(l).toString()},k=a=>{_.value&&c.value.includes(a)&&(n.value=a.toString(),d("update:modelValue",a))};let v,n=y("0");return P(()=>{t.value.defaultValue&&(n.value=t.value.defaultValue.toString());const a=document.querySelector(`[data-id="${t.value.alias}"] .slider-tooltip`);a&&(v=new MutationObserver(l=>{for(const e of l)e.type==="childList"&&(n.value=a.textContent??"")}),v.observe(a,{childList:!0,subtree:!0,characterData:!0}))}),z(()=>{v&&v.disconnect()}),C(()=>m.modelValue,a=>{n.value=a.toString(),N.value=a}),C(N,a=>{if(_.value){const l=c.value.reduce((e,g)=>Math.abs(g-a)<Math.abs(e-a)?g:e,c.value[0]);d("update:modelValue",l)}else d("update:modelValue",a)}),(a,l)=>(f(),p("div",{class:b(["slider-wrapper ccb-small-range-field",{jump:i(t).jump}])},[o("div",U,[o("div",{class:"slider-min-max-item first",onClick:l[0]||(l[0]=e=>k(s.value))},[o("span",A,x(s.value),1)]),o("div",{class:b(["slider-min-max-item",{done:V.value>=u.value}]),onClick:l[1]||(l[1]=e=>k(u.value))},[o("span",O,x(u.value),1)],2)]),D(i(L),{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),min:s.value,max:u.value,step:M.value,disabled:i(t).disabled,"show-tooltip":"focus",class:"custom-slider",marks:!0,format:F},null,8,["modelValue","min","max","step","disabled"]),o("div",G,[i(t).scalePoints?(f(!0),p(q,{key:0},E(c.value,e=>(f(),p("div",{key:e,class:"mark",style:R(j(e))},[o("div",{class:b(["tick",{"tick-passed":e<=Number(i(n))}])},null,2),e!==s.value&&e!==u.value?(f(),p("div",{key:0,class:b(["label",{"label-passed":e<=Number(i(n))}]),onClick:g=>k(e)},x(e),11,H)):S("",!0)],4))),128)):S("",!0)])],2))}});export{K as default};
//# sourceMappingURL=Small-ChFvTzke.js.map

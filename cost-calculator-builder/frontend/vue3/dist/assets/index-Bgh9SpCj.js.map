{"version":3,"file":"index-Bgh9SpCj.js","sources":["../../src/sticky/widgets/floating-cart/FloatingCart.vue"],"sourcesContent":["<template>\n  <div\n    class=\"sticky-calculator-btn\"\n    :style=\"getBtnPosition\"\n    @click.prevent=\"clickAction\"\n    :class=\"classList\"\n  >\n    <div\n      class=\"sticky-calculator-btn--icon is-image\"\n      v-if=\"!appStore.getStickySettings?.hideIcon\"\n    >\n      <template v-if=\"appStore.getStickySettings?.icon\">\n        <img :src=\"appStore.getStickySettings.icon\" alt=\"icon svg\" />\n      </template>\n      <template v-else>\n        <i class=\"ccb-icon-Calculators-filled\"></i>\n      </template>\n    </div>\n    <div class=\"sticky-calculator-btn--text\">\n      <span class=\"sticky-calculator-btn--text__title\">{{\n        getShortTitle\n      }}</span>\n      <span class=\"sticky-calculator-btn--text__description\" v-if=\"showTotal\"\n        >{{ translationsStore.getTranslations.total }}:\n        {{ getFormattedTotal }}</span\n      >\n    </div>\n    <div class=\"ccb-icon-arrow\">\n      <i class=\"ccb-icon-Down\"></i>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport $ from \"jquery\";\nimport { computed, onMounted } from \"vue\";\nimport { useAppStore } from \"@/sticky/app/providers/app.store.ts\";\nimport { useSticky } from \"@/sticky/actions/sticky/composable/useSticky.ts\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\n\nconst {\n  classList,\n  clickAction,\n  getFormattedTotal,\n  getShortTitle,\n  showTotal,\n  updateFormulas,\n  initListeners,\n} = useSticky();\n\nconst appStore = useAppStore();\nconst translationsStore = useTranslationsStore();\n\nconst getBtnPosition = computed(() => {\n  const positions: string[] =\n    appStore.getStickySettings?.btnPosition.split(\"_\") || [];\n  const vertical = positions[0] || \"\";\n  const horizontal = positions[1] || \"\";\n\n  let horizontalPosition = window.innerWidth > 1280 ? 40 : 20;\n  const $prev = $(`.ccb-calc-id-${appStore.getCalcId}`)?.prevAll();\n\n  $prev.each(function () {\n    const el = $(this)[0];\n    const pos = $(el).data(\"position\");\n    if (pos === appStore.getStickySettings?.btnPosition) {\n      const horizontal =\n        $(el).find(\".sticky-calculator-btn\")?.outerWidth() || 0;\n      horizontalPosition += horizontal > 0 ? horizontal + 20 : horizontal;\n    }\n  });\n\n  let verticalPosition = window.innerWidth > 1280 ? 40 : 20;\n  const bannerQuery = \".sticky-calculator-banner\";\n  if (\n    $(bannerQuery)?.length > 0 &&\n    !$(bannerQuery).hasClass(\"ccb-hide-button\")\n  ) {\n    const classListArr: string[] =\n      $(bannerQuery)?.attr(\"class\")?.split(/\\s+/) || [];\n\n    if (\n      classListArr.includes(vertical) &&\n      !$(bannerQuery)?.hasClass(\"ccb-hide-button\")\n    ) {\n      verticalPosition = 20;\n      let height = $(\".sticky-calculator-banner\").height() || 0;\n      let extraHeight = window.innerWidth > 600 ? 0 : 20;\n      verticalPosition = verticalPosition + height + extraHeight;\n    }\n  }\n\n  const $wpBanner = $(\"#wpadminbar\");\n  if ($wpBanner.length && vertical === \"top\") {\n    verticalPosition += ($wpBanner?.height() || 0) - 10;\n  }\n\n  const data = {\n    [vertical]: `${verticalPosition}px`,\n    [horizontal]: `${horizontalPosition}px`,\n  };\n\n  if (horizontal === \"center\") {\n    let gap = 0;\n    const $prevAll = $(`.ccb-calc-id-${appStore.getCalcId}`)\n      ?.prevAll()\n      ?.filter(function () {\n        return (\n          $(this).data(\"position\") === appStore.getStickySettings?.btnPosition\n        );\n      });\n\n    $prevAll.each(function () {\n      gap =\n        ($(this)?.find(\".sticky-calculator-btn\")?.outerWidth() || 0) + 20 || 0;\n    });\n\n    data.left = `calc(40% + ${gap}px)`;\n  }\n\n  if (vertical === \"center\") {\n    data.top = \"50%\";\n    data.transform = \"translateY(-50%)\";\n  }\n  return data;\n});\n\nonMounted(() => {\n  const action: string = appStore.getStickySettings?.oneClickAction || \"\";\n  let formulas = appStore.getStickySettings?.formulas || [];\n  if (\n    [\n      \"woo_checkout\",\n      \"woo_product_as_modal\",\n      \"woo_product_with_redirect\",\n    ].includes(action)\n  ) {\n    formulas = appStore.getWooCheckoutSettings?.formulas || [];\n  }\n\n  updateFormulas(formulas);\n  initListeners();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.sticky-calculator-btn {\n  position: fixed !important;\n  z-index: 111;\n  cursor: pointer !important;\n  transition: all 200ms ease-in-out;\n  background: var(--ccb-container-color) !important;\n  border-color: var(--ccb-container-border-color) !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  column-gap: 10px;\n  padding: 7px 14px;\n  border-radius: 8px;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.15);\n  font-size: 14px;\n\n  &--text {\n    display: flex;\n    flex-direction: column;\n    row-gap: 3px;\n  }\n\n  .ccb-icon-arrow {\n    font-size: 12px;\n    transform: rotate(180deg);\n  }\n\n  .sticky-calculator-btn--text__title {\n    color: var(--ccb-text-color) !important;\n    font-size: 15px;\n    font-weight: 500;\n    line-height: 1;\n  }\n\n  .sticky-calculator-btn--text__description {\n    color: var(--ccb-fields-description-color) !important;\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 1;\n  }\n\n  i {\n    color: var(--ccb-accent-color) !important;\n\n    &.ccb-icon-Calculators-filled {\n      font-size: 24px;\n    }\n  }\n\n  &.ccb-hide-button {\n    opacity: 0;\n    visibility: hidden;\n    z-index: -1111 !important;\n  }\n}\n</style>\n"],"names":["classList","clickAction","getFormattedTotal","getShortTitle","showTotal","updateFormulas","initListeners","useSticky","appStore","useAppStore","translationsStore","useTranslationsStore","getBtnPosition","computed","positions","_a","vertical","horizontal","horizontalPosition","_b","$","el","verticalPosition","bannerQuery","_c","_e","_d","_f","height","extraHeight","$wpBanner","data","gap","_h","_g","onMounted","action","formulas"],"mappings":"kqBAwCM,KAAA,CACJ,UAAAA,EACA,YAAAC,EACA,kBAAAC,EACA,cAAAC,EACA,UAAAC,EACA,eAAAC,EACA,cAAAC,GACEC,EAAU,EAERC,EAAWC,EAAY,EACvBC,EAAoBC,EAAqB,EAEzCC,EAAiBC,EAAS,IAAM,qBACpC,MAAMC,IACJC,EAAAP,EAAS,oBAAT,YAAAO,EAA4B,YAAY,MAAM,OAAQ,CAAC,EACnDC,EAAWF,EAAU,CAAC,GAAK,GAC3BG,EAAaH,EAAU,CAAC,GAAK,GAEnC,IAAII,EAAqB,OAAO,WAAa,KAAO,GAAK,KAC3CC,EAAAC,EAAE,gBAAgBZ,EAAS,SAAS,EAAE,IAAtC,YAAAW,EAAyC,WAEjD,KAAK,UAAY,SACrB,MAAME,EAAKD,EAAE,IAAI,EAAE,CAAC,EAEhB,GADQA,EAAEC,CAAE,EAAE,KAAK,UAAU,MACrBN,EAAAP,EAAS,oBAAT,YAAAO,EAA4B,aAAa,CAC7CE,MAAAA,IACJE,EAAAC,EAAEC,CAAE,EAAE,KAAK,wBAAwB,IAAnC,YAAAF,EAAsC,eAAgB,EAClCF,GAAAA,EAAa,EAAIA,EAAa,GAAKA,CAAA,CAC3D,CACD,EAED,IAAIK,EAAmB,OAAO,WAAa,KAAO,GAAK,GACvD,MAAMC,EAAc,4BAElB,KAAAC,EAAAJ,EAAEG,CAAW,IAAb,YAAAC,EAAgB,QAAS,GACzB,CAACJ,EAAEG,CAAW,EAAE,SAAS,iBAAiB,MAGxCE,GAAAC,EAAAN,EAAEG,CAAW,IAAb,YAAAG,EAAgB,KAAK,WAArB,YAAAD,EAA+B,MAAM,SAAU,CAAC,GAGnC,SAAST,CAAQ,GAC9B,GAACW,EAAAP,EAAEG,CAAW,IAAb,MAAAI,EAAgB,SAAS,oBAC1B,CACmBL,EAAA,GACnB,IAAIM,EAASR,EAAE,2BAA2B,EAAE,OAAY,GAAA,EACpDS,EAAc,OAAO,WAAa,IAAM,EAAI,GAChDP,EAAmBA,EAAmBM,EAASC,CAAA,CAI7C,MAAAC,EAAYV,EAAE,aAAa,EAC7BU,EAAU,QAAUd,IAAa,QACdM,KAAAQ,GAAA,YAAAA,EAAW,WAAY,GAAK,IAGnD,MAAMC,EAAO,CACX,CAACf,CAAQ,EAAG,GAAGM,CAAgB,KAC/B,CAACL,CAAU,EAAG,GAAGC,CAAkB,IACrC,EAEA,GAAID,IAAe,SAAU,CAC3B,IAAIe,EAAM,IACOC,GAAAC,EAAAd,EAAE,gBAAgBZ,EAAS,SAAS,EAAE,IAAtC,YAAA0B,EACb,YADa,YAAAD,EAEb,OAAO,UAAY,OACnB,OACEb,EAAE,IAAI,EAAE,KAAK,UAAU,MAAML,EAAAP,EAAS,oBAAT,YAAAO,EAA4B,YAAA,IAItD,KAAK,UAAY,SAErBiB,KAAAb,GAAAJ,EAAAK,EAAE,IAAI,IAAN,YAAAL,EAAS,KAAK,4BAAd,YAAAI,EAAyC,eAAgB,GAAK,IAAM,CAAA,CACxE,EAEIY,EAAA,KAAO,cAAcC,CAAG,KAAA,CAG/B,OAAIhB,IAAa,WACfe,EAAK,IAAM,MACXA,EAAK,UAAY,oBAEZA,CAAA,CACR,EAED,OAAAI,EAAU,IAAM,WACR,MAAAC,IAAiBrB,EAAAP,EAAS,oBAAT,YAAAO,EAA4B,iBAAkB,GACrE,IAAIsB,IAAWlB,EAAAX,EAAS,oBAAT,YAAAW,EAA4B,WAAY,CAAC,EAEtD,CACE,eACA,uBACA,2BAAA,EACA,SAASiB,CAAM,IAENC,IAAAb,EAAAhB,EAAS,yBAAT,YAAAgB,EAAiC,WAAY,CAAC,GAG3DnB,EAAegC,CAAQ,EACT/B,EAAA,CAAA,CACf"}
{"version":3,"mappings":"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","names":["props","__props","field","toRefs","currencyInstance","useCurrency","fieldStore","useFieldsStore","appearanceStore","useAppearanceStore","singleFieldMixins","useSingleField","callbackStore","useCallbackStore","conditionsStore","useConditionsStore","pageBreakerStore","usePageBreakerStore","values","ref","originalValue","requiredWarningText","computed","_a","useSettingsStore","currentComponents","style","_b","defineAsyncComponent","__vitePreload","updateValue","inputValues","alias","fromCondition","value","left","right","getSignValue","getFormatValue","isRequired","additionalClasses","num","rounded","onMounted"],"ignoreList":[],"sources":["../../src/widget/features/calculator-fields/components/MultiRange/MultiRange.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-field ccb-multi-range-field\"\n    :class=\"{\n      required: isRequired,\n      'ccb-field-disabled': field.disabled,\n      [additionalClasses]: true,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <RequiredHint v-if=\"isRequired\" :text=\"requiredWarningText\" />\n      <div class=\"ccb-field__title\">\n        <span\n          class=\"ccb-field__title--title-box\"\n          style=\"display: flex; width: 100%; justify-content: space-between\"\n        >\n          <span\n            >{{ field.label\n            }}<span v-if=\"field.required\" class=\"ccb-field-required-mark\"\n              >*</span\n            ></span\n          >\n          <span> {{ getSignValue }} </span>\n          <ProBadge />\n        </span>\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <div class=\"ccb-field-input__wrapper\">\n      <component\n        :is=\"currentComponents\"\n        :field=\"field\"\n        @update:modelValue=\"updateValue\"\n        v-model=\"values\"\n      />\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'after'\"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, ref, onMounted, defineAsyncComponent } from \"vue\";\nimport { IMultiRangeField } from \"@/widget/shared/types/fields\";\nimport { useCurrency } from \"@/widget/actions/fields/composable/useCurrency.ts\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useSingleField } from \"@/widget/actions/fields/composable/useSingleField.ts\";\nimport { useCallbackStore } from \"@/widget/app/providers/stores/callbackStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport ProBadge from \"@/widget/shared/ui/components/Pro-badge/ProBadge.vue\";\nimport { usePageBreakerStore } from \"@/widget/app/providers/stores/pageBreakerStore.ts\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\n\ntype Props = {\n  field: IMultiRangeField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst currencyInstance = useCurrency();\nconst fieldStore = useFieldsStore();\nconst appearanceStore = useAppearanceStore();\nconst singleFieldMixins = useSingleField();\nconst callbackStore = useCallbackStore();\nconst conditionsStore = useConditionsStore();\nconst pageBreakerStore = usePageBreakerStore();\n\nconst values = ref<number[]>(field.value.values || [0, 50]);\nconst originalValue = ref<number>(0);\n\nconst requiredWarningText = computed(() => {\n  const settingStore = useSettingsStore();\n  return settingStore.getWarningTexts?.requiredMsg || \"\";\n});\n\nconst currentComponents = computed(() => {\n  const style = field.value?.styles?.style || \"default\";\n  if (style === \"default\") {\n    return defineAsyncComponent(() => import(\"./styles/Default.vue\"));\n  } else if (style === \"small\") {\n    return defineAsyncComponent(() => import(\"./styles/Small.vue\"));\n  } else if (style === \"flat-minimal\") {\n    return defineAsyncComponent(() => import(\"./styles/Flat.vue\"));\n  } else if (style === \"modern\") {\n    return defineAsyncComponent(() => import(\"./styles/Modern.vue\"));\n  } else if (style === \"input\") {\n    return defineAsyncComponent(() => import(\"./styles/Input.vue\"));\n  } else if (style === \"multi-point\") {\n    return defineAsyncComponent(() => import(\"./styles/MultiPoint.vue\"));\n  }\n\n  return \"\";\n});\n\nconst updateValue = (\n  inputValues: number[],\n  alias?: string,\n  fromCondition?: boolean,\n) => {\n  if (alias && alias !== field.value.alias) {\n    return;\n  }\n\n  let value = 0;\n  const [left, right] = inputValues;\n\n  values.value = [left, right];\n\n  if (right - left > 0) {\n    value = right - left;\n  }\n\n  originalValue.value = value;\n\n  if (field.value.multiply) {\n    value = value * field.value.unit;\n  }\n\n  value = field.value.round ? Math.round(value) : value;\n\n  field.value.value = value || 0;\n  field.value.values = inputValues;\n\n  field.value.displayValue = singleFieldMixins.getCommonFieldDisplayView(\n    field.value,\n    (right - left).toString(),\n  );\n  fieldStore.updateField(field.value.alias, field.value, fromCondition);\n  conditionsStore.applyConditionForField(field.value.alias);\n\n  if (\n    fieldStore.getPageBreakEnabled &&\n    fieldStore.getActivePage.action === \"not_skip\"\n  ) {\n    pageBreakerStore.checkPageFieldsConditions();\n  }\n};\n\nconst getSignValue = computed(() => {\n  if (field.value.multipliedTotal) {\n    return field.value.useCurrency || field.value.fieldCurrency\n      ? currencyInstance.formatCurrency(\n          field.value.value,\n          currencyInstance.getCurrencyOptions(field.value),\n        )\n      : singleFieldMixins.parseCommonFieldSign(\n          field.value.value.toString(),\n          field.value.sign,\n          field.value.unitPosition,\n        );\n  }\n\n  if (field.value.useCurrency || field.value.fieldCurrency) {\n    if (field.value.unitPosition === \"left\") {\n      return `${field.value.sign} ${originalValue.value}`;\n    }\n\n    return `${originalValue.value} ${field.value.sign}`;\n  }\n\n  return singleFieldMixins.parseCommonFieldSign(\n    field.value.round\n      ? originalValue.value.toString()\n      : getFormatValue(originalValue.value),\n    field.value.sign,\n    field.value.unitPosition,\n  );\n});\n\nconst isRequired = computed(() => {\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst additionalClasses = computed(() => {\n  return field.value?.additionalStyles || \"\";\n});\n\nconst getFormatValue = (num: number): string => {\n  const rounded = num.toFixed(2);\n  return parseFloat(rounded).toString();\n};\n\ncallbackStore.add(\"updateMultiRange\", updateValue);\n\nonMounted(() => {\n  const [left, right] = field.value.values;\n  originalValue.value = right - left;\n});\n</script>\n\n<style lang=\"scss\">\n.ccb-multi-range-field {\n  display: flex;\n  flex-direction: column;\n\n  .slider-base {\n    background-color: var(--ccb-fields-border-color) !important;\n  }\n\n  .slider-tooltip,\n  .slider-handle,\n  .slider-connect {\n    background-color: var(--ccb-accent-color) !important;\n  }\n\n  .slider-connects {\n    cursor: pointer;\n  }\n\n  .slider-tooltip {\n    color: var(--ccb-fields-color) !important;\n    border-color: var(--ccb-accent-color) !important;\n    @media (max-width: 1024px) {\n      display: block !important;\n    }\n  }\n\n  .slider-handle:focus {\n    box-shadow: none !important;\n  }\n}\n</style>\n"],"file":"assets/index-B9FLy1g8.js"}
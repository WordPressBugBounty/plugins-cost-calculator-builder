import{c as we,a as ke,l as Ve,e as Se}from"./widget-DTyF7X6W.js";import{Q as Te}from"./browser-CdqJbDhe.js";import{a as De,C as Oe,k as Ae,b as p,m as o,g as l,p as r,q as f,N as A,D as m,F as V,H as $,L as J}from"./convert-case-to-camel-case.utils-DRsbC-qG.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./translationsStore-C34buciO.js";const Be={class:"pdf-total-summary",style:{padding:"20px 30px"}},Ce={class:"pdf-total-summary--header-name",style:{width:"46%"}},ze={class:"pdf-total-summary--header-unit",style:{width:"34%"}},Ne={class:"pdf-total-summary--header-total",style:{width:"20%","text-align":"right"}},$e={class:"pdf-total-summary--body"},Ee={class:"pdf-total-summary--body-items"},Le={class:"pdf-total-summary--body-item-name",style:{width:"46%"}},Pe={key:0,class:"pdf-total-summary--body-item-name-extra"},Fe={class:"ccb-pdf-extra-wrap-label"},Me={class:"ccb-pdf-extra-wrap-value",style:{"white-space":"nowrap"}},Qe={key:0,class:"pdf-total-summary--body-item-name-extra"},Re={key:0,class:"ccb-pdf-extra-wrap",style:{"padding-left":"10px"}},qe={key:0,class:"ccb-pdf-extra-wrap-label"},Ge={key:0,class:"pdf-total-summary--body-item-name-extra"},Ie={class:"ccb-pdf-extra-wrap",style:{"padding-left":"10px"}},He={class:"ccb-pdf-extra-wrap-label"},Ue={key:0,class:"pdf-total-summary--body-item-name-extra"},We={key:0,class:"ccb-pdf-extra-wrap",style:{"padding-left":"10px",display:"flex","flex-direction":"column",gap:"5px"}},je={class:"ccb-pdf-extra-wrap-label"},Je={class:"pdf-total-summ ary--body-item-total",style:{width:"46%","text-align":"right","font-weight":"700"}},Ke={key:0,style:{"list-style":"none"}},Xe={class:"pdf-total-summary--body-item-box pdf-keep"},Ye={key:0,class:"pdf-order-block-qr-code"},Ze=["src"],et={class:"pdf-order-block-payment-info pdf-keep"},tt={class:"pdf-order-block-payment-info--totals"},st={key:0,style:{display:"flex","flex-direction":"column"}},at={style:{display:"flex","justify-content":"space-between"}},nt={style:{display:"flex","column-gap":"3px"}},ot={class:"ccb-discount-title",style:{"font-weight":"700"}},lt={style:{"padding-top":"15px"}},rt={key:1,style:{display:"flex","column-gap":"4px","align-items":"center"}},it={key:0,class:"ccb-discount-off"},dt={key:2,style:{display:"flex","flex-direction":"column","align-items":"flex-end"}},ut={style:{"padding-top":"15px"}},ct={key:0,style:{display:"flex"}},pt={style:{"font-weight":"500 !important","text-decoration":"line-through","margin-right":"4px",display:"inline-block","font-size":"80%"}},yt={key:1},mt={class:"pdf-order-block-payment-info--payment-item",style:{"box-sizing":"border-box"}},vt={key:0},gt={key:1},_t={key:0,class:"pdf-order-block-promocodes",style:{opacity:"0.7",padding:"0 10px"}},ht={class:"ccb-payment-info-images"},ft={class:"ccb-payment-info-image"},bt=["src"],xt={class:"ccb-payment-info-image"},wt=["src"],At=De({__name:"OrderBlock",props:{pdf:{},item:{},content:{}},setup(K){const P=we(),X=ke(),F=Ve(),Y=K,{item:i,content:M}=Oe(Y),Q=Ae(""),Z=s=>{Te.toDataURL(s).then(a=>{Q.value=a})},ee=p(()=>{var t,u;let s=0;(t=C.value)!=null&&t.totals?G((u=C.value)==null?void 0:u.totals).filter(c=>c).forEach(c=>{s+=(c==null?void 0:c.value)||0}):P.getTotalsList.filter(d=>d).forEach(d=>{s+=(d==null?void 0:d.value)||0});const a=F.getCurrencyOptions(),e=a.currency,n=a.currencyPosition;return F.parseCurrencyPosition(s.toString(),e,n||"left")}),te=p(()=>{var a,e,n,t,u,d,c,_,h,v,g,b,x,w;let s={flex:1};if((e=(a=i.value)==null?void 0:a.tabs)!=null&&e.design){const y=i.value.tabs.design;(u=(t=(n=y.data)==null?void 0:n.tableBackground)==null?void 0:t.data)!=null&&u.status&&(s={flex:1,backgroundColor:(c=(d=y.data)==null?void 0:d.tableBackground)==null?void 0:c.value}),(v=(h=(_=y.data)==null?void 0:_.tableText)==null?void 0:h.data)!=null&&v.status&&(s.color=(b=(g=y.data)==null?void 0:g.tableText)==null?void 0:b.value),(w=(x=y.data)==null?void 0:x.fontSize)!=null&&w.value&&(s.fontSize=`${y.data.fontSize.value}px`)}return s}),se=p(()=>s=>Array.from(s.values())),ae=p(()=>{var a,e,n,t,u,d,c,_,h,v,g,b,x,w,y,k,S,T,D,O,B,z,N,L,j;let s={padding:0,height:"max-content"};if((u=(t=(n=(e=(a=i.value)==null?void 0:a.tabs)==null?void 0:e.lines)==null?void 0:n.data)==null?void 0:t.showBorder)!=null&&u.value){const he=(v=(h=(_=(c=(d=i.value)==null?void 0:d.tabs)==null?void 0:c.lines)==null?void 0:_.data)==null?void 0:h.borderBorderSize)==null?void 0:v.value,fe=(y=(w=(x=(b=(g=i.value)==null?void 0:g.tabs)==null?void 0:b.lines)==null?void 0:x.data)==null?void 0:w.borderColor)==null?void 0:y.value,be=((O=(D=(T=(S=(k=i.value)==null?void 0:k.tabs)==null?void 0:S.lines)==null?void 0:T.data)==null?void 0:D.borderStyle)==null?void 0:O.value)||"solid",xe=(j=(L=(N=(z=(B=i.value)==null?void 0:B.tabs)==null?void 0:z.lines)==null?void 0:N.data)==null?void 0:L.angleBorderSize)==null?void 0:j.value;s.border=`${he}px ${be} ${fe}`,s.borderRadius=`${xe}px`}return s}),R=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.images)==null?void 0:e.data)==null?void 0:n.signatureImage)==null?void 0:t.value)||""}),ne=p(()=>{var s,a,e,n,t;return{width:`${((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.images)==null?void 0:e.data)==null?void 0:n.signatureSize)==null?void 0:t.value)||0}px`}}),oe=p(()=>{var s,a,e,n,t;return{width:`${((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.images)==null?void 0:e.data)==null?void 0:n.stampSize)==null?void 0:t.value)||0}px`}}),q=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.images)==null?void 0:e.data)==null?void 0:n.stampImage)==null?void 0:t.value)||""}),le=p(()=>{var a,e,n,t,u,d,c,_,h,v,g,b,x,w;let s={};if((e=(a=i.value)==null?void 0:a.tabs)!=null&&e.design){const y=i.value.tabs.design;(u=(t=(n=y.data)==null?void 0:n.headingBackground)==null?void 0:t.data)!=null&&u.status&&(s={backgroundColor:(c=(d=y.data)==null?void 0:d.headingBackground)==null?void 0:c.value}),(v=(h=(_=y.data)==null?void 0:_.headingText)==null?void 0:h.data)!=null&&v.status&&(s.color=(b=(g=y.data)==null?void 0:g.headingText)==null?void 0:b.value),(w=(x=y.data)==null?void 0:x.titleFontSize)!=null&&w.value&&(s.fontSize=`${y.data.titleFontSize.value}px`)}return s}),E=p(()=>{var s;return((s=M.value)==null?void 0:s.promocodes)||[]}),re=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.showHeading)==null?void 0:t.value)||!1}),ie=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.headingName)==null?void 0:t.value)||""}),de=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.headingUnit)==null?void 0:t.value)||""}),ue=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.headingValue)==null?void 0:t.value)||""}),C=p(()=>Se().getOrderData),G=s=>s.map(a=>({...a,value:a.total,originalDisplayView:a.converted,displayValue:a.converted})),ce=s=>s.map(a=>{const{title:e,value:n,groupTitle:t,alias:u,option_unit:d,groupElements:c,..._}=a,h=g=>g.replace(/_field_id_\d+$/,"");let v=c;return Array.isArray(c)&&(v=c.map(g=>{const{title:b,value:x,option_unit:w,...y}=g,k={...y,displayValue:x,label:b,extraDisplayView:w};return new Map([[k.alias,k]])})),{..._,displayValue:n,label:e||t,extraDisplayView:d,fieldName:h(u),...v?{groupElements:v}:{}}}),pe=p(()=>{var e,n;let s=P.getSummaryList.filter(t=>!t.hidden);(e=C.value)!=null&&e.orderDetails&&(s=ce(C.value.orderDetails));let a=[];return s.forEach(t=>{"groupElements"in t&&Array.isArray(t.groupElements)?t.groupElements.forEach(u=>{a=[...a,...se.value(u)]}):a.push(t)}),(n=X.general)!=null&&n.hideEmptyForOrdersPdfEmails||(a=a.filter(t=>"selectedOption"in t&&Array.isArray(t.selectedOption)?t.selectedOption.length>0:"selectedOption"in t&&!Array.isArray(t.selectedOption)&&t.selectedOption?t.selectedOption.optionValue:["validated_form","text"].includes(t.fieldName)||t.fieldName==="geolocation"&&"geoType"in t&&t.geoType==="multiplyLocation"||t.fieldName==="datePicker"&&t.displayValue.length>0||t.fieldName==="timePicker"&&t.displayValue.length>0?t.displayValue:t.value)),a=a.filter(t=>t.addToSummary),a}),ye=p(()=>{var a,e,n,t,u,d,c,_,h,v,g,b,x,w,y,k,S,T,D,O;let s={};if((u=(t=(n=(e=(a=i.value)==null?void 0:a.tabs)==null?void 0:e.lines)==null?void 0:n.data)==null?void 0:t.showLines)!=null&&u.value){const B=(v=(h=(_=(c=(d=i.value)==null?void 0:d.tabs)==null?void 0:c.lines)==null?void 0:_.data)==null?void 0:h.lineBorderSize)==null?void 0:v.value,z=(y=(w=(x=(b=(g=i.value)==null?void 0:g.tabs)==null?void 0:b.lines)==null?void 0:x.data)==null?void 0:w.lineBorderStyle)==null?void 0:y.value,N=(O=(D=(T=(S=(k=i.value)==null?void 0:k.tabs)==null?void 0:S.lines)==null?void 0:T.data)==null?void 0:D.lineBorderColor)==null?void 0:O.value;s={borderBottom:`${B}px ${z} ${N}`}}return s}),me=p(()=>{var a,e,n,t,u,d,c,_,h,v;const s=((u=(t=(n=(e=(a=i.value)==null?void 0:a.tabs)==null?void 0:e.content)==null?void 0:n.data)==null?void 0:t.showQrCode)==null?void 0:u.value)||!1;if(s){const g=((v=(h=(_=(c=(d=i.value)==null?void 0:d.tabs)==null?void 0:c.content)==null?void 0:_.data)==null?void 0:h.qrCodeLink)==null?void 0:v.value)||"https://google.com";Z(g)}return s}),I=p(()=>{var a,e,n;let s=P.getTotalsList;if((a=C.value)!=null&&a.totals){const t=(e=C.value)==null?void 0:e.totals;s=G(t)}return(n=s==null?void 0:s.filter(t=>t))==null?void 0:n.filter(t=>!(t!=null&&t.hidden))}),ve=p(()=>s=>s.discount?`${s.discount.extraView}`:null),ge=p(()=>s=>s.discount&&s.discount.extraView||null),H=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.showPaymentMethod)==null?void 0:t.value)||!1}),U=p(()=>{var s,a,e,n,t;return((t=(n=(e=(a=(s=i.value)==null?void 0:s.tabs)==null?void 0:a.content)==null?void 0:e.data)==null?void 0:n.showGrandTotal)==null?void 0:t.value)||!1}),_e=p(()=>{var a,e,n,t,u,d,c,_,h,v,g,b,x,w,y,k,S,T,D,O,B;let s={};if(!H.value&&!U.value||!((a=I.value)!=null&&a.length))return s;if((d=(u=(t=(n=(e=i.value)==null?void 0:e.tabs)==null?void 0:n.lines)==null?void 0:t.data)==null?void 0:u.showLines)!=null&&d.value){const z=(g=(v=(h=(_=(c=i.value)==null?void 0:c.tabs)==null?void 0:_.lines)==null?void 0:h.data)==null?void 0:v.lineBorderSize)==null?void 0:g.value,N=(k=(y=(w=(x=(b=i.value)==null?void 0:b.tabs)==null?void 0:x.lines)==null?void 0:w.data)==null?void 0:y.lineBorderStyle)==null?void 0:k.value,L=(B=(O=(D=(T=(S=i.value)==null?void 0:S.tabs)==null?void 0:T.lines)==null?void 0:D.data)==null?void 0:O.lineBorderColor)==null?void 0:B.value;s={borderTop:`${z}px ${N} ${L}`}}return s}),W=p(()=>{var s;return((s=M.value)==null?void 0:s.paymentMethodType)||""});return(s,a)=>(l(),o("div",{class:"ccb-pdf-layout__item order_block",style:A(te.value)},[r("div",{class:"ccb-pdf-layout__item--wrapper order_block","data-id":"order_block",style:A(ae.value)},[r("div",Be,[re.value?(l(),o("div",{key:0,class:"pdf-total-summary--header",style:A(le.value)},[r("span",Ce,m(ie.value),1),r("span",ze,m(de.value),1),r("span",Ne,m(ue.value),1)],4)):f("",!0),r("div",$e,[r("div",Ee,[(l(!0),o(V,null,$(pe.value,e=>(l(),o("div",{class:"pdf-total-summary--body-item pdf-keep",key:e.label,style:A(ye.value)},[r("span",Le,[r("span",{class:"pdf-total-summary--body-item-name-title",style:A({"margin-left":e.repeaterAlias!==void 0&&!e.repeaterAlias.includes("group")?"10px":"0px"})},m(e.label),5),["checkbox","toggle","checkbox_with_img"].includes(e.fieldName)?(l(),o(V,{key:0},["selectedOption"in e&&Array.isArray(e.selectedOption)?(l(),o("span",Pe,["selectedOption"in e&&Array.isArray(e.selectedOption)?(l(!0),o(V,{key:0},$(e.selectedOption,n=>(l(),o("span",{class:"ccb-pdf-extra-wrap",key:n.optionText,style:{"padding-left":"10px"}},[e.summaryView==="show_value"?(l(),o(V,{key:0},[r("span",Fe,m(n.optionText),1),r("span",Me,m(n.optionConverted),1)],64)):f("",!0)]))),128)):f("",!0)])):f("",!0)],64)):f("",!0),["dropDown","dropDown_with_img","radio","radio_with_img"].includes(e.fieldName)?(l(),o(V,{key:1},["selectedOption"in e&&e.selectedOption?(l(),o("span",Qe,[e.selectedOption?(l(),o("span",Re,[e.summaryView==="show_value"&&"optionText"in e.selectedOption&&"optionConverted"in e.selectedOption?(l(),o("span",qe,m(e.selectedOption.optionText),1)):f("",!0)])):f("",!0)])):f("",!0)],64)):["file_upload","range","multi_range","quantity"].includes(e.fieldName)?(l(),o(V,{key:2},["extraDisplayView"in e&&e.extraDisplayView?(l(),o("span",Ge,[r("span",Ie,[r("span",He,m(e.extraDisplayView),1)])])):f("",!0)],64)):["datePicker","geolocation"].includes(e.fieldName)?(l(),o(V,{key:3},["extraDisplayView"in e&&Array.isArray(e.extraDisplayView)?(l(),o("span",Ue,["extraDisplayView"in e&&Array.isArray(e.extraDisplayView)?(l(),o("span",We,[(l(!0),o(V,null,$(e.extraDisplayView,n=>(l(),o("span",{key:n},[r("span",je,m(n),1)]))),128))])):f("",!0)])):f("",!0)],64)):f("",!0)]),r("span",Je,[Array.isArray(e.displayValue)?(l(),o("ul",Ke,[(l(!0),o(V,null,$(e.displayValue,n=>(l(),o("li",{key:n},m(n),1))),128))])):(l(),o(V,{key:1},[J(m(e.displayValue),1)],64))])],4))),128)),r("div",Xe,[me.value?(l(),o("div",Ye,[r("img",{src:Q.value,alt:"QR Code"},null,8,Ze)])):f("",!0),r("div",et,[r("div",tt,[(l(!0),o(V,null,$(I.value,e=>{var n,t,u,d;return l(),o("span",{key:e.label,class:"pdf-order-block-payment-info--totals-item pdf-keep",style:{"box-sizing":"border-box"}},[e.hasDiscount&&((n=e==null?void 0:e.discount)==null?void 0:n.viewType)==="show_with_title"?(l(),o("span",st,[r("span",at,[r("span",nt,[a[0]||(a[0]=r("span",{class:"ccb-discounts-inner-label",style:{"font-weight":"700"}},"Discount: ",-1)),r("span",ot,m(e.discount.discountName),1)])]),r("span",lt,m(e.label),1)])):(l(),o("span",rt,[J(m(e.label)+" ",1),e.hasDiscount&&((t=e==null?void 0:e.discount)==null?void 0:t.viewType)!=="show_with_title"?(l(),o("span",it,m(ve.value(e)),1)):f("",!0)])),e.hasDiscount&&((u=e==null?void 0:e.discount)==null?void 0:u.viewType)==="show_with_title"?(l(),o("span",dt,[r("span",null,m(ge.value(e)),1),r("span",ut,m(e.displayValue),1)])):(l(),o(V,{key:3},[e.hasDiscount&&((d=e==null?void 0:e.discount)==null?void 0:d.viewType)==="show_without_title"?(l(),o("span",ct,[r("span",pt,m(e.originalDisplayView),1),r("span",null,m(e.displayValue),1)])):(l(),o("span",yt,m(e.displayValue),1))],64))])}),128))]),r("div",{class:"pdf-order-block-payment-info--payment",style:A(_e.value)},[r("span",mt,[H.value&&W.value?(l(),o("span",vt," Payment method: "+m(W.value),1)):f("",!0),U.value?(l(),o("span",gt,m(ee.value),1)):f("",!0)])],4),E.value&&E.value.length>0?(l(),o("div",_t,[a[1]||(a[1]=r("span",null,"Applied promocodes: ",-1)),r("span",null,[(l(!0),o(V,null,$(E.value,(e,n)=>(l(),o("span",{key:n},m(e)+m(n<E.value.length-1?", ":""),1))),128))])])):f("",!0)])]),r("div",ht,[r("div",ft,[q.value?(l(),o("img",{key:0,src:q.value,alt:"stamp-image",style:A(oe.value)},null,12,bt)):f("",!0)]),r("div",xt,[R.value?(l(),o("img",{key:0,src:R.value,alt:"signature-image",style:A(ne.value)},null,12,wt)):f("",!0)])])])])])],4)],4))}});export{At as default};
//# sourceMappingURL=OrderBlock-CAMmhy1G.js.map

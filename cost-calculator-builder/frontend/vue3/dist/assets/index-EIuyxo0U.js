const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Buttons-CBrZGue6.css"])))=>i.map(i=>d[i]);
import{u as le,_ as Q}from"./translationsStore-Crbl8s4V.js";import{m as oe,u as ue,f as ce,n as de,j as pe,a as E,o as fe,p as ge}from"./widget-CZM7cD3F.js";import{_ as L}from"./RequiredHint.vue_vue_type_style_index_0_lang-DWClyS2l.js";import{d as ve,B as me,e as T,f as F,g as O,k as Se,c as p,o,l as I,m as f,h as N,u as r,L as u,j as _e,E as ye}from"./runtime-dom.esm-bundler-DVhL8Vyv.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const z=g=>{if(g===void 0||(g==null?void 0:g.length)<0)return!1;const M=/^[-+]?[0-9]+\.[0-9]+$/;return!!g.toString().match(M)},Ce={class:"ccb-field__label"},be={key:0,class:"ccb-required-tooltip"},xe={class:"ccb-field__title"},ke={key:0,class:"ccb-field-required-mark"},Fe={key:0,class:"ccb-field__descriptions ccb-before"},Ve={key:0,class:"ccb-field__description"},Te={key:1,class:"ccb-field__description"},Me={key:1,class:"ccb-field__descriptions ccb-after"},qe={key:0,class:"ccb-field__description"},Ae={key:1,class:"ccb-field__description"},Be=ve({__name:"Quantity",props:{field:{}},setup(g){const M=g,{field:e}=me(M),q=T("required"),K=oe(),D=ge(),P=ue(),V=ce(),U=de(),G=fe(),v=le(),H=pe(),n=T(e.value.originalValue.toString()),A=T(!1),J=T(0),W=F(()=>{if(A.value)return n.value;n.value=ie(n.value).toString();let t=e.value.round?Math.round(+n.value):+n.value;return R(t.toString())}),X=F(()=>{if(e.value.styles.style==="default")return O(()=>Q(()=>import("./Default-B555xwDg.js"),[],import.meta.url));if(e.value.styles.style==="buttons")return O(()=>Q(()=>import("./Buttons-5q21KmGq.js"),__vite__mapDeps([0]),import.meta.url))}),B=(t=!1,a,i)=>{i&&i!==e.value.alias||(n.value=a.toString(),ae(),t&&typeof a<"u"&&(e.value.value=a,e.value.originalValue=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=G.getCommonFieldDisplayView(e.value,n.value),V.updateField(e.value.alias,e.value),U.applyConditionForField(e.value.alias),V.getPageBreakEnabled&&V.getActivePage.action==="not_skip"&&H.checkPageFieldsConditions())},Y=t=>{const a=t.target;let i=e.value.round?Math.round(parseFloat(a.value)):parseFloat(a.value);if(isNaN(i))return;let l=D.parseCurrency(i.toString(),D.getCurrencyOptions(e.value));B(!0,l)},Z=t=>{const a=t.target;A.value=!0,n.value=a.value},ee=()=>{A.value=!1},te=()=>{n.value=R(n.value)},ae=()=>{const t=Number(n.value)<+e.value.min,a=Number(n.value)>+e.value.max;t||a?q.value="value_range":q.value="required"},re=F(()=>{let t=0;if(z(e.value.defaultValue.toString())||z(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,i=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,i)}return t}),R=t=>{var m,d,_,y,h,C,b,x,k;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings)return parseFloat(t).toFixed(re.value);(isNaN(Number(t))||t.length===0)&&(t="0");let a=parseFloat(t);const i=E();let l=((m=i.getCurrencySettings)==null?void 0:m.numAfterInteger)||0,c=((d=i.getCurrencySettings)==null?void 0:d.decimalSeparator)||".",s=((_=i.getCurrencySettings)==null?void 0:_.thousandsSeparator)||",";if(e.value.fieldCurrency&&(l=((h=(y=e.value)==null?void 0:y.fieldCurrencySettings)==null?void 0:h.numAfterInteger)||0,c=((b=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:b.decimalSeparator)||".",s=((k=(x=e.value)==null?void 0:x.fieldCurrencySettings)==null?void 0:k.thousandsSeparator)||","),l>0){a=parseFloat(a.toFixed(parseInt(l.toString()))),t=a.toFixed(l),t=t.toString().replace(".",c);const S=t.split(c);S[0]=S[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),t=S.join(c)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,s);return t},ie=t=>{var _,y,h,C,b,x,k,S,j;const a=E();let i=((_=a.getCurrencySettings)==null?void 0:_.numAfterInteger)||0,l=((y=a.getCurrencySettings)==null?void 0:y.decimalSeparator)||".",c=((h=a.getCurrencySettings)==null?void 0:h.thousandsSeparator)||",";e.value.fieldCurrency&&(i=((b=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:b.numAfterInteger)||0,l=((k=(x=e.value)==null?void 0:x.fieldCurrencySettings)==null?void 0:k.decimalSeparator)||".",c=((j=(S=e.value)==null?void 0:S.fieldCurrencySettings)==null?void 0:j.thousandsSeparator)||",");let s;t.includes(".")&&t.includes(",")?s=t.split(l):t.includes(",")?s=t.split(","):t.includes(".")?s=t.split("."):s=[t],s[0]=s[0].split(c).join("");let m=s.join("."),d=parseFloat(m)||0;if(i!==void 0){let w=Math.pow(10,i);d=Math.round(d*w)/w}return d},ne=t=>{var s,m,d;let i=((s=E().getCurrencySettings)==null?void 0:s.decimalSeparator)||".";e.value.fieldCurrency&&(i=((d=(m=e.value)==null?void 0:m.fieldCurrencySettings)==null?void 0:d.decimalSeparator)||".");let l=t.keyCode?t.keyCode:t.which,c=46;i===","&&(c=44),(l<48||l>57)&&l!==c&&t.preventDefault()},$=F(()=>{const t=Number(n.value)<e.value.min,a=Number(n.value)>e.value.max;return t||a?!0:V.checkFieldRequired(e.value)}),se=F(()=>`
    ${v.getTranslations.valueMustBeBetween} ${e.value.min} ${v.getTranslations.and} ${e.value.max}
  `);return K.add("updateQuantity",B),Se(()=>{n.value=e.value.originalValue.toString(),B(!1,e.value.originalValue)}),(t,a)=>(o(),p("div",{class:ye(["ccb-field ccb-field-quantity",{required:$.value,"ccb-field-disabled":r(e).disabled,[r(e).additionalStyles||""]:!!r(e).additionalStyles}])},[I("div",Ce,[$.value?(o(),p("div",be,[q.value==="value_range"?(o(),N(L,{key:0,field:r(e),text:se.value},null,8,["field","text"])):(o(),N(L,{key:1,field:r(e),text:r(v).getTranslations.requiredField},null,8,["field","text"]))])):f("",!0),I("div",xe,[I("span",null,u(r(e).label),1),r(e).required?(o(),p("span",ke,"*")):f("",!0)])]),r(P).getAppearanceDescriptionPosition==="before"?(o(),p("div",Fe,[r(e).hideMinMax?f("",!0):(o(),p("div",Ve,u(r(v).getTranslations.min)+": "+u(r(e).min)+" - "+u(r(v).getTranslations.max)+": "+u(r(e).max),1)),r(e).description?(o(),p("div",Te,u(r(e).description),1)):f("",!0)])):f("",!0),(o(),N(_e(X.value),{field:r(e),value:W.value,onInput:Y,onFocus:Z,onFocusout:te,onBlur:ee,onKeypress:ne,key:J.value},null,40,["field","value"])),r(P).getAppearanceDescriptionPosition==="after"?(o(),p("div",Me,[r(e).hideMinMax?f("",!0):(o(),p("div",qe,u(r(v).getTranslations.min)+": "+u(r(e).min)+" - "+u(r(v).getTranslations.max)+": "+u(r(e).max),1)),r(e).description?(o(),p("div",Ae,u(r(e).description),1)):f("",!0)])):f("",!0)],2))}}),$e=he(Be,[["__scopeId","data-v-533720fe"]]);export{$e as default};
//# sourceMappingURL=index-EIuyxo0U.js.map

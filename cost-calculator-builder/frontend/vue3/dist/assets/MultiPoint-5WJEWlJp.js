import{m as S}from"./slider-B_iZvJic.js";import{d as $,e as M,B as h,f as n,z as w,k as F,a3 as z,c as r,o as m,l as o,a as D,L as N,E as f,u as i,m as y,M as E,I as U,P as q}from"./runtime-dom.esm-bundler-B-pJJbN8.js";const I={class:"slider-min-max"},O={class:"label"},R={class:"label"},T={class:"custom-marks"},A=["onClick"],J=$({__name:"MultiPoint",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup(P,{emit:_}){const d=P,c=_,g=M(d.modelValue),{field:s}=h(d),b=n({get:()=>d.modelValue,set:a=>c("update:modelValue",a)}),t=n(()=>Number(s.value.min)),u=n(()=>Number(s.value.max)),j=n(()=>s.value.jump?1:Number(s.value.step||1)),C=n(()=>s.value.jump),v=n(()=>{var l;return(((l=s.value.scalePoints)==null?void 0:l.trim())||"").split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e)&&e>=t.value&&e<=u.value)}),k=a=>{C.value&&v.value.includes(a)&&c("update:modelValue",a)},B=a=>({left:`${(a-t.value)/(u.value-t.value)*100}%`});w(()=>d.modelValue,a=>{g.value=a});const L=a=>{const l=a.toFixed(2);return parseFloat(l).toString()};let p,V=M("0");return F(()=>{const a=document.querySelector(`[data-id="${s.value.alias}"] .slider-tooltip`);a&&(p=new MutationObserver(l=>{for(const e of l)e.type==="childList"&&setTimeout(()=>{V.value=a.textContent??""},130)}),p.observe(a,{childList:!0,subtree:!0,characterData:!0}))}),z(()=>{p&&p.disconnect()}),w(g,a=>{if(C.value){const l=v.value.reduce((e,x)=>Math.abs(x-a)<Math.abs(e-a)?x:e,v.value[0]);c("update:modelValue",l)}else c("update:modelValue",a)}),(a,l)=>(m(),r("div",{class:f(["slider-wrapper ccb-multi-point-range-field",{jump:i(s).jump}])},[o("div",I,[o("div",{class:"slider-min-max-item first",onClick:l[0]||(l[0]=e=>k(t.value))},[l[3]||(l[3]=o("span",{class:"tick"},null,-1)),o("span",O,N(t.value),1)]),o("div",{class:f(["slider-min-max-item",{done:b.value>=u.value}]),onClick:l[1]||(l[1]=e=>k(u.value))},[l[4]||(l[4]=o("span",{class:"tick"},null,-1)),o("span",R,N(u.value),1)],2)]),D(i(S),{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=e=>b.value=e),min:t.value,max:u.value,step:j.value,disabled:i(s).disabled,"show-tooltip":"focus",class:"custom-slider",format:L},null,8,["modelValue","min","max","step","disabled"]),o("div",T,[i(s).scalePoints?(m(!0),r(E,{key:0},U(v.value,e=>(m(),r("div",{key:e,class:"mark",style:q(B(e))},[e!==t.value&&e!==u.value?(m(),r("div",{key:0,class:f(["tick",{"tick-passed":e<=Number(i(V))}])},null,2)):y("",!0),e!==t.value&&e!==u.value?(m(),r("div",{key:1,class:f(["label",{"label-passed":e<=Number(i(V))}]),onClick:x=>k(e)},N(e),11,A)):y("",!0)],4))),128)):y("",!0)])],2))}});export{J as default};
//# sourceMappingURL=MultiPoint-5WJEWlJp.js.map

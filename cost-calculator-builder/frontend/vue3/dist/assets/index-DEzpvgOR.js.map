{"version":3,"mappings":"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","names":["props","__props","field","toRefs","fieldStore","useFieldsStore","appearanceStore","useAppearanceStore","conditionsStore","useConditionsStore","singleFieldMixins","useSingleField","callbackStore","useCallbackStore","currencyInstance","useCurrency","rawInput","ref","pageBreakerStore","usePageBreakerStore","onMounted","updateValue","requiredWarningText","computed","_a","useSettingsStore","getSavedAmount","structure","ranges","qty","highestUnit","r","baseTotal","currentTotal","matched","min","max","sorted","a","b","rest","rawMin","bracketStart","maxRaw","span","take","saved","savedPercent","currentUnit","options","savedCurrency","priceFormat","currentComponents","style","_b","defineAsyncComponent","__vitePreload","value","alias","fromCondition","breakdown","unitPrice","left","right","fixedPrice","getSignValue","isRequired","additionalClasses"],"ignoreList":[],"sources":["../../src/widget/features/calculator-fields/components/Range/Range.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-field ccb-range-field\"\n    :class=\"{\n      required: isRequired,\n      'ccb-field-disabled': field.disabled,\n      [additionalClasses]: true,\n      [field.styles?.style]: true,\n      'has-badge': !!getSavedAmount,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <RequiredHint v-if=\"isRequired\" :text=\"requiredWarningText\" />\n      <div class=\"ccb-field__title\">\n        <span class=\"ccb-field__title--title-box\">\n          <span\n            >{{ field.label\n            }}<span v-if=\"field.required\" class=\"ccb-field-required-mark\"\n              >*</span\n            ></span\n          >\n          <span>\n            {{ getSignValue }}\n          </span>\n        </span>\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <div class=\"ccb-field-input__wrapper\">\n      <component\n        :is=\"currentComponents\"\n        :field=\"field\"\n        @update:modelValue=\"updateValue\"\n        v-model=\"rawInput\"\n      />\n    </div>\n\n    <div\n      v-if=\"\n        appearanceStore.getAppearanceDescriptionPosition === 'after' &&\n        field.description &&\n        field.description.length > 0\n      \"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n    <div\n      class=\"ccb-field__badge\"\n      :class=\"field.badgeVariant\"\n      v-if=\"getSavedAmount && !field.multiply\"\n    >\n      <div class=\"ccb-field__badge-content\">\n        <i\n          class=\"ccb-icon-price-tag\"\n          v-if=\"field.badgeVariant === 'primary'\"\n        ></i>\n        <div class=\"ccb-field__badge-text\">{{ field.badgeText }}:</div>\n        <div class=\"ccb-field__badge-value\">\n          {{ getSavedAmount }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, ref, onMounted, defineAsyncComponent } from \"vue\";\nimport { IRangeField } from \"@/widget/shared/types/fields\";\n\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport { useSingleField } from \"@/widget/actions/fields/composable/useSingleField.ts\";\nimport { useCallbackStore } from \"@/widget/app/providers/stores/callbackStore.ts\";\nimport { useCurrency } from \"@/widget/actions/fields/composable/useCurrency.ts\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport { usePageBreakerStore } from \"@/widget/app/providers/stores/pageBreakerStore.ts\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\n\ntype Props = {\n  field: IRangeField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst fieldStore = useFieldsStore();\nconst appearanceStore = useAppearanceStore();\nconst conditionsStore = useConditionsStore();\nconst singleFieldMixins = useSingleField();\nconst callbackStore = useCallbackStore();\nconst currencyInstance = useCurrency();\nconst rawInput = ref<number>(0);\nconst pageBreakerStore = usePageBreakerStore();\n\nonMounted(() => {\n  rawInput.value = field.value.originalValue\n    ? field.value.originalValue\n    : field.value.min;\n\n  updateValue(rawInput.value, undefined, true);\n});\n\nconst requiredWarningText = computed(() => {\n  const settingStore = useSettingsStore();\n  return settingStore.getWarningTexts?.requiredMsg || \"\";\n});\n\nconst getSavedAmount = computed(() => {\n  const structure = field.value.pricingStructure;\n  if (!structure || structure === \"no_discounts\") return \"\";\n  const ranges = ((field.value as any).pricingRanges as any[]) || [];\n  if (!ranges.length) return \"\";\n\n  const qty = Number(rawInput.value) || 0;\n  if (qty <= 0) return \"\";\n\n  const highestUnit = Math.max(\n    ...ranges.map((r: any) => Number(r.unitPrice) || 0),\n    Number(field.value.unit) || 0,\n  );\n  const baseTotal = highestUnit * qty;\n\n  let currentTotal = 0;\n  if (structure === \"tiered_discounts\") {\n    const matched = ranges.find((r: any) => {\n      const min = Number(r.minQty) || 0;\n      const max = Number(r.maxQty) || 0;\n      return qty >= min && qty <= max;\n    });\n    const currentUnit = Number(matched?.unitPrice ?? field.value.unit) || 0;\n    currentTotal = currentUnit * qty;\n  } else if (structure === \"cumulative_discounts\") {\n    const sorted = [...ranges].sort(\n      (a: any, b: any) => (Number(a.minQty) || 0) - (Number(b.minQty) || 0),\n    );\n    let rest = qty;\n    for (const r of sorted) {\n      const rawMin = Number(r.minQty);\n      const min = Number.isFinite(rawMin) ? rawMin : 0;\n      const bracketStart = Math.max(1, min);\n      const maxRaw = Number(r.maxQty);\n      const max = Number.isFinite(maxRaw) && maxRaw > 0 ? maxRaw : Infinity;\n      const span = isFinite(max) ? Math.max(0, max - bracketStart + 1) : rest;\n      const take = Math.max(0, Math.min(rest, span));\n      if (take > 0) {\n        currentTotal += take * (Number(r.unitPrice) || 0);\n        rest -= take;\n      }\n      if (rest <= 0) break;\n    }\n    if (rest > 0) currentTotal += rest * highestUnit;\n  } else if (structure === \"flat_rate_discounts\") {\n    const matched = ranges.find((r: any) => {\n      const min = Number(r.minQty) || 0;\n      const max = Number(r.maxQty) || 0;\n      return qty >= min && qty <= max;\n    });\n    const fixedPrice = Number(matched?.unitPrice ?? field.value.unit) || 0;\n    currentTotal = fixedPrice;\n  }\n\n  let saved = 0;\n  let savedPercent = 0;\n  if (structure === \"flat_rate_discounts\") {\n    const matched = ranges.find((r: any) => {\n      const min = Number(r.minQty) || 0;\n      const max = Number(r.maxQty) || 0;\n      return qty >= min && qty <= max;\n    });\n    const currentUnit = Number(matched?.unitPrice ?? field.value.unit) || 0;\n    saved = Math.max(0, highestUnit - currentUnit);\n    savedPercent =\n      highestUnit > 0 ? Math.round((saved / highestUnit) * 100) : 0;\n  } else {\n    saved = Math.max(0, baseTotal - currentTotal);\n    savedPercent = baseTotal > 0 ? Math.round((saved / baseTotal) * 100) : 0;\n  }\n\n  if (saved <= 0) return \"\";\n\n  const options = currencyInstance.getCurrencyOptions(field.value);\n  const savedCurrency = currencyInstance.formatCurrency(saved, options);\n\n  const priceFormat = (field.value as any)?.badgeFormat || \"$\";\n  if (priceFormat === \"symbol\") {\n    return `${savedCurrency}`;\n  }\n  if (priceFormat === \"percent\") return `${savedPercent}%`;\n  if (priceFormat === \"symbol_and_percent\") {\n    return `${savedCurrency} (${savedPercent}%)`;\n  }\n  return \"\";\n});\n\nconst currentComponents = computed(() => {\n  const style = field.value?.styles?.style || \"default\";\n  if (style === \"default\") {\n    return defineAsyncComponent(() => import(\"./styles/Default.vue\"));\n  } else if (style === \"small\") {\n    return defineAsyncComponent(() => import(\"./styles/Small.vue\"));\n  } else if (style === \"flat-minimal\") {\n    return defineAsyncComponent(() => import(\"./styles/Flat.vue\"));\n  } else if (style === \"modern\") {\n    return defineAsyncComponent(() => import(\"./styles/Modern.vue\"));\n  } else if (style === \"input\") {\n    return defineAsyncComponent(() => import(\"./styles/Input.vue\"));\n  } else if (style === \"multi-point\") {\n    return defineAsyncComponent(() => import(\"./styles/MultiPoint.vue\"));\n  }\n\n  return \"\";\n});\n\nconst updateValue = (\n  value: number,\n  alias?: string,\n  fromCondition?: boolean,\n) => {\n  if (alias && alias !== field.value.alias) {\n    return;\n  }\n\n  if (!alias || fromCondition) {\n    rawInput.value = value;\n    field.value.originalValue = value;\n  }\n\n  const structure = field.value.pricingStructure;\n  if (\n    (structure === \"tiered_discounts\" ||\n      structure === \"cumulative_discounts\" ||\n      structure === \"flat_rate_discounts\") &&\n    Array.isArray((field.value as any).pricingRanges)\n  ) {\n    const qty = Number(field.value.originalValue ?? rawInput.value) || 0;\n    const ranges = ((field.value as any).pricingRanges as any[]) || [];\n    let computed = 0;\n    let breakdown: string[] = [];\n    const options = currencyInstance.getCurrencyOptions(field.value);\n\n    if (structure === \"tiered_discounts\") {\n      const matched = ranges.find((r) => {\n        const min = Number(r.minQty) || 0;\n        const max = Number(r.maxQty) || 0;\n        return qty >= min && qty <= max;\n      });\n      const unitPrice = Number(matched?.unitPrice ?? field.value.unit) || 0;\n      computed = qty * unitPrice;\n      const left = singleFieldMixins.parseCommonFieldSign(\n        qty.toString(),\n        field.value.sign,\n        field.value.unitPosition,\n      );\n      const right = currencyInstance.formatCurrency(unitPrice, options);\n      breakdown.push(`${left} x ${right}`);\n    } else if (structure === \"cumulative_discounts\") {\n      const sorted = [...ranges].sort(\n        (a: any, b: any) => (Number(a.minQty) || 0) - (Number(b.minQty) || 0),\n      );\n      let rest = qty;\n      for (const r of sorted) {\n        const rawMin = Number(r.minQty);\n        const min = Number.isFinite(rawMin) ? rawMin : 0;\n        const bracketStart = Math.max(1, min);\n        const maxRaw = Number(r.maxQty);\n        const max = Number.isFinite(maxRaw) && maxRaw > 0 ? maxRaw : Infinity;\n        const span = isFinite(max) ? Math.max(0, max - bracketStart + 1) : rest;\n        const take = Math.max(0, Math.min(rest, span));\n        if (take > 0) {\n          const unitPrice = Number(r.unitPrice) || 0;\n          computed += take * unitPrice;\n          const left = singleFieldMixins.parseCommonFieldSign(\n            take.toString(),\n            field.value.sign,\n            field.value.unitPosition,\n          );\n          const right = currencyInstance.formatCurrency(unitPrice, options);\n          breakdown.push(`${left} x ${right}`);\n          rest -= take;\n        }\n        if (rest <= 0) break;\n      }\n      if (rest > 0) {\n        const unitPrice = Number(field.value.unit) || 0;\n        computed += rest * unitPrice;\n        const left = singleFieldMixins.parseCommonFieldSign(\n          rest.toString(),\n          field.value.sign,\n          field.value.unitPosition,\n        );\n        const right = currencyInstance.formatCurrency(unitPrice, options);\n        breakdown.push(`${left} x ${right}`);\n      }\n    } else if (structure === \"flat_rate_discounts\") {\n      if (qty > 0) {\n        const matched = ranges.find((r: any) => {\n          const min = Number(r.minQty) || 0;\n          const max = Number(r.maxQty) || 0;\n          return qty >= min && qty <= max;\n        });\n        const fixedPrice = Number(matched?.unitPrice ?? field.value.unit) || 0;\n        computed = fixedPrice;\n        const left = singleFieldMixins.parseCommonFieldSign(\n          qty.toString(),\n          field.value.sign,\n          field.value.unitPosition,\n        );\n        const right = currencyInstance.formatCurrency(fixedPrice, options);\n        breakdown.push(`${left} â†’ ${right}`);\n      } else {\n        computed = 0;\n      }\n    }\n\n    field.value.value = field.value.round ? Math.round(computed) : computed;\n    field.value.displayValue = currencyInstance.formatCurrency(\n      field.value.value || 0,\n      options,\n    );\n    (field.value as any).extraDisplayView =\n      qty > 0 && breakdown.length ? breakdown.join(\" + \") : \"\";\n  } else {\n    if (field.value.multiply) {\n      value = value * field.value.unit;\n    }\n\n    field.value.value = field.value.round ? Math.round(value || 0) : value || 0;\n\n    field.value.displayValue = singleFieldMixins.getCommonFieldDisplayView(\n      field.value,\n      rawInput.value.toString(),\n    );\n  }\n\n  fieldStore.updateField(field.value.alias, field.value, fromCondition);\n  conditionsStore.applyConditionForField(field.value.alias);\n\n  if (\n    fieldStore.getPageBreakEnabled &&\n    fieldStore.getActivePage.action === \"not_skip\"\n  ) {\n    pageBreakerStore.checkPageFieldsConditions();\n  }\n};\n\nconst getSignValue = computed(() => {\n  if (field.value.multipliedTotal) {\n    return field.value.useCurrency || field.value.fieldCurrency\n      ? currencyInstance.formatCurrency(\n          field.value.value,\n          currencyInstance.getCurrencyOptions(field.value),\n        )\n      : singleFieldMixins.parseCommonFieldSign(\n          field.value.value.toString(),\n          field.value.sign,\n          field.value.unitPosition,\n        );\n  }\n\n  if (field.value.useCurrency || field.value.fieldCurrency) {\n    if (field.value.unitPosition === \"left\") {\n      return `${field.value.sign} ${rawInput.value}`;\n    }\n\n    return `${rawInput.value} ${field.value.sign}`;\n  }\n\n  if (field.value.unitPosition === \"left\") {\n    return `${field.value.sign} ${rawInput.value}`;\n  }\n\n  return `${rawInput.value} ${field.value.sign}`;\n});\n\nconst isRequired = computed(() => {\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst additionalClasses = computed(() => {\n  return field.value?.additionalStyles || \"\";\n});\n\ncallbackStore.add(\"updateRange\", updateValue);\n</script>\n\n<style lang=\"scss\">\n.ccb-field {\n  @media (min-width: 1025px) {\n    &.field-width-25 {\n      .ccb-range-field {\n        .ccb-input-range-field {\n          flex-direction: column;\n          padding: 6px 0;\n          gap: 25px;\n          align-items: flex-start;\n          .custom-slider {\n            width: 100%;\n            padding-left: 0;\n            .slider-handle {\n              width: 20px !important;\n              height: 20px !important;\n              top: calc(\n                (\n                    var(--slider-handle-height, 16px) - var(\n                        --slider-height,\n                        6px\n                      )\n                  ) /\n                  2 * -1 - 1px\n              ) !important;\n              box-shadow: 0px 5px 15px 0px rgba(0, 0, 0, 0.1);\n            }\n          }\n        }\n        .ccb-field__title--title-box {\n          flex-direction: column;\n        }\n        .slider-wrapper {\n          &.ccb-multi-point-range-field {\n            .slider-base {\n              .slider-handle {\n                right: calc(var(--slider-handle-width, 16px) / 2 * -1);\n              }\n            }\n          }\n          &.ccb-modern-range-field {\n            .slider-base {\n              .slider-handle {\n                right: calc(var(--slider-handle-width, 24px) / 2 * -1);\n              }\n            }\n          }\n          &.ccb-flat-range-field {\n            .slider-base {\n              .slider-handle {\n                right: calc(var(--slider-handle-width, 32px) / 2 * -1);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n.ccb-range-field {\n  display: flex;\n  flex-direction: column;\n\n  .slider-base {\n    background-color: var(--ccb-fields-border-color) !important;\n  }\n\n  .slider-tooltip,\n  .slider-handle,\n  .slider-connect {\n    background-color: var(--ccb-accent-color);\n  }\n\n  .slider-connects {\n    cursor: pointer;\n  }\n\n  .slider-tooltip {\n    color: var(--ccb-fields-color) !important;\n    border-color: var(--ccb-accent-color) !important;\n  }\n\n  @media (max-width: 1024px) {\n    .slider-tooltip {\n      display: none !important;\n    }\n\n    .slider-handle.slider-active .slider-tooltip {\n      display: block !important;\n    }\n  }\n\n  .slider-handle:focus {\n    box-shadow: none !important;\n  }\n  &.default {\n    .ccb-field__descriptions.ccb-after {\n      margin-top: 22px;\n    }\n  }\n  &.has-badge {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n\n    .ccb-field__label,\n    .ccb-field-input__wrapper {\n      flex: 0 0 100%;\n    }\n\n    .ccb-field__descriptions.ccb-before,\n    .ccb-field__descriptions.ccb-after {\n      flex: 1 1 auto;\n    }\n\n    .ccb-field__badge {\n      margin-top: 22px;\n      flex: 1 1 auto;\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      gap: 6px;\n      font-size: 14px;\n      font-weight: 600;\n      line-height: 1;\n      color: var(--ccb-text-color);\n      &.outlined {\n        .ccb-field__badge-content {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        .ccb-field__badge-value {\n          padding-right: 6px;\n          border-right: 3px solid var(--ccb-accent-color);\n        }\n      }\n      &.solid {\n        .ccb-field__badge-content {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 6px 12px;\n          color: var(--ccb-container-color);\n          background-color: var(--ccb-accent-color);\n          gap: 6px;\n          border-radius: 16px;\n        }\n      }\n      &.primary {\n        .ccb-field__badge-content {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          height: 28px;\n          background-color: var(--ccb-accent-color);\n          gap: 6px;\n          border-radius: 4px;\n          color: var(--ccb-container-color);\n        }\n        .ccb-field__badge-value {\n          padding-right: 8px;\n        }\n        i {\n          padding-left: 8px;\n          font-size: 15px;\n        }\n      }\n    }\n  }\n}\n\n.ccb-field__title {\n  &--title-box {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n}\n\n:root {\n  --slider-tooltip-min-width: 30px;\n  --slider-connect-bg: var(--ccb-accent-color);\n  --slider-bg: var();\n  --slider-tooltip-bg: var(--ccb-accent-color);\n  --slider-tooltip-color: var(--ccb-fields-text-color);\n}\n</style>\n"],"file":"assets/index-DEzpvgOR.js"}
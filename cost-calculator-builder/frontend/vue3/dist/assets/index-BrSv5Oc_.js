const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Buttons-CBrZGue6.css"])))=>i.map(i=>d[i]);
import{d as fe,t as ge,k as M,c as y,a as K,_ as L,m as ve,l as f,o,n as D,q as v,b as P,u as r,s as c,r as me,A as Se}from"./pinia-Bf90yW2D.js";import{m as _e,u as ye,f as he,n as Ce,j as be,a as A,o as xe,p as ke}from"./widget-BnDEfRrY.js";import{_ as W}from"./RequiredHint.vue_vue_type_style_index_0_lang-DK4Jaja3.js";import{u as Fe}from"./translationsStore-B0jdQEiB.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const H=m=>{if(m===void 0||(m==null?void 0:m.length)<0)return!1;const I=/^[-+]?[0-9]+\.[0-9]+$/;return!!m.toString().match(I)},Me={class:"ccb-field__label"},Te={key:0,class:"ccb-required-tooltip"},qe={class:"ccb-field__title"},Ae={key:0,class:"ccb-field-required-mark"},Ie={key:0,class:"ccb-field__descriptions ccb-before"},Be={key:0,class:"ccb-field__description"},Ee={key:1,class:"ccb-field__description"},Ne={key:1,class:"ccb-field__descriptions ccb-after"},De={key:0,class:"ccb-field__description"},Pe={key:1,class:"ccb-field__description"},Re=fe({__name:"Quantity",props:{field:{}},setup(m){const I=m,{field:e}=ge(I),B=M("required"),U=_e(),R=ke(),w=ye(),T=he(),G=Ce(),J=xe(),_=Fe(),X=be(),u=M(""),l=M(e.value.originalValue.toString()),q=M(!1),Y=M(0),Z=y(()=>{var a;return((a=A().getWarningTexts)==null?void 0:a.requiredMsg)||""}),ee=y(()=>{if(q.value)return u.value=l.value,l.value;l.value=u.value;let t=e.value.round?Math.round(+u.value):+u.value;return j(t.toString())}),te=y(()=>{if(e.value.styles.style==="default")return K(()=>L(()=>import("./Default-DkJhsaXG.js"),[],import.meta.url));if(e.value.styles.style==="buttons")return K(()=>L(()=>import("./Buttons-ehWc7W9y.js"),__vite__mapDeps([0]),import.meta.url))}),E=(t=!1,a,n,i)=>{n&&n!==e.value.alias||(n&&(u.value=a.toString()),l.value=a.toString(),oe(),t&&typeof a<"u"&&(e.value.value=a,e.value.originalValue=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=J.getCommonFieldDisplayView(e.value,l.value),T.updateField(e.value.alias,e.value,i),G.applyConditionForField(e.value.alias),T.getPageBreakEnabled&&T.getActivePage.action==="not_skip"&&X.checkPageFieldsConditions())},ae=t=>{const a=t.target;q.value&&N(a.value)},re=()=>{e.value.value<e.value.max&&(e.value.value=e.value.value+e.value.step),u.value=e.value.value.toString(),N(u.value)},ne=()=>{e.value.value>e.value.min&&(e.value.value=e.value.value-e.value.step),u.value=e.value.value.toString(),N(u.value)},N=t=>{var i;(i=t==null?void 0:t.toString())!=null&&i.includes(",")&&(t=t.replace(",","."));let a=e.value.round?Math.round(parseFloat(t)):parseFloat(t);if(isNaN(a))return;let n=R.parseCurrency(t.toString(),R.getCurrencyOptions(e.value));E(!0,n)},ie=t=>{const a=t.target;q.value=!0,l.value=ce(a.value||"0").toString()},se=()=>{q.value=!1},le=()=>{l.value=j(u.value)},oe=()=>{const t=Number(l.value)<+e.value.min,a=Number(l.value)>+e.value.max;t||a?B.value="value_range":B.value="required"},ue=y(()=>{let t=0;if(H(e.value.defaultValue.toString())||H(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,n=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,n)}return t}),$=(t,a)=>{const n=Math.pow(10,a);return Math.floor(t*n)/n},j=t=>{var S,p,h,C,b,x,k,F,V;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings){const g=parseFloat(t);return $(g,ue.value).toString()}(isNaN(Number(t))||t.length===0)&&(t="0");let a=parseFloat(t);const n=A();let i=((S=n.getCurrencySettings)==null?void 0:S.numAfterInteger)||0,d=((p=n.getCurrencySettings)==null?void 0:p.decimalSeparator)||".",s=((h=n.getCurrencySettings)==null?void 0:h.thousandsSeparator)||",";if(e.value.fieldCurrency&&(i=((b=(C=e.value)==null?void 0:C.fieldCurrencySettings)==null?void 0:b.numAfterInteger)||0,d=((k=(x=e.value)==null?void 0:x.fieldCurrencySettings)==null?void 0:k.decimalSeparator)||".",s=((V=(F=e.value)==null?void 0:F.fieldCurrencySettings)==null?void 0:V.thousandsSeparator)||","),i>0){a=$(a,parseInt(i.toString())),t=a.toFixed(i),t=t.toString().replace(".",d);const g=t.split(d);g[0]=g[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),t=g.join(d)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,s);return t},ce=t=>{var h,C,b,x,k,F,V,g,O;const a=A();let n=((h=a.getCurrencySettings)==null?void 0:h.numAfterInteger)||0,i=((C=a.getCurrencySettings)==null?void 0:C.decimalSeparator)||".",d=((b=a.getCurrencySettings)==null?void 0:b.thousandsSeparator)||",";e.value.fieldCurrency&&(n=((k=(x=e.value)==null?void 0:x.fieldCurrencySettings)==null?void 0:k.numAfterInteger)||0,i=((V=(F=e.value)==null?void 0:F.fieldCurrencySettings)==null?void 0:V.decimalSeparator)||".",d=((O=(g=e.value)==null?void 0:g.fieldCurrencySettings)==null?void 0:O.thousandsSeparator)||",");let s;t.includes(".")&&t.includes(",")?s=t.split(i):t.includes(",")?s=t.split(","):t.includes(".")?s=t.split("."):s=[t],s[0]=s[0].split(d).join("");let S=s.join("."),p=parseFloat(S)||0;if(n!==void 0){let z=Math.pow(10,n);p=Math.round(p*z)/z}return p},de=t=>{var s,S,p;let n=((s=A().getCurrencySettings)==null?void 0:s.decimalSeparator)||".";e.value.fieldCurrency&&(n=((p=(S=e.value)==null?void 0:S.fieldCurrencySettings)==null?void 0:p.decimalSeparator)||".");let i=t.keyCode?t.keyCode:t.which,d=46;n===","&&(d=44),(i<48||i>57)&&i!==d&&t.preventDefault()},Q=y(()=>{const t=Number(l.value)<e.value.min,a=Number(l.value)>e.value.max;return t||a?!0:T.checkFieldRequired(e.value)}),pe=y(()=>`
    ${_.getTranslations.valueMustBeBetween} ${e.value.min} ${_.getTranslations.and} ${e.value.max}
  `);return U.add("updateQuantity",E),ve(()=>{l.value=e.value.originalValue.toString(),u.value=l.value,E(!1,e.value.originalValue,void 0,!0)}),(t,a)=>(o(),f("div",{class:Se(["ccb-field ccb-field-quantity",{required:Q.value,"ccb-field-disabled":r(e).disabled,[r(e).additionalStyles||""]:!!r(e).additionalStyles}])},[D("div",Me,[Q.value?(o(),f("div",Te,[B.value==="value_range"?(o(),P(W,{key:0,field:r(e),text:pe.value},null,8,["field","text"])):(o(),P(W,{key:1,field:r(e),text:Z.value},null,8,["field","text"]))])):v("",!0),D("div",qe,[D("span",null,c(r(e).label),1),r(e).required?(o(),f("span",Ae,"*")):v("",!0)])]),r(w).getAppearanceDescriptionPosition==="before"?(o(),f("div",Ie,[r(e).hideMinMax?v("",!0):(o(),f("div",Be,c(r(_).getTranslations.min)+": "+c(r(e).min)+" - "+c(r(_).getTranslations.max)+": "+c(r(e).max),1)),r(e).description?(o(),f("div",Ee,c(r(e).description),1)):v("",!0)])):v("",!0),(o(),P(me(te.value),{field:r(e),value:ee.value,onInput:ae,onFocus:ie,onFocusout:le,onBlur:se,onKeypress:de,key:Y.value,onIncrement:re,onDecrement:ne},null,40,["field","value"])),r(w).getAppearanceDescriptionPosition==="after"?(o(),f("div",Ne,[r(e).hideMinMax?v("",!0):(o(),f("div",De,c(r(_).getTranslations.min)+": "+c(r(e).min)+" - "+c(r(_).getTranslations.max)+": "+c(r(e).max),1)),r(e).description?(o(),f("div",Pe,c(r(e).description),1)):v("",!0)])):v("",!0)],2))}}),Ke=Ve(Re,[["__scopeId","data-v-e311bc87"]]);export{Ke as default};
//# sourceMappingURL=index-BrSv5Oc_.js.map

{"version":3,"file":"Horizontal-99fmhoy_.js","sources":["../../src/widget/shared/ui/layouts/components/Horizontal.vue"],"sourcesContent":["<template>\n  <div class=\"ccb-horizontal-layout\" :class=\"{ 'enough-pages': enoughPages }\">\n    <Wrapper wrapper=\"fields\">\n      <Grid grid=\"list\">\n        <template\n          v-for=\"(page, index) in fieldsStore.getPages\"\n          :key=\"page.alias\"\n        >\n          <template\n            v-if=\"\n              index === activePageIndex && 'groupElements' in page && 'alias'\n            \"\n          >\n            <template v-for=\"inPage in page.groupElements\">\n              <template\n                v-for=\"field in fieldsStore.getFields\"\n                :key=\"field.alias\"\n              >\n                <Transition name=\"fade\">\n                  <CalculatorField\n                    v-if=\"\n                      isFieldHidden(field) &&\n                      'alias' in inPage &&\n                      inPage.alias === field.alias &&\n                      !field.alias.includes('total')\n                    \"\n                    :name=\"field.fieldName\"\n                    :field=\"field\"\n                  />\n                </Transition>\n              </template>\n            </template>\n          </template>\n        </template>\n\n        <template v-if=\"activePageIndex === fieldsStore.getPages.length\">\n          <Wrapper\n            wrapper=\"subtotal\"\n            class=\"ccb-subtotals-block\"\n            :id=\"getStickyId\"\n          >\n            <template v-slot:default>\n              <template v-if=\"formDisplaySummaryStatus\">\n                <TotalSummaryList list-type=\"summary\">\n                  <template\n                    v-for=\"summary in fieldsStore.getSummaryList\"\n                    :key=\"summary.alias\"\n                  >\n                    <Transition name=\"fade\">\n                      <TotalSummaryItem\n                        v-if=\"!summary.hidden\"\n                        :item-type=\"getFieldItemType(summary)\"\n                        :summary=\"summary\"\n                      ></TotalSummaryItem>\n                    </Transition>\n                  </template>\n                </TotalSummaryList>\n\n                <TotalSummaryList list-type=\"total\">\n                  <template\n                    v-for=\"summary in fieldsStore.getTotalsList\"\n                    :key=\"summary.alias\"\n                  >\n                    <Transition name=\"fade\">\n                      <TotalSummaryItem\n                        v-if=\"!summary.hidden\"\n                        item-type=\"total\"\n                        :summary=\"summary\"\n                      ></TotalSummaryItem>\n                    </Transition>\n                  </template>\n                </TotalSummaryList>\n              </template>\n              <template v-else>\n                <HeaderTitle\n                  :title=\"\n                    settingsStore.getFormSettings?.summaryDisplay?.formTitle\n                  \"\n                />\n              </template>\n\n              <Promocode v-if=\"hasPromocodes()\" />\n\n              <WooRedirectCart v-if=\"showWooRedirectCart\" />\n\n              <div\n                class=\"ccb-actions\"\n                :class=\"activeActionCount\"\n                :style=\"\n                  !orderFormStore.getNextButtonStatus\n                    ? 'flex-direction: column;'\n                    : ''\n                \"\n                ref=\"actionsRef\"\n              >\n                <Submission class=\"ccb-actions__item\" />\n                <PdfInvoice class=\"ccb-actions__item\" />\n              </div>\n            </template>\n\n            <template v-slot:notifications>\n              <Notifications\n                v-if=\"notificationsStore.notificationStatus\"\n                :type=\"notificationsStore.notificationType\"\n                :message=\"notificationsStore.message\"\n              />\n            </template>\n          </Wrapper>\n        </template>\n      </Grid>\n    </Wrapper>\n    <Wrapper\n      v-if=\"!summaryLastPage\"\n      wrapper=\"subtotal\"\n      class=\"ccb-subtotals-block ccb-subtotals-block-summary\"\n      :id=\"getStickyId\"\n    >\n      <template v-slot:default>\n        <template v-if=\"formDisplaySummaryStatus\">\n          <TotalSummaryList list-type=\"summary\">\n            <template\n              v-for=\"summary in fieldsStore.getSummaryList\"\n              :key=\"summary.alias\"\n            >\n              <Transition name=\"fade\">\n                <TotalSummaryItem\n                  v-if=\"\n                    !summary.hidden &&\n                    activePageFieldsAliases.includes(summary.alias)\n                  \"\n                  :item-type=\"getFieldItemType(summary)\"\n                  :summary=\"summary\"\n                ></TotalSummaryItem>\n              </Transition>\n            </template>\n          </TotalSummaryList>\n\n          <TotalSummaryList list-type=\"total\">\n            <template\n              v-for=\"summary in fieldsStore.getTotalsList\"\n              :key=\"summary.alias\"\n            >\n              <Transition name=\"fade\">\n                <TotalSummaryItem\n                  v-if=\"!summary.hidden\"\n                  item-type=\"total\"\n                  :summary=\"summary\"\n                ></TotalSummaryItem>\n              </Transition>\n            </template>\n          </TotalSummaryList>\n        </template>\n        <template v-else>\n          <HeaderTitle\n            :title=\"settingsStore.getFormSettings?.summaryDisplay?.formTitle\"\n          />\n        </template>\n\n        <Promocode v-if=\"hasPromocodes()\" />\n\n        <WooRedirectCart v-if=\"showWooRedirectCart\" />\n\n        <div\n          class=\"ccb-actions\"\n          :class=\"activeActionCount\"\n          :style=\"\n            !orderFormStore.getNextButtonStatus ? 'flex-direction: column;' : ''\n          \"\n        >\n          <Submission class=\"ccb-actions__item\" />\n          <PdfInvoice class=\"ccb-actions__item\" />\n        </div>\n      </template>\n\n      <template v-slot:notifications>\n        <Notifications\n          v-if=\"showNotifications\"\n          :type=\"notificationsStore.notificationType\"\n          :message=\"notificationsStore.message\"\n        />\n      </template>\n    </Wrapper>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport Wrapper from \"@/widget/shared/ui/wrappers/Wrapper.vue\";\nimport CalculatorField from \"@/widget/features/calculator-fields/CalculatorField.vue\";\nimport Grid from \"@/widget/shared/ui/grids/Grid.vue\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport TotalSummaryList from \"@/widget/shared/ui/total-summary/TotalSummaryList.vue\";\nimport TotalSummaryItem from \"@/widget/shared/ui/total-summary/TotalSummaryItem.vue\";\nimport Promocode from \"@/widget/features/discounts/components\";\nimport { useDiscounts } from \"@/widget/actions/discounts/composable/useDiscounts.ts\";\nimport { useNotificationsStore } from \"@/widget/app/providers/stores/notificationsStore.ts\";\nimport Submission from \"@/widget/features/submission\";\nimport Notifications from \"@/widget/shared/ui/components/Notifications\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\nimport { Field } from \"@/widget/shared/types/fields\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore\";\nimport { useAppStore } from \"@/widget/app/providers/stores/appStore.ts\";\nimport HeaderTitle from \"@/widget/shared/ui/wrappers/components/HeaderTitle.vue\";\nimport PdfInvoice from \"@/widget/features/pdf-invoice/send-quote\";\nimport WooRedirectCart from \"@/widget/shared/ui/wrappers/components/WooRedirectCart.vue\";\nimport { useOrderFormStore } from \"@/widget/app/providers/stores/orderFormStore.ts\";\n\nconst notificationsStore = useNotificationsStore();\n\nconst fieldsStore = useFieldsStore();\nconst settingsStore = useSettingsStore();\nconst appearanceStore = useAppearanceStore();\nconst appStore = useAppStore();\nconst { hasPromocodes } = useDiscounts();\nconst orderFormStore = useOrderFormStore();\n\nconst showNotifications = computed((): boolean => {\n  return (\n    notificationsStore.notificationStatus &&\n    (notificationsStore.notificationType !== \"finish\" ||\n      !settingsStore.hasThankYouPage) &&\n    !getWooStayOnPage.value\n  );\n});\n\nconst enoughPages = computed(() => {\n  return fieldsStore.getPages.length > 1;\n});\n\nconst getFieldItemType = computed(() => {\n  return (summary: Field): \"summary\" | \"repeater\" | \"group\" | \"total\" => {\n    const types: { [key: string]: \"repeater\" | \"group\" | \"total\" } = {\n      repeater: \"repeater\",\n      group: \"group\",\n      total: \"total\",\n    };\n    return types[summary.fieldName as keyof typeof types] || \"summary\";\n  };\n});\n\nconst activePageFieldsAliases = computed(() => {\n  const allAliases: string[] = [];\n\n  for (let i = 0; i <= activePageIndex.value; i++) {\n    const page = fieldsStore.getPages[i];\n    if (\"groupElements\" in page && page.groupElements) {\n      page.groupElements.forEach((section: any) => {\n        if (\"fields\" in section && Array.isArray(section.fields)) {\n          section.fields.forEach((field: Field) => {\n            if (field.alias) {\n              if (\n                \"groupElements\" in field &&\n                field.groupElements &&\n                Array.isArray(field.groupElements)\n              ) {\n                if (field.alias.includes(\"repeater\")) {\n                  allAliases.push(field.alias);\n                }\n\n                field.groupElements.forEach((groupElement: any) => {\n                  if (groupElement.alias) {\n                    allAliases.push(groupElement.alias);\n                  }\n                });\n              } else {\n                allAliases.push(field.alias);\n              }\n            }\n          });\n        }\n      });\n    }\n  }\n\n  return allAliases;\n});\n\nconst isFieldHidden = computed(() => {\n  return (field: Field) => {\n    if (field?.hidden) {\n      return !field.hidden;\n    }\n\n    if (field?.hideAndLeaveTotal) {\n      return !field.hideAndLeaveTotal;\n    }\n\n    return true;\n  };\n});\n\nconst pageBreakerSettings = settingsStore.getPageBreakerSettings;\n\nconst showWooRedirectCart = computed((): boolean => {\n  return (\n    notificationsStore.notificationType === \"success\" && getWooStayOnPage.value\n  );\n});\n\nconst actionsRef = ref<HTMLElement | null>(null);\n\nconst activeActionCount = computed(() => {\n  const getActionsCount = (): number => {\n    if (actionsRef.value) {\n      return actionsRef.value.children.length;\n    }\n    return 0;\n  };\n\n  return showShareBtn.value\n    ? `button-${getActionsCount()} has-share`\n    : `button-${getActionsCount()} `;\n});\n\nconst showShareBtn = computed(() => {\n  return settingsStore.getInvoice?.emailButton;\n});\n\nconst activePageIndex = computed(() => {\n  return fieldsStore.getActivePageIndex;\n});\n\nconst getWooStayOnPage = computed((): boolean => {\n  return (\n    settingsStore.getWooCheckoutSettings?.redirectTo === \"stay\" &&\n    notificationsStore.message === \"Stay on page\"\n  );\n});\n\nconst formDisplaySummaryStatus = computed(() => {\n  const summaryDisplay = settingsStore.getFormSettings?.summaryDisplay;\n  if (\n    summaryDisplay?.enable &&\n    settingsStore.getFormSettings?.accessEmail === true\n  ) {\n    if (\n      [\"show_summary_block\", \"show_summary_block_with_pdf\"].includes(\n        summaryDisplay?.actionAfterSubmit,\n      )\n    ) {\n      return settingsStore.summaryDisplayShowSummary;\n    }\n\n    return false;\n  }\n\n  return true;\n});\n\nconst summaryLastPage = computed(() => {\n  return pageBreakerSettings?.summaryAfterLastPage;\n});\n\nconst getStickyId = computed(() => {\n  const stickyStatus = settingsStore.general?.sticky;\n  if (appearanceStore.getAppearanceBoxStyle === \"horizontal\" || !stickyStatus) {\n    if (window.$ccbSticky) window.$ccbSticky.destroy();\n    return null;\n  }\n\n  if (window.$ccbSticky) window.$ccbSticky.initialize();\n\n  return `ccb_summary_sticky_${appStore.getCalcId}`;\n});\n</script>\n\n<style lang=\"scss\">\n.ccb-horizontal-layout {\n  display: grid;\n  grid-template-columns: 1fr;\n  counter-reset: ccb-section;\n  @media (max-width: 1024px) {\n    grid-template-columns: 1fr;\n  }\n\n  &.summary-last-page {\n    grid-template-columns: 1fr;\n  }\n\n  &.enough-pages {\n    background-color: var(--ccb-container-color);\n  }\n}\n</style>\n"],"names":["notificationsStore","useNotificationsStore","fieldsStore","useFieldsStore","settingsStore","useSettingsStore","appearanceStore","useAppearanceStore","appStore","useAppStore","hasPromocodes","useDiscounts","orderFormStore","useOrderFormStore","showNotifications","computed","getWooStayOnPage","enoughPages","getFieldItemType","summary","activePageFieldsAliases","allAliases","i","activePageIndex","page","section","field","groupElement","isFieldHidden","pageBreakerSettings","showWooRedirectCart","actionsRef","ref","activeActionCount","getActionsCount","showShareBtn","_a","formDisplaySummaryStatus","summaryDisplay","_b","summaryLastPage","getStickyId","stickyStatus"],"mappings":"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"}
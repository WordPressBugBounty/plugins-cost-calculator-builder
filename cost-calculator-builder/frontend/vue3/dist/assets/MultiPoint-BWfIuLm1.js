import{m as P}from"./slider-CdghZgAd.js";import{d as $,k as S,t as h,c as i,L as M,m as B,R as z,l as m,o as d,n as o,p as D,s as x,A as b,u as r,q as N,F as q,z as E,M as R}from"./pinia-Bf90yW2D.js";const U={class:"slider-min-max"},A={class:"label"},O={class:"label"},T={class:"custom-marks"},G=["onClick"],J=$({__name:"MultiPoint",props:{field:{},modelValue:{}},emits:["update:modelValue"],setup(w,{emit:_}){const c=w,v=_,y=S(c.modelValue),{field:t}=h(c),k=i({get:()=>c.modelValue,set:a=>v("update:modelValue",a)}),s=i(()=>Number(t.value.min)),u=i(()=>Number(t.value.max)),j=i(()=>t.value.jump?1:Number(t.value.step||1)),C=i(()=>t.value.jump),p=i(()=>{var l;return(((l=t.value.scalePoints)==null?void 0:l.trim())||"").split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e)&&e>=s.value&&e<=u.value)}),V=a=>{C.value&&p.value.includes(a)&&(n.value=a.toString(),v("update:modelValue",a))},F=a=>({left:`${(a-s.value)/(u.value-s.value)*100}%`});M(()=>c.modelValue,a=>{y.value=a,n.value=a.toString()});const L=a=>{const l=a.toFixed(2);return parseFloat(l).toString()};let f,n=S("0");return B(()=>{t.value.defaultValue&&(n.value=t.value.defaultValue.toString());const a=document.querySelector(`[data-id="${t.value.alias}"] .slider-tooltip`);a&&(f=new MutationObserver(l=>{for(const e of l)e.type==="childList"&&setTimeout(()=>{n.value=a.textContent??""},130)}),f.observe(a,{childList:!0,subtree:!0,characterData:!0}))}),z(()=>{f&&f.disconnect()}),M(y,a=>{if(C.value){const l=p.value.reduce((e,g)=>Math.abs(g-a)<Math.abs(e-a)?g:e,p.value[0]);v("update:modelValue",l)}else v("update:modelValue",a)}),(a,l)=>(d(),m("div",{class:b(["slider-wrapper ccb-multi-point-range-field",{jump:r(t).jump}])},[o("div",U,[o("div",{class:"slider-min-max-item first",onClick:l[0]||(l[0]=e=>V(s.value))},[l[3]||(l[3]=o("span",{class:"tick"},null,-1)),o("span",A,x(s.value),1)]),o("div",{class:b(["slider-min-max-item",{done:k.value>=u.value}]),onClick:l[1]||(l[1]=e=>V(u.value))},[l[4]||(l[4]=o("span",{class:"tick"},null,-1)),o("span",O,x(u.value),1)],2)]),D(r(P),{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=e=>k.value=e),min:s.value,max:u.value,step:j.value,disabled:r(t).disabled,"show-tooltip":"focus",class:"custom-slider",format:L},null,8,["modelValue","min","max","step","disabled"]),o("div",T,[r(t).scalePoints?(d(!0),m(q,{key:0},E(p.value,e=>(d(),m("div",{key:e,class:"mark",style:R(F(e))},[e!==s.value&&e!==u.value?(d(),m("div",{key:0,class:b(["tick",{"tick-passed":e<=Number(r(n))}])},null,2)):N("",!0),e!==s.value&&e!==u.value?(d(),m("div",{key:1,class:b(["label",{"label-passed":e<=Number(r(n))}]),onClick:g=>V(e)},x(e),11,G)):N("",!0)],4))),128)):N("",!0)])],2))}});export{J as default};
//# sourceMappingURL=MultiPoint-BWfIuLm1.js.map

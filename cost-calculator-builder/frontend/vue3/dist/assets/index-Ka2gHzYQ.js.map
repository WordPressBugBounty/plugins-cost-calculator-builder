{"version":3,"mappings":";s2BAkEA,MAAMA,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExBI,EAAkBC,EAAmB,EACrCC,EAAaC,EAAe,EAC5BC,EAAkBC,EAAmB,EACrCC,EAAoBC,EAAqB,EAEzCC,EAAeC,EAAS,IACrBX,EAAM,MAAM,OAAS,EAC7B,EAEKY,EAAiBD,EAAS,IACvBX,EAAM,MAAM,aAAe,IACnC,EAEKa,EAAkBF,EAAS,IAAM,CAC/B,MAAAG,EAAQd,EAAM,MAAM,kBAAoB,GACxCe,EAAUf,EAAM,MAAM,iBAAmB,GAE/C,MAAO,CAAE,MAAAc,EAAc,QAAAC,EAAkB,QAAS,CAAE,EACrD,EAEKC,EAAYL,EAAS,IAClBX,EAAM,MAAM,QAAU,EAC9B,EAEKiB,EAAoBN,EAAS,IAC7BD,EAAa,MACRQ,EAAqB,IAAMC,EAAA,WAAO,yBAAwB,2CAAC,EAE3DD,EAAqB,IAAMC,EAAA,WAAO,0BAAyB,2CAAC,CAEtE,EAEKC,EAAaT,EAAS,IACnBP,EAAW,mBAAmBJ,EAAM,KAAK,CACjD,EAEKqB,EAAeC,EAIX,IAAI,EAEdC,EAAU,IAAM,CACdF,EAAa,MAAQ,CACnB,MAAO,OAAOR,EAAgB,MAAM,KAAK,GAAK,IAAI,KAAK,EAAE,SAAS,EAClE,QAAS,OAAOA,EAAgB,MAAM,OAAO,GAAK,IAAI,KAAK,EAAE,WAAW,EACxE,QAAS,CACX,EACD,EAEK,MAAAW,EAAkBb,EAAS,IAAM,CACjC,IAACU,EAAa,MAAc,SAEhC,GAAI,MAAM,QAAQA,EAAa,KAAK,EAAG,CAC/B,MAAAI,EAAOJ,EAAa,MAAM,CAAC,EAC3BK,EAAKL,EAAa,MAAM,CAAC,EAE/B,MAAO,GAAGM,EAAWF,CAAI,CAAC,MAAME,EAAWD,CAAE,CAAC,OAEvC,QAAAC,EAAWN,EAAa,KAAK,CACtC,CACD,EAEKM,EAAcC,GAA6C,CACzD,MAAE,MAAAd,EAAO,QAAAC,CAAA,EAAYa,EACrBC,EAAmBd,EAAQ,SAAW,WAAS,EAAG,GAAG,EAEvD,GAACC,EAAU,MAMN,SADgBF,EAAM,SAAW,WAAS,EAAG,GAAG,CAC/B,IAAIe,CAAgB,GANxB,CACd,MAAAC,EAAOhB,GAAS,GAAK,KAAO,KAElC,MAAO,GADgBA,EAAQ,IAAM,EACb,IAAIe,CAAgB,IAAIC,CAAI,GAKxD,EAEMC,EAAc,IAAM,CAClB/B,EAAA,MAAM,aAAewB,EAAgB,MAC3CpB,EAAW,YAAYJ,EAAM,MAAM,MAAOA,EAAM,KAAK,EACrCM,EAAA,uBAAuBN,EAAM,MAAM,KAAK,CAC1D,EAEMgC,EAAoBrB,EAAS,IAAM,OAChC,QAAAsB,EAAAjC,EAAM,QAAN,YAAAiC,EAAa,mBAAoB,GACzC","names":["props","__props","field","toRefs","appearanceStore","useAppearanceStore","fieldStore","useFieldsStore","conditionsStore","useConditionsStore","translationsStore","useTranslationsStore","getRangeType","computed","getMinInterval","getDefaultValue","hours","minutes","getFormat","currentComponents","defineAsyncComponent","__vitePreload","isRequired","selectedTime","ref","onMounted","getDisplayValue","from","to","formatTime","time","formattedMinutes","ampm","updateValue","additionalClasses","_a"],"ignoreList":[],"sources":["../../src/widget/features/calculator-fields/components/TimePicker/TimePicker.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-field ccb-timePicker-field\"\n    :class=\"{\n      required: isRequired,\n      'ccb-24-hours': getFormat,\n      'ccb-field-disabled': field.disabled,\n      [additionalClasses]: additionalClasses,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <RequiredHint\n        v-if=\"isRequired\"\n        :text=\"translationsStore.getTranslations.requiredField\"\n      />\n      <div class=\"ccb-field__title\">\n        {{ field.label\n        }}<span v-if=\"field.required\" class=\"ccb-field-required-mark\">*</span\n        ><ProBadge />\n      </div>\n    </div>\n    <div\n      v-if=\"appearanceStore.descriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <div class=\"ccb-field__input-wrapper\">\n      <component\n        :is=\"currentComponents\"\n        v-model=\"selectedTime\"\n        :alias=\"field.alias\"\n        :format=\"getFormat\"\n        :default=\"'23:05'\"\n        :field=\"field\"\n        :min-interval=\"getMinInterval\"\n        @update:model-value=\"updateValue\"\n      />\n    </div>\n    <div\n      v-if=\"appearanceStore.descriptionPosition === 'after'\"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, defineAsyncComponent, onMounted, ref } from \"vue\";\nimport { ITimePickerField } from \"@/widget/shared/types/fields\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport ProBadge from \"@/widget/shared/ui/components/Pro-badge/ProBadge.vue\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\ntype Props = {\n  field: ITimePickerField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst appearanceStore = useAppearanceStore();\nconst fieldStore = useFieldsStore();\nconst conditionsStore = useConditionsStore();\nconst translationsStore = useTranslationsStore();\n\nconst getRangeType = computed(() => {\n  return field.value.range || false;\n});\n\nconst getMinInterval = computed(() => {\n  return field.value.minInterval || \"1h\";\n});\n\nconst getDefaultValue = computed(() => {\n  const hours = field.value.placeholderHours || \"\";\n  const minutes = field.value.placeholderTime || \"\";\n\n  return { hours: hours, minutes: minutes, seconds: 0 };\n});\n\nconst getFormat = computed(() => {\n  return field.value.format || false;\n});\n\nconst currentComponents = computed(() => {\n  if (getRangeType.value) {\n    return defineAsyncComponent(() => import(\"./styles/RangeTime.vue\"));\n  } else {\n    return defineAsyncComponent(() => import(\"./styles/SingleTime.vue\"));\n  }\n});\n\nconst isRequired = computed(() => {\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst selectedTime = ref<{\n  hours: number;\n  minutes: number;\n  seconds: number;\n} | null>(null);\n\nonMounted(() => {\n  selectedTime.value = {\n    hours: Number(getDefaultValue.value.hours) || new Date().getHours(),\n    minutes: Number(getDefaultValue.value.minutes) || new Date().getMinutes(),\n    seconds: 0,\n  };\n});\n\nconst getDisplayValue = computed(() => {\n  if (!selectedTime.value) return \"\";\n\n  if (Array.isArray(selectedTime.value)) {\n    const from = selectedTime.value[0];\n    const to = selectedTime.value[1];\n\n    return `${formatTime(from)} - ${formatTime(to)}`;\n  } else {\n    return formatTime(selectedTime.value);\n  }\n});\n\nconst formatTime = (time: { hours: number; minutes: number }) => {\n  const { hours, minutes } = time;\n  const formattedMinutes = minutes.toString().padStart(2, \"0\");\n\n  if (!getFormat.value) {\n    const ampm = hours >= 12 ? \"PM\" : \"AM\";\n    const formattedHours = hours % 12 || 12;\n    return `${formattedHours}:${formattedMinutes} ${ampm}`;\n  } else {\n    const formattedHours = hours.toString().padStart(2, \"0\");\n    return `${formattedHours}:${formattedMinutes}`;\n  }\n};\n\nconst updateValue = () => {\n  field.value.displayValue = getDisplayValue.value;\n  fieldStore.updateField(field.value.alias, field.value);\n  conditionsStore.applyConditionForField(field.value.alias);\n};\n\nconst additionalClasses = computed(() => {\n  return field.value?.additionalStyles || \"\";\n});\n</script>\n\n<style lang=\"scss\">\n.ccb-timePicker-field *:focus {\n  outline-width: 0;\n}\n.ccb-icon-timepicker-light-clock {\n  color: var(--ccb-text-color);\n}\n.ccb-timePicker-field {\n  input {\n    color: var(--ccb-text-color);\n    padding: 12px var(--ccb-field-side-indent);\n    padding-left: max(30px, var(--ccb-field-side-indent));\n\n    &.dp__input_focus {\n      border-color: var(--ccb-accent-color);\n    }\n  }\n\n  .dp__input_icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: var(--ccb-text-color);\n  }\n\n  .dp__overlay {\n    height: 130px !important;\n  }\n\n  .dp__menu {\n    color: var(--ccb-text-color);\n    border: none;\n  }\n\n  .dp__action_cancel {\n    padding: 10px;\n    margin: 0;\n    border: none;\n    flex: 1;\n    border-radius: var(--ccb-fields-border-radius);\n    cursor: pointer;\n    transition: 300ms ease;\n    font-size: var(--ccb-fields-button-size);\n    font-weight: var(--ccb-fields-button-weight);\n    border: 1px solid (var(--ccb-fields-border-color));\n    margin-right: 10px;\n    background: var(--ccb-date-picker-day);\n    color: var(--ccb-text-color);\n\n    &:hover {\n      background: color-mix(in srgb, var(--ccb-accent-color), transparent 50%);\n    }\n  }\n\n  .dp__action_select {\n    padding: 10px;\n    margin: 0;\n    border: none;\n    flex: 1;\n    border-radius: var(--ccb-fields-border-radius);\n    cursor: pointer;\n    transition: 300ms ease;\n    font-size: var(--ccb-fields-button-size);\n    font-weight: var(--ccb-fields-button-weight);\n    background: var(--ccb-accent-color) !important;\n    color: var(--ccb-fields-bg-color);\n\n    &:hover {\n      background: hsl(from var(--ccb-accent-color) h s calc(l - 5));\n    }\n  }\n\n  .dp__selection_preview {\n    color: var(--ccb-text-color);\n  }\n\n  .dp__menu,\n  .dp__overlay_row,\n  .dp__arrow_top,\n  .dp__arrow_bottom {\n    background: var(--ccb-fields-bg-color);\n    border: none;\n  }\n  .dp__outer_menu_wrap {\n    box-shadow: 0 10px 30px 0 rgba(0, 0, 0, 0.25);\n  }\n\n  .dp__pm_am_button {\n    background: var(--ccb-accent-color);\n    color: var(--ccb-fields-bg-color);\n  }\n\n  .dp__btn {\n    background: var(--ccb-fields-bg-color);\n    transform: 300ms easy;\n\n    &:hover {\n      background: var(--ccb-accent-color);\n      color: var(--ccb-text-color);\n    }\n  }\n\n  .dp__overlay_cell {\n    color: var(--ccb-text-color);\n    &:hover {\n      background: color-mix(in srgb, var(--ccb-accent-color), transparent 50%);\n      color: var(--ccb-text-color);\n    }\n  }\n\n  .dp__input_icon {\n    padding: 10px;\n    font-size: 16px;\n    color: var(--dp-icon-color);\n  }\n\n  .dp__time_col {\n    color: var(--ccb-text-color);\n    gap: 5px;\n    button {\n      color: var(--ccb-text-color);\n      background: var(--ccb-date-picker-day);\n      border-radius: 4px;\n      min-width: 42px;\n      border: 1px solid transparent;\n\n      &:hover {\n        background: color-mix(\n          in srgb,\n          var(--ccb-accent-color),\n          transparent 50%\n        );\n        border-color: var(--ccb-accent-color);\n        color: var(--ccb-text-color);\n      }\n    }\n  }\n}\n</style>\n"],"file":"assets/index-Ka2gHzYQ.js"}
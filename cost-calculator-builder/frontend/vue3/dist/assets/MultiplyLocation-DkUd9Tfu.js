import{d as $,t as K,k as L,c as S,I as R,m as U,l as c,o as d,p as s,n as _,s as r,u as o,w as j,F as H,y as Z,E as q,a7 as J,z as Q}from"./pinia-CqDt-rav.js";import{_ as b,b as W}from"./ThankYouPage-CtXVjEXu.js";import{f as X,n as Y,m as ee,j as te}from"./widget-ZupJmgRB.js";import{L as se,u as oe}from"./index-g_8dS19K.js";import{u as ae}from"./translationsStore-B4g6iBqy.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const ie={class:"ccb-multiply-location"},ne={class:"ccb-multiply-location__input-wrapper"},ce={class:"label"},de={class:"ccb-multiply-location__description"},re={key:0},ue={key:1,class:"ccb-multiply-location__adressname"},pe={class:"ccb-location-modal"},me={class:"ccb-location-modal__body"},_e={class:"ccb-location-modal__sidebar"},ve={class:"ccb-location-modal__title"},ge={class:"ccb-location-modal__locations"},fe=["name","value","checked"],ye={class:"ccb-radio-label"},be=["id"],he={class:"ccb-location-modal__footer"},ke=$({__name:"MultiplyLocation",props:{field:{}},setup(C){const v=X(),N=Y(),i=ae(),w=ee(),M=te(),x=C,{field:e}=K(x),g=L(),{getGoogleApiKey:F,mapOptions:T,generateId:B,parseLocationCoordinates:n,generateGoogleLink:V,getMeasure:I,getPickUpIconPath:h}=oe(),E=new se({apiKey:F(),version:"weekly",libraries:["places","geometry"]});let k=B(4),f=L(!0);const z=()=>{g.value.showPopup()},u=()=>{g.value.hidePopup()};let p;const A=()=>{let t=e.value.multiplyLocations[0].coordinates;E.load().then(()=>{const a=document.getElementById(k);a&&(p=new google.maps.Map(a,{...T(),center:{...n(t)}}),P.value.forEach(l=>{let m={position:n(l.coordinates),map:p};h()&&(m.icon={url:h(),scaledSize:new google.maps.Size(40,40)}),new google.maps.Marker(m)}))})},D=()=>{let t=e.value.multiplyLocations[0].coordinates;e.value.selectedPoint={addressName:"",coordinates:t,label:""},f.value=!0,y(),u()},G=()=>{if(e.value.selectedPoint.addressName){f.value=!1;const t={addressName:e.value.selectedPoint.addressName,coordinates:n(e.value.selectedPoint.coordinates),addressLink:V(n(e.value.selectedPoint.coordinates)),measure:I()};e.value.userSelectedOptions=t,y(),u()}else u()},O=S(()=>{let t=e.value.selectedPoint.label||e.value.selectedPoint.addressName||"";return t.length>15?t.slice(0,25)+"...":t}),y=(t,a)=>{t&&t!==e.value.alias||(e.value.displayValue=O.value,v.updateField(e.value.alias,e.value,a),N.applyConditionForField(e.value.alias),v.getPageBreakEnabled&&v.getActivePage.action==="not_skip"&&M.checkPageFieldsConditions())};w.add("updateGeolocation",t=>{setTimeout(()=>{y(t,!0)},100)});const P=S(()=>Array.isArray(e.value.multiplyLocations)?e.value.multiplyLocations:[]);return R(()=>e.value.selectedPoint,t=>{t&&t.coordinates&&(p.panTo(n(t.coordinates)),p.setZoom(15))},{deep:!0}),U(()=>{A()}),(t,a)=>(d(),c("div",ie,[s("div",ne,[s("button",{class:"ccb-multiply-location__action",onClick:z},[a[1]||(a[1]=s("span",{class:"icon"},[s("i",{class:"ccb-icon-location"})],-1)),s("span",ce,r(o(i).getTranslations.openMap),1)]),s("div",de,[o(e).selectedPoint.addressName?(d(),c("span",ue,r(o(e).selectedPoint.addressName),1)):(d(),c("span",re,r(o(i).getTranslations.chooseFromMap),1))])]),_(W,{ref_key:"popup",ref:g},{default:j(()=>[s("div",pe,[s("div",me,[s("div",_e,[s("div",ve,r(o(i).getTranslations.selectLocation),1),s("div",ge,[(d(!0),c(H,null,Z(P.value,l=>(d(),c("div",{key:l.addressName,class:"ccb-default-radio"},[s("label",null,[q(s("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(e).selectedPoint=m),type:"radio",name:l.label,value:l,checked:o(e).selectedPoint.addressName===l.addressName},null,8,fe),[[J,o(e).selectedPoint]]),s("span",ye,r(l.label.length?l.label:l.addressName),1)])]))),128))])]),s("div",{id:o(k),class:"ccb-location-modal__map"},null,8,be)]),s("div",he,[_(b,{type:"light",text:o(i).getTranslations.clearLocation,class:Q(["clear",{disable:o(f)}]),onClick:D},null,8,["text","class"]),_(b,{type:"light",text:o(i).getTranslations.cancel,onClick:u},null,8,["text"]),_(b,{type:"success",text:o(i).getTranslations.saveLocation,onClick:G},null,8,["text"])])])]),_:1},512)]))}}),xe=le(ke,[["__scopeId","data-v-d8f7a388"]]);export{xe as default};
//# sourceMappingURL=MultiplyLocation-DkUd9Tfu.js.map

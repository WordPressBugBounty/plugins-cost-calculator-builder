{"version":3,"file":"Modern-CPsPhTNi.js","sources":["../../src/widget/features/calculator-fields/components/Range/styles/Modern.vue"],"sourcesContent":["<template>\n  <div\n    class=\"slider-wrapper ccb-modern-range-field\"\n    :class=\"{ jump: field.jump }\"\n  >\n    <div class=\"slider-min-max\">\n      <div class=\"slider-min-max-item first\" @click=\"handleClick(min)\">\n        <span class=\"label\">{{ min }}</span>\n      </div>\n      <div\n        class=\"slider-min-max-item\"\n        :class=\"{ done: value >= max }\"\n        @click=\"handleClick(max)\"\n      >\n        <span class=\"label\">{{ max }}</span>\n      </div>\n    </div>\n    <Slider\n      v-model=\"value\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"step\"\n      :disabled=\"field.disabled\"\n      show-tooltip=\"focus\"\n      class=\"custom-slider\"\n      :format=\"getFormatValue\"\n    />\n    <div class=\"custom-ticks\">\n      <div v-for=\"tick in 25\" :key=\"tick\" class=\"tick\" />\n    </div>\n    <div class=\"custom-marks\">\n      <div class=\"stick-line\">\n        <div class=\"stick-line-item\"></div>\n      </div>\n      <div\n        v-for=\"point in scalePoints\"\n        :key=\"point\"\n        class=\"mark\"\n        :style=\"getMarkStyle(point)\"\n        v-if=\"field.scalePoints\"\n      >\n        <div\n          class=\"label\"\n          @click=\"handleClick(point)\"\n          v-if=\"point !== min && point !== max\"\n        >\n          {{ point }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, watch, ref } from \"vue\";\nimport Slider from \"@vueform/slider\";\nimport { IRangeField } from \"@/widget/shared/types/fields\";\n\ntype Props = {\n  field: IRangeField;\n  modelValue: number;\n};\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<{\n  (event: \"update:modelValue\", value: number): void;\n}>();\n\nconst realValue = ref(props.modelValue);\n\nconst { field } = toRefs(props);\n\nconst value = computed({\n  get: () => props.modelValue,\n  set: (val) => emit(\"update:modelValue\", val),\n});\n\nconst min = computed(() => Number(field.value.min));\nconst max = computed(() => Number(field.value.max));\nconst step = computed(() =>\n  field.value.jump ? 1 : Number(field.value.step || 1),\n);\nconst jump = computed(() => field.value.jump);\n\nconst scalePoints = computed(() => {\n  const raw = field.value.scalePoints?.trim() || \"\";\n  return raw\n    .split(\",\")\n    .map((p) => Number(p.trim()))\n    .filter((p) => !isNaN(p) && p >= min.value && p <= max.value);\n});\n\nconst getMarkStyle = (point: number) => {\n  const percentage = ((point - min.value) / (max.value - min.value)) * 100;\n  return {\n    left: `${percentage}%`,\n  };\n};\n\nconst handleClick = (point: number) => {\n  if (jump.value && scalePoints.value.includes(point)) {\n    emit(\"update:modelValue\", point);\n  }\n};\n\nconst getFormatValue = (num: number): string => {\n  const rounded = num.toFixed(2);\n  return parseFloat(rounded).toString();\n};\n\nwatch(\n  () => props.modelValue,\n  (val) => {\n    realValue.value = val;\n  },\n);\n\nwatch(realValue, (val) => {\n  if (jump.value) {\n    const closestPoint = scalePoints.value.reduce(\n      (prev, curr) =>\n        Math.abs(curr - val) < Math.abs(prev - val) ? curr : prev,\n      scalePoints.value[0],\n    );\n    emit(\"update:modelValue\", closestPoint);\n  } else {\n    emit(\"update:modelValue\", val);\n  }\n});\n</script>\n\n<style lang=\"scss\">\n.ccb-modern-range-field {\n  padding: 10px 3px 40px 3px;\n  position: relative;\n\n  .slider-origin {\n    width: 96%;\n    right: 8px;\n  }\n\n  .slider-min-max {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    top: 33px;\n\n    &-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n\n      &.first {\n        .tick {\n          background: var(--ccb-accent-color);\n        }\n      }\n\n      &.done {\n        .tick {\n          background-color: var(--ccb-accent-color);\n        }\n      }\n    }\n\n    .tick {\n      height: 8px;\n      width: 8px;\n      border-radius: 50%;\n      background: color-mix(in srgb, var(--ccb-container-color), black 10%);\n      margin: 0 auto 4px;\n    }\n\n    .label {\n      color: var(--ccb-fields-description-color);\n      font-size: 12px;\n      font-weight: 500;\n      line-height: 100%;\n      padding-top: 8px;\n      pointer-events: none;\n    }\n  }\n\n  &.jump {\n    .slider-handle {\n      pointer-events: none;\n    }\n\n    .slider-min-max-item {\n      .label {\n        cursor: pointer;\n        pointer-events: auto;\n      }\n    }\n\n    .custom-marks {\n      .label {\n        cursor: pointer;\n        pointer-events: auto;\n      }\n    }\n  }\n\n  .slider-handle {\n    z-index: 1;\n\n    &.slider-active {\n      border: 1px solid var(--ccb-fields-border-color);\n    }\n  }\n\n  .slider-base {\n    height: 20px;\n    width: 100%;\n  }\n\n  .slider-tooltip {\n    margin-bottom: 16px !important;\n  }\n\n  .slider-handle {\n    background-color: #fff !important;\n    height: 31px !important;\n    width: 28px !important;\n    border-radius: 4px;\n    box-shadow: 0px 5px 30px 0px rgba(0, 0, 0, 0.1);\n    transform: translateX(7px);\n  }\n\n  .slider-connect {\n    background: linear-gradient(\n      90deg,\n      rgba(238, 241, 247, 0) 0%,\n      var(--ccb-accent-color) 100%\n    ) !important;\n  }\n\n  .custom-marks {\n    position: absolute;\n    right: 8px;\n    top: 30px;\n    width: 96%;\n  }\n\n  .mark {\n    position: absolute;\n    transform: translateX(-50%);\n    text-align: center;\n\n    .label {\n      color: var(--ccb-fields-description-color);\n      font-size: 12px;\n      font-weight: 500;\n      line-height: 100%;\n      padding-top: 10px;\n      pointer-events: none;\n    }\n  }\n\n  .custom-ticks {\n    width: 98%;\n    height: 0;\n    pointer-events: none;\n    display: flex;\n    justify-content: space-between;\n    top: 10px;\n    position: absolute;\n    padding: 0 10px;\n    box-sizing: border-box;\n  }\n\n  .tick {\n    width: 1px;\n    height: 20px;\n    background: rgba(0, 0, 0, 0.04);\n    transform: translateX(-50%);\n  }\n}\n</style>\n"],"names":["props","__props","emit","__emit","realValue","ref","field","toRefs","value","computed","val","min","max","step","jump","scalePoints","_a","p","getMarkStyle","point","handleClick","getFormatValue","num","rounded","watch","closestPoint","prev","curr"],"mappings":"4bA+DA,MAAMA,EAAQC,EACRC,EAAOC,EAIPC,EAAYC,EAAIL,EAAM,UAAU,EAEhC,CAAE,MAAAM,CAAA,EAAUC,EAAOP,CAAK,EAExBQ,EAAQC,EAAS,CACrB,IAAK,IAAMT,EAAM,WACjB,IAAMU,GAAQR,EAAK,oBAAqBQ,CAAG,CAAA,CAC5C,EAEKC,EAAMF,EAAS,IAAM,OAAOH,EAAM,MAAM,GAAG,CAAC,EAC5CM,EAAMH,EAAS,IAAM,OAAOH,EAAM,MAAM,GAAG,CAAC,EAC5CO,EAAOJ,EAAS,IACpBH,EAAM,MAAM,KAAO,EAAI,OAAOA,EAAM,MAAM,MAAQ,CAAC,CACrD,EACMQ,EAAOL,EAAS,IAAMH,EAAM,MAAM,IAAI,EAEtCS,EAAcN,EAAS,IAAM,OAE1B,SADKO,EAAAV,EAAM,MAAM,cAAZ,YAAAU,EAAyB,SAAU,IAE5C,MAAM,GAAG,EACT,IAAKC,GAAM,OAAOA,EAAE,KAAA,CAAM,CAAC,EAC3B,OAAQA,GAAM,CAAC,MAAMA,CAAC,GAAKA,GAAKN,EAAI,OAASM,GAAKL,EAAI,KAAK,CAAA,CAC/D,EAEKM,EAAgBC,IAEb,CACL,KAAM,IAFaA,EAAQR,EAAI,QAAUC,EAAI,MAAQD,EAAI,OAAU,GAEhD,GACrB,GAGIS,EAAeD,GAAkB,CACjCL,EAAK,OAASC,EAAY,MAAM,SAASI,CAAK,GAChDjB,EAAK,oBAAqBiB,CAAK,CAEnC,EAEME,EAAkBC,GAAwB,CACxC,MAAAC,EAAUD,EAAI,QAAQ,CAAC,EACtB,OAAA,WAAWC,CAAO,EAAE,SAAS,CACtC,EAEA,OAAAC,EACE,IAAMxB,EAAM,WACXU,GAAQ,CACPN,EAAU,MAAQM,CAAA,CAEtB,EAEMc,EAAApB,EAAYM,GAAQ,CACxB,GAAII,EAAK,MAAO,CACR,MAAAW,EAAeV,EAAY,MAAM,OACrC,CAACW,EAAMC,IACL,KAAK,IAAIA,EAAOjB,CAAG,EAAI,KAAK,IAAIgB,EAAOhB,CAAG,EAAIiB,EAAOD,EACvDX,EAAY,MAAM,CAAC,CACrB,EACAb,EAAK,oBAAqBuB,CAAY,CAAA,MAEtCvB,EAAK,oBAAqBQ,CAAG,CAC/B,CACD"}
import{d as K,B as R,e as L,f as C,z as U,k as H,c,o as d,l as s,a as _,L as r,u as t,F as Z,M as j,I as q,w as J,a2 as Q,E as W}from"./runtime-dom.esm-bundler-q8x4SZ5d.js";import{_ as f,b as X}from"./ThankYouPage-VtHWX-ye.js";import{f as Y,n as ee,m as se,i as oe,k as te}from"./widget-G8qGMCyR.js";import{L as ae,u as le}from"./index-CKR6bjwQ.js";import{u as ne}from"./translationsStore-C4wu_Y0X.js";import"./jquery-C7OTzgKr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ie={class:"ccb-user-location"},ce={class:"ccb-user-location__input-wrapper"},de={class:"label"},re={class:"ccb-user-location__description"},ue={key:0},pe={key:1,class:"ccb-user-location__adressname"},me={class:"ccb-location-modal"},_e={class:"ccb-location-modal__body"},ve={class:"ccb-location-modal__sidebar"},ge={class:"ccb-location-modal__title"},be={class:"ccb-location-modal__locations"},fe=["name","value","checked"],he={class:"ccb-radio-label"},ye=["id"],ke={class:"ccb-location-modal__footer"},Fe=K({__name:"MultiplyLocation",props:{field:{}},setup(N){const h=oe(),S=te(),w=Y(),M=ee(),n=ne(),F=se(),x=N,{field:e}=R(x),v=L(),{getGoogleApiKey:T,mapOptions:V,generateId:B,parseLocationCoordinates:i,generateGoogleLink:I,getMeasure:E,getPickUpIconPath:y}=le(),z=new ae({apiKey:T(),version:"weekly",libraries:["places","geometry"]});let k=B(4),g=L(!0);const A=()=>{v.value.showPopup()},u=()=>{v.value.hidePopup()};let p;const D=()=>{let o=e.value.multiplyLocations[0].coordinates;z.load().then(()=>{const l=document.getElementById(k);l&&(p=new google.maps.Map(l,{...V(),center:{...i(o)}}),P.value.forEach(a=>{let m={position:i(a.coordinates),map:p};y()&&(m.icon={url:y(),scaledSize:new google.maps.Size(40,40)}),new google.maps.Marker(m)}))})},G=()=>{let o=e.value.multiplyLocations[0].coordinates;e.value.selectedPoint={addressName:"",coordinates:o,label:""},g.value=!0,b(),u()},O=()=>{if(e.value.selectedPoint.addressName){g.value=!1;const o={addressName:e.value.selectedPoint.addressName,coordinates:i(e.value.selectedPoint.coordinates),addressLink:I(i(e.value.selectedPoint.coordinates)),measure:E()};e.value.userSelectedOptions=o,b(),u()}else u()},$=C(()=>{let o=e.value.selectedPoint.label??e.value.selectedPoint.addressName??"";return o.length>15?o.slice(0,25)+"...":o}),b=()=>{e.value.displayValue=$.value,w.updateField(e.value.alias,e.value),M.applyConditionForField(e.value.alias),h.getPageBreakEnabled()&&h.getActivePage().action==="not_skip"&&S.checkPageFieldsConditions()};F.add("updateGeolocation",()=>{setTimeout(()=>{b()},100)});const P=C(()=>Array.isArray(e.value.multiplyLocations)?e.value.multiplyLocations:[]);return U(()=>e.value.selectedPoint,o=>{o&&o.coordinates&&(p.panTo(i(o.coordinates)),p.setZoom(15))},{deep:!0}),H(()=>{D()}),(o,l)=>(d(),c("div",ie,[s("div",ce,[s("button",{class:"ccb-user-location__action",onClick:A},[l[1]||(l[1]=s("span",{class:"icon"},[s("i",{class:"ccb-icon-location"})],-1)),s("span",de,r(t(n).getTranslations.openMap),1)]),s("div",re,[t(e).selectedPoint.addressName?(d(),c("span",pe,r(t(e).selectedPoint.addressName),1)):(d(),c("span",ue,r(t(n).getTranslations.chooseFromMap),1))])]),_(X,{ref_key:"popup",ref:v},{default:Z(()=>[s("div",me,[s("div",_e,[s("div",ve,[s("div",ge,r(t(n).getTranslations.selectLocation),1),s("div",be,[(d(!0),c(j,null,q(P.value,a=>(d(),c("div",{key:a.addressName,class:"ccb-default-radio"},[s("label",null,[J(s("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>t(e).selectedPoint=m),type:"radio",name:a.label,value:a,checked:t(e).selectedPoint.addressName===a.addressName},null,8,fe),[[Q,t(e).selectedPoint]]),s("span",he,r(a.label.length?a.label:a.addressName),1)])]))),128))])]),s("div",{id:t(k),class:"ccb-location-modal__map"},null,8,ye)]),s("div",ke,[_(f,{type:"light",text:t(n).getTranslations.clearLocation,class:W(["clear",{disable:t(g)}]),onClick:G},null,8,["text","class"]),_(f,{type:"light",text:t(n).getTranslations.cancel,onClick:u},null,8,["text"]),_(f,{type:"success",text:t(n).getTranslations.saveLocation,onClick:O},null,8,["text"])])])]),_:1},512)]))}});export{Fe as default};
//# sourceMappingURL=MultiplyLocation-D6lcCEQU.js.map

{"version":3,"file":"OrderCheckbox-C0W38yrl.js","sources":["../../src/widget/features/submission/order-form/fields/OrderCheckbox.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-order-field ccb-order-checkbox\"\n    :class=\"{\n      [`ccb-col-${field.fieldWidth}`]: true,\n      'ccb-order-field--required': isRequired,\n    }\"\n  >\n    <div class=\"ccb-order-field__wrapper\">\n      <div class=\"ccb-order-field__title\">\n        <RequiredHint\n          v-if=\"isRequired\"\n          :text=\"translationsStore.getTranslations.requiredField\"\n        />\n        <label class=\"ccb-order-field__label\">\n          {{ field.label }}\n          <span class=\"ccb-order-required-mark\" v-if=\"field.required\">*</span>\n        </label>\n      </div>\n      <div\n        class=\"ccb-default-checkbox\"\n        :class=\"{ [field.attributes?.display || '']: true }\"\n      >\n        <label\n          :for=\"field.id + 'order_checkbox_' + idx\"\n          v-for=\"(option, idx) in field.attributes.options\"\n          :key=\"idx\"\n        >\n          <input\n            type=\"checkbox\"\n            :id=\"field.id + 'order_checkbox_' + idx\"\n            :name=\"getName\"\n            :value=\"option.optionText\"\n            :checked=\"selectedValues.includes(idx)\"\n            @change=\"() => selectValue(idx)\"\n          />\n          <span class=\"ccb-checkbox-label\">{{ option.optionText }}</span>\n        </label>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { IFormField } from \"@/widget/shared/types/fields\";\nimport { computed, toRefs } from \"vue\";\nimport { useOrderForm } from \"@/widget/actions/pro-features/order-form/composable/useOrderForm.ts\";\nimport { useOrderFormFieldsRequired } from \"@/widget/actions/pro-features/order-form/composable/useOrderFormFieldsRequired.ts\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\n\ntype Props = {\n  field: IFormField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst { checkFieldRequired } = useOrderFormFieldsRequired();\nconst translationsStore = useTranslationsStore();\n\nconst isRequired = computed(() => {\n  if (!field.value.required) return false;\n  return checkFieldRequired(field.value);\n});\n\nconst selectedValues = computed((): number[] => {\n  return field.value.selectedIdx || [];\n});\n\nconst getName = computed(() => {\n  return Math.random().toString(36).substring(2, 15);\n});\n\nconst selectValue = (idx: number): void => {\n  let newValues: number[] = field.value.selectedIdx || [];\n  if (selectedValues.value.includes(idx)) {\n    newValues =\n      field.value.selectedIdx?.filter((innerIdx) => innerIdx !== idx) || [];\n  } else {\n    newValues.push(idx);\n  }\n\n  let values: string[] = [];\n  const options = field.value?.attributes?.options || [];\n  for (let i = 0; i < options.length; i++) {\n    const option = options[i];\n    if (newValues.includes(i)) {\n      values.push(option.optionText || \"\");\n    }\n  }\n\n  const { updateValue } = useOrderForm();\n  field.value.value = values;\n  updateValue(field.value.id, field.value.value, newValues);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ccb-order-checkbox {\n  .ccb-order-field__title {\n    position: relative;\n    width: fit-content;\n  }\n\n  .ccb-default-checkbox {\n    &.vertical {\n      flex-direction: column;\n    }\n  }\n}\n\n.ccb-default-checkbox {\n  display: flex;\n  gap: 10px;\n  font-size: var(--ccb-field-size);\n  font-weight: var(--ccb-field-weight);\n  color: var(--ccb-text-color);\n  padding: 5px 0px;\n\n  @media only screen and (max-width: 480px) {\n    font-size: var(--ccb-mobile-field-size);\n    font-weight: var(--ccb-mobile-field-weight);\n  }\n\n  label {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    padding: 0;\n    margin: 0;\n    cursor: pointer;\n    line-height: 1.4;\n    width: fit-content;\n    padding: 0 0 0 25px;\n    position: relative;\n\n    &:before {\n      left: 0;\n      content: \"\";\n      max-width: 20px;\n      min-width: 20px;\n      max-height: 20px;\n      min-height: 20px;\n      height: 20px;\n      width: 20px;\n      position: absolute;\n      margin: 0 !important;\n      background-color: var(--ccb-field-bg-color);\n      border: 2px solid var(--ccb-fields-border-color);\n      transition: transform 0.28s ease;\n      box-sizing: border-box;\n      border-radius: 3px;\n    }\n\n    &:after {\n      left: 5px;\n      height: 5px;\n      width: 10px;\n      content: \"\";\n      display: block;\n      position: absolute;\n      border-left: 2px solid #fff;\n      border-bottom: 2px solid #fff;\n      transition: transform ease 0.25s;\n      transform: rotate(-45deg) scale(0) translateY(-10%);\n      box-sizing: border-box;\n    }\n\n    input {\n      display: none;\n    }\n\n    .ccb-checkbox-label {\n      word-break: break-word;\n    }\n  }\n\n  label:has(input[type=\"checkbox\"]:checked):before {\n    background: var(--ccb-accent-color);\n    border-color: var(--ccb-accent-color);\n  }\n\n  label:has(input[type=\"checkbox\"]:checked):after {\n    transform: rotate(-45deg) scale(1) translateY(-10%);\n  }\n}\n</style>\n"],"names":["props","__props","field","toRefs","checkFieldRequired","useOrderFormFieldsRequired","translationsStore","useTranslationsStore","isRequired","computed","selectedValues","getName","selectValue","idx","newValues","_a","innerIdx","values","options","_c","_b","i","option","updateValue","useOrderForm"],"mappings":"4sBAuDA,MAAMA,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExB,CAAE,mBAAAI,CAAmB,EAAIC,EAA2B,EACpDC,EAAoBC,EAAqB,EAEzCC,EAAaC,EAAS,IACrBP,EAAM,MAAM,SACVE,EAAmBF,EAAM,KAAK,EADH,EAEnC,EAEKQ,EAAiBD,EAAS,IACvBP,EAAM,MAAM,aAAe,CAAC,CACpC,EAEKS,EAAUF,EAAS,IAChB,KAAK,SAAS,SAAS,EAAE,EAAE,UAAU,EAAG,EAAE,CAClD,EAEKG,EAAeC,GAAsB,WACzC,IAAIC,EAAsBZ,EAAM,MAAM,aAAe,CAAC,EAClDQ,EAAe,MAAM,SAASG,CAAG,EAEjCC,IAAAC,EAAAb,EAAM,MAAM,cAAZ,YAAAa,EAAyB,OAAQC,GAAaA,IAAaH,KAAQ,CAAC,EAEtEC,EAAU,KAAKD,CAAG,EAGpB,IAAII,EAAmB,CAAC,EACxB,MAAMC,IAAUC,GAAAC,EAAAlB,EAAM,QAAN,YAAAkB,EAAa,aAAb,YAAAD,EAAyB,UAAW,CAAC,EACrD,QAASE,EAAI,EAAGA,EAAIH,EAAQ,OAAQG,IAAK,CACjC,MAAAC,EAASJ,EAAQG,CAAC,EACpBP,EAAU,SAASO,CAAC,GACfJ,EAAA,KAAKK,EAAO,YAAc,EAAE,CACrC,CAGI,KAAA,CAAE,YAAAC,CAAY,EAAIC,EAAa,EACrCtB,EAAM,MAAM,MAAQe,EACpBM,EAAYrB,EAAM,MAAM,GAAIA,EAAM,MAAM,MAAOY,CAAS,CAC1D"}
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./widget-DjdrLe91.css","./RequiredHint-uxu_wpFZ.css","./index-BGrcVZ_9.css","./OrderEmail-CDL72wGN.css","./OrderPhone-DLhTHF1_.css","./OrderTextarea-BeyyFHRz.css","./OrderNumber-C85wQNJC.css","./OrderSpace-DPu2rkSM.css","./OrderRadio-O_dAVVhO.css","./OrderCheckbox-Deqpj7bR.css","./OrderDate-TdMkE5W0.css","./main-CWmBI_q2.css","./index-BjxbVEsn.css"])))=>i.map(i=>d[i]);
import{g as a,d as N,B as K,f as n,h as A,o as i,i as _e,u as p,c as _,E as R,l as g,m as C,w as pe,a1 as fe,N as U,L as W,e as B,k as be,a as O,M as D,I as ge,F as ve,T as ye}from"./runtime-dom.esm-bundler-q8x4SZ5d.js";import{a as Q,s as Se,h as xe,c as Fe,b as Te,e as V,d as j,f as G,i as Ee}from"./widget-Cj68DUPx.js";import{c as ke}from"./index-Bej8zaNp.js";import{_ as c}from"./translationsStore-C4wu_Y0X.js";import{c as he,_ as J}from"./ThankYouPage-CUaAd84R.js";import{_ as Ce}from"./RequiredHint.vue_vue_type_style_index_0_lang-D9F99cWG.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const we=v=>new DOMParser().parseFromString("<!doctype html><body>"+v,"text/html").body.textContent||"",Ie={name:a(()=>c(()=>import("./OrderName-CuJQ0Hxa.js"),__vite__mapDeps([0,1]),import.meta.url)),dropdown:a(()=>c(()=>import("./index-DO297dOz.js"),__vite__mapDeps([0,1,2]),import.meta.url)),email:a(()=>c(()=>import("./OrderEmail-Byqaghva.js"),__vite__mapDeps([0,1,3]),import.meta.url)),phone:a(()=>c(()=>import("./OrderPhone-CQyDiNx4.js"),__vite__mapDeps([0,1,4]),import.meta.url)),text:a(()=>c(()=>import("./OrderText-kXZRUJ-j.js"),__vite__mapDeps([0,1]),import.meta.url)),textarea:a(()=>c(()=>import("./OrderTextarea-iAeoBw52.js"),__vite__mapDeps([0,1,5]),import.meta.url)),"input-textbox":a(()=>c(()=>import("./OrderTextBox-DkL88fXV.js"),__vite__mapDeps([0,1]),import.meta.url)),number:a(()=>c(()=>import("./OrderNumber-DkmyB8u2.js"),__vite__mapDeps([0,1,6]),import.meta.url)),space:a(()=>c(()=>import("./OrderSpace-Btv9uxJQ.js"),__vite__mapDeps([7]),import.meta.url)),radio:a(()=>c(()=>import("./OrderRadio-CwjUi0c1.js"),__vite__mapDeps([0,1,8]),import.meta.url)),checkbox:a(()=>c(()=>import("./OrderCheckbox-Bb0DnQZK.js"),__vite__mapDeps([0,1,9]),import.meta.url)),"formatted-text":a(()=>c(()=>import("./OrderFormattedText-BjHUJACj.js"),[],import.meta.url)),"date-picker":a(()=>c(()=>import("./OrderDate-DN8pr8LT.js"),__vite__mapDeps([0,1,10,11]),import.meta.url)),"time-picker":a(()=>c(()=>import("./index-P2BVNNnX.js"),__vite__mapDeps([0,1,12,11]),import.meta.url))},Oe=N({__name:"OrderFormItem",props:{name:{},field:{}},setup(v){const m=v,{field:f,name:x}=K(m),F=n(()=>{const l=x.value;return Ie[l]||""});return(l,T)=>(i(),A(_e(F.value),{field:p(f)},null,8,["field"]))}}),De={class:"ccb-order-field__wrapper"},Le={for:"terms_and_conditions"},Pe={class:"ccb-checkbox-label"},Be=["href"],Ve=N({__name:"TermsAndConditions",setup(v){const m=Q(),f=n({get(){var r,t;return((t=(r=m.getFormSettings)==null?void 0:r.termsAndConditions)==null?void 0:t.checkbox)||!1},set(r){m.updateTermsValue(r)}}),x=n(()=>{var r,t;return((t=(r=m.getFormSettings)==null?void 0:r.termsAndConditions)==null?void 0:t.text)||""}),F=n(()=>{var r,t;return((t=(r=m.getWarningTexts)==null?void 0:r.formFields)==null?void 0:t.termsAndConditionsField)||"Please, check out our terms and click on the checkbox"}),l=n(()=>m.checkTermsAndConditionsApproved),T=n(()=>{var r,t;return((t=(r=m.getFormSettings)==null?void 0:r.termsAndConditions)==null?void 0:t.linkText)||""}),u=n(()=>{var r,t;return((t=(r=m.getFormSettings)==null?void 0:r.termsAndConditions)==null?void 0:t.link)||""});return(r,t)=>(i(),_("div",{class:R(["ccb-default-checkbox ccb-terms-check",{"ccb-terms-and-conditions-required":l.value}])},[g("div",De,[l.value?(i(),A(Ce,{key:0,text:F.value},null,8,["text"])):C("",!0),g("label",Le,[pe(g("input",{type:"checkbox",id:"terms_and_conditions",name:"terms_and_conditions","onUpdate:modelValue":t[0]||(t[0]=E=>f.value=E),value:!0},null,512),[[fe,f.value]]),g("span",Pe,[U(W(x.value)+" ",1),g("a",{href:u.value,target:"_blank"},[U(W(T.value)+" ",1),t[1]||(t[1]=g("i",{class:"ccb-icon-click-out"},null,-1))],8,Be)])])])],2))}}),Re=Ae(Ve,[["__scopeId","data-v-2bd1d70a"]]),Ne={key:0,class:"ccb-order-form__submit ccb-col-12"},$e=["innerHTML"],Me={key:1,class:"ccb-order-form__submit ccb-col-12"},Je=N({__name:"OrderFormList",props:{payment:{type:Boolean}},setup(v){const m=v,{payment:f}=K(m),{formFields:x,validateOrderFormSettings:F}=Se(),l=xe(),T=Fe(),u=Q(),r=Te(),t=B(null),E=B(!1),$=Ee(),X=n(()=>{var e;return((e=u.getFormSettings)==null?void 0:e.openModalBtnText)||"Make Order"}),Y=n(()=>{var o,s;const e=(o=u.getFormSettings)==null?void 0:o.summaryDisplay;return I.value==="woocommerce"?"Add to cart":e!=null&&e.enable?e.submitBtnText||"View Summary":((s=u.getFormSettings)==null?void 0:s.submitBtnText)||"Submit Order"}),k=B(!1),w=n(()=>r.getIsLive),Z=()=>{if(w.value){k.value=!0,setTimeout(()=>{k.value=!1},5e3);return}(I.value==="woocommerce"||!F())&&T.submissionCreateOrder()},ee=e=>{const o=e.detail.inputs.map(s=>({label:s.name||"",value:s.value.replace(/\n/g," ")||"",attributes:{label:s.name||"",type:s.name||""}}));T.submissionCreateOrder(o)},M=n(()=>{const e=V(),o=j();return f.value?o.isPaymentAfterSubmit&&o.getSubmit?!1:e.showForm:!0}),I=n(()=>V().paymentType),te=n(()=>{var o;if((o=u.getFormSettings)!=null&&o.contactFormId)return!1;const e=j();return!(e.isPaymentAfterSubmit&&e.getSubmit)}),q=n(()=>{const e=G(),o=V();return M.value?!1:o.paymentType&&!e.checkRequiredFields()?!0:!o.paymentType}),oe=()=>{G().checkRequiredFields()&&(l.updateNextButtonStatus(!1),l.updateNextButton(!0),E.value=!0,setTimeout(()=>{ie()}))},re=n(()=>{const o=`ccb_front_template_${r.getCalcId}`,s=window[o];return s&&"cf7_form"in s?s.cf7_form:""}),se=()=>{var s;if(t.value=document.querySelector(`#ccb_app_${r.getCalcId}`),!t.value||((s=t.value)==null?void 0:s.getElementsByClassName("ccb-contact-form7").length)<=0||t.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form").length<=0)return;let e=t.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form")[0];[...e.getElementsByTagName("p")].forEach(d=>{d.classList.contains("ccb-hidden")&&(d.classList.remove("ccb-hidden"),d.style.display="block")}),e.getElementsByClassName("wpcf7-response-output").length>0&&(e.getElementsByClassName("wpcf7-response-output")[0].innerHTML="")},ne=e=>{var o;e.preventDefault(),!w.value&&E.value&&(ee(e),E.value=!1,((o=e==null?void 0:e.detail)==null?void 0:o.status)==="mail_sent"&&l.updateContactFormDisabled(!0))},ae=()=>{var e,o,s,d,h,y;if((e=u.getFormSettings)!=null&&e.contactFormId){let S=(o=u.getFormSettings)==null?void 0:o.body;const L=(s=t.value)==null?void 0:s.querySelector(".wpcf7-form");if(S.indexOf("[ccb-subtotal]")!==-1){let b=$.parseContactFormDescriptions();S=S.replaceAll("[ccb-subtotal]",b)}const me=(h=(d=u.getFormSettings)==null?void 0:d.formulas)==null?void 0:h.map(b=>b.alias),le=$.parseContactFormTotals(me),ue=/\[ccb-total(?:-\d+)?\]/g;S=S.replaceAll(ue,`${le}
`);const H=L==null?void 0:L.querySelector("textarea");if(H&&(H.value=we(S)),window.wpcf7&&"init"in window.wpcf7){const b=(y=t.value)==null?void 0:y.querySelectorAll(".wpcf7 > form");b==null||b.forEach(P=>{var z;(z=window.wpcf7)==null||z.init(P),w.value&&P.addEventListener("submit",de=>{de.preventDefault(),k.value=!0,setTimeout(()=>{k.value=!1},5e3)})})}}},ce=()=>{document.addEventListener("wpcf7mailsent",ne,!1)},ie=()=>{se(),ce(),ae()};return be(()=>{}),(e,o)=>{var s,d,h;return i(),_("div",{class:R(["ccb-order-form",{"ccb-order-form-legacy":!((s=p(u).getFormSettings)!=null&&s.contactFormId),"is-live-form":!p(l).getNextButtonStatus&&w.value}])},[O(he),p(l).getNextButtonStatus&&I.value!=="woocommerce"?(i(),_("div",Ne,[O(J,{type:"success",text:X.value,"on-click":oe,disabled:q.value},null,8,["text","disabled"])])):(i(),_(D,{key:1},[M.value&&I.value!=="woocommerce"?(i(),_(D,{key:0},[(d=p(u).getFormSettings)!=null&&d.contactFormId?(i(),_("div",{key:0,class:R(["ccb-contact-form7",{"calc-cf7-disabled":p(l).getContactFormDisabled}])},[g("div",{class:"ccb-contact-form7-container",innerHTML:re.value},null,8,$e)],2)):(i(),_(D,{key:1},[(i(!0),_(D,null,ge(p(x),y=>(i(),A(Oe,{field:y,key:y.id,name:y.type},null,8,["field","name"]))),128)),(h=p(u).getFormSettings)!=null&&h.accessTermsEmail?(i(),A(Re,{key:0})):C("",!0)],64))],64)):C("",!0),te.value?(i(),_("div",Me,[O(J,{type:"success",text:Y.value,"on-click":Z,disabled:q.value},null,8,["text","disabled"])])):C("",!0),O(ye,{name:"fade"},{default:ve(()=>[k.value?(i(),A(ke,{key:0})):C("",!0)]),_:1})],64))],2)}}});export{Je as _};
//# sourceMappingURL=OrderFormList.vue_vue_type_style_index_0_lang-Bxno5caV.js.map

{"version":3,"file":"OrderTextarea-BXqlThl4.js","sources":["../../src/widget/features/submission/order-form/fields/OrderTextarea.vue"],"sourcesContent":["<template>\n  <div\n    class=\"ccb-order-field ccb-order-textarea\"\n    :class=\"{\n      [`ccb-col-${field.fieldWidth}`]: true,\n      'ccb-order-field--required': isRequired,\n    }\"\n  >\n    <div class=\"ccb-order-field__wrapper\">\n      <div v-if=\"isRequired\" class=\"ccb-required-tooltip\">\n        <RequiredHint\n          v-if=\"requiredType === 'characterLimit'\"\n          :text=\"\n            field.attributes.characterLimit +\n            translationsStore.getTranslations.charactersMax\n          \"\n        />\n        <RequiredHint\n          v-else\n          :text=\"translationsStore.getTranslations.requiredField\"\n        />\n      </div>\n      <label class=\"ccb-order-field__label\">\n        {{ field.label }}\n        <span class=\"ccb-order-required-mark\" v-if=\"field.required\">*</span>\n      </label>\n      <textarea\n        :placeholder=\"field.placeholder\"\n        v-model=\"field.value\"\n        @input=\"updateValue\"\n        cols=\"6\"\n        rows=\"5\"\n        :maxlength=\"field.attributes.characterLimit\"\n      />\n      <div class=\"ccb-order-field__counter\">\n        <span>{{ valueLength }} / {{ field.attributes.characterLimit }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { IFormField } from \"@/widget/shared/types/fields\";\nimport { toRefs, computed, ref } from \"vue\";\nimport { useOrderForm } from \"@/widget/actions/pro-features/order-form/composable/useOrderForm.ts\";\nimport { useOrderFormFieldsRequired } from \"@/widget/actions/pro-features/order-form/composable/useOrderFormFieldsRequired.ts\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\n\ntype Props = {\n  field: IFormField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst requiredType = ref<\"required\" | \"characterLimit\">(\"required\");\n\nconst { checkFieldRequired } = useOrderFormFieldsRequired();\nconst translationsStore = useTranslationsStore();\n\nconst updateValue = (e: Event): void => {\n  requiredType.value = \"required\";\n  const { updateValue } = useOrderForm();\n  const target = e.target as HTMLInputElement;\n  const value: string = target.value;\n\n  if (value.length > (field.value.attributes.characterLimit || 0)) {\n    requiredType.value = \"characterLimit\";\n  }\n\n  updateValue(field.value.id, value);\n};\n\nconst isRequired = computed(() => {\n  if (requiredType.value === \"characterLimit\") return true;\n  if (!field.value.required) return false;\n  return checkFieldRequired(field.value);\n});\n\nconst valueLength = computed(() => {\n  return field.value.value?.length || 0;\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.ccb-order-textarea {\n  textarea {\n    resize: vertical;\n  }\n}\n</style>\n"],"names":["props","__props","field","toRefs","requiredType","ref","checkFieldRequired","useOrderFormFieldsRequired","translationsStore","useTranslationsStore","updateValue","e","useOrderForm","value","isRequired","computed","valueLength","_a"],"mappings":"osBAqDA,MAAMA,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExBI,EAAeC,EAAmC,UAAU,EAE5D,CAAE,mBAAAC,CAAmB,EAAIC,EAA2B,EACpDC,EAAoBC,EAAqB,EAEzCC,EAAeC,GAAmB,CACtCP,EAAa,MAAQ,WACrB,KAAM,CAAE,YAAAM,CAAY,EAAIE,EAAa,EAE/BC,EADSF,EAAE,OACY,MAEzBE,EAAM,QAAUX,EAAM,MAAM,WAAW,gBAAkB,KAC3DE,EAAa,MAAQ,kBAGvBM,EAAYR,EAAM,MAAM,GAAIW,CAAK,CACnC,EAEMC,EAAaC,EAAS,IACtBX,EAAa,QAAU,iBAAyB,GAC/CF,EAAM,MAAM,SACVI,EAAmBJ,EAAM,KAAK,EADH,EAEnC,EAEKc,EAAcD,EAAS,IAAM,OAC1B,QAAAE,EAAAf,EAAM,MAAM,QAAZ,YAAAe,EAAmB,SAAU,CAAA,CACrC"}
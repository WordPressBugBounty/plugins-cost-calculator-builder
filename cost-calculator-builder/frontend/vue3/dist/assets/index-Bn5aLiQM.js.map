{"version":3,"file":"index-Bn5aLiQM.js","sources":["../../assets/images/static/close.png","../../src/widget/features/calculator-fields/components/ImageDropdown/ImageDropdown.vue"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAAXNSR0IB2cksfwAAACpQTFRFAAAA7vH47vL27vH37vH37vD47vH44+fu1tvj3+Pr3+Pq5env7vH37vD4a97ZqgAAAA50Uk5TAGrQ//5pz////////Wi7cMjRAAAApklEQVR4nGNgVDbGBpwCGISxShgbmzJg12JsbMaAQ8LYBKeM8agMhTLmnWBqxWYMGYuOyUDSqqMZQ8ayA6RpBVgezZ4ZQEGrjk4sLgBpQtKC7LYZHbOQtCDLWHZ0IGlB8c8MZC0oMitwyVjhNG1Fx0zsLgD5ZQZWV4P8YonNpxDvz8ASOpAQtcQSorhjAQOMypAp44xDwgZPiRSMQ8aWgTUHq4TbBQCzQBLHTuhWZAAAAABJRU5ErkJggg==\"","<template>\n  <div\n    class=\"ccb-field ccb-dropdown-img-field\"\n    :class=\"{\n      active: isBodyVisible,\n      required: isRequired,\n      'ccb-field-disabled': field.disabled,\n      [additionalClasses]: true,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <RequiredHint v-if=\"isRequired\" :text=\"requiredWarningText\" />\n      <div class=\"ccb-field__title\">\n        {{ field.label\n        }}<span v-if=\"field.required\" class=\"ccb-field-required-mark\">*</span\n        ><ProBadge />\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <div class=\"ccb-field__input-wrapper\" ref=\"dropdownWrapper\">\n      <div class=\"ccb-dropdown\">\n        <div class=\"ccb-dropdown__input\" @click=\"toggleBody\">\n          <div v-if=\"!selectedValue\" class=\"ccb-dropdown__label\">\n            <img :src=\"defaultImg\" alt=\"#\" />\n            <span> {{ translationsStore.getTranslations.selectValue }} </span>\n          </div>\n          <div v-else class=\"ccb-dropdown__label\">\n            <img :src=\"selectedValue.src\" alt=\"selected-image\" />\n            <span>{{ selectedValue.optionText }}</span>\n          </div>\n          <span class=\"ccb-dropdown__icon\">\n            <i class=\"ccb-icon-Path-3485\"></i>\n          </span>\n        </div>\n\n        <div class=\"ccb-dropdown__list\">\n          <ul>\n            <li @click.prevent=\"() => selectValue(undefined, true)\">\n              <img :src=\"defaultImg\" alt=\"\" />\n              <span>{{ translationsStore.getTranslations.selectValue }}</span>\n            </li>\n            <li\n              v-for=\"(option, idx) in fieldOptions\"\n              :key=\"option.optionValue\"\n              @click.prevent=\"() => selectValue(option)\"\n              :class=\"{\n                'ccb-option-disabled': field.disableOptions.includes(idx),\n              }\"\n            >\n              <img :src=\"option.src\" alt=\"#\" />\n              <span class=\"ccb-dropdown--option\">\n                <span class=\"ccb-dropdown--option-label\">\n                  {{ option.optionText }}\n                </span>\n                <span\n                  class=\"ccb-dropdown--option-converted\"\n                  v-if=\"field.showValueInOption\"\n                >\n                  {{ translationsStore.getTranslations.price }}:\n                  {{ option.optionConverted }}\n                </span>\n              </span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'after'\"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, ref, computed } from \"vue\";\nimport defaultImg from \"@/images/static/close.png\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useSingleField } from \"@/widget/actions/fields/composable/useSingleField.ts\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport { ISingleOptionsField, IOptions } from \"@/widget/shared/types/fields\";\nimport ProBadge from \"@/widget/shared/ui/components/Pro-badge/ProBadge.vue\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\nimport { usePageBreakerStore } from \"@/widget/app/providers/stores/pageBreakerStore.ts\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\n\ntype Props = {\n  field: ISingleOptionsField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst fieldStore = useFieldsStore();\nconst singleFieldInstance = useSingleField();\nconst appearanceStore = useAppearanceStore();\nconst translationsStore = useTranslationsStore();\n\nconst isBodyVisible = ref<boolean>(false);\nconst conditionsStore = useConditionsStore();\nconst pageBreakerStore = usePageBreakerStore();\n\nconst dropdownWrapper = ref<HTMLElement | null>(null);\n\nconst requiredWarningText = computed(() => {\n  const settingStore = useSettingsStore();\n  return settingStore.getWarningTexts?.requiredMsg || \"\";\n});\n\nconst toggleBody = () => {\n  if (!isBodyVisible.value) {\n    document.addEventListener(\"click\", handleClickOutside);\n  } else {\n    document.removeEventListener(\"click\", handleClickOutside);\n  }\n  isBodyVisible.value = !isBodyVisible.value;\n};\n\nconst handleClickOutside = (event: MouseEvent) => {\n  if (\n    dropdownWrapper.value &&\n    \"contains\" in dropdownWrapper.value &&\n    !dropdownWrapper.value.contains(event.target as Node)\n  ) {\n    isBodyVisible.value = false;\n    document.removeEventListener(\"click\", handleClickOutside);\n  }\n};\n\nconst selectValue = (option: IOptions | undefined, toggle: boolean = true) => {\n  if (option?.optionValue !== selectedValue.value?.optionValue) {\n    let value: number = 0;\n\n    if (\n      option?.optionValue &&\n      field.value.summaryView !== \"show_label_not_calculable\"\n    ) {\n      const optionValue: string = option?.optionValue;\n      value = +optionValue.split(\"_\")[0] || 0;\n    }\n\n    field.value.selectedOption = option;\n    field.value.value = value;\n\n    field.value.displayValue =\n      singleFieldInstance.getMultipleOptionsFieldDisplayView(\n        field.value,\n      ) as string;\n\n    fieldStore.updateField(field.value.alias, field.value);\n    conditionsStore.applyConditionForField(field.value.alias);\n\n    if (\n      fieldStore.getPageBreakEnabled &&\n      fieldStore.getActivePage.action === \"not_skip\"\n    ) {\n      pageBreakerStore.checkPageFieldsConditions();\n    }\n  }\n\n  if (toggle) {\n    toggleBody();\n  }\n};\n\nconst selectedValue = computed(() => {\n  return field.value.selectedOption;\n});\n\nconst fieldOptions = computed(() => {\n  return field.value.options?.map((f: IOptions) => {\n    return {\n      ...f,\n    };\n  });\n});\n\nconst isRequired = computed(() => {\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst additionalClasses = computed(() => {\n  return field.value?.additionalStyles || \"\";\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@use \"@/styles/widget/_mixins.scss\" as mixins;\n\n.ccb-dropdown {\n  position: relative;\n\n  &--option {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start !important;\n    padding: 10px 7px !important;\n  }\n\n  &--option-label {\n    font-size: 14px;\n  }\n\n  &--option-converted {\n    font-size: calc(var(--ccb-summary-text-size) - 2px);\n    color: var(--ccb-text-color);\n\n    @media only screen and (max-width: 480px) {\n      font-size: calc(var(--ccb-mobile-summary-text-size) - 2px);\n    }\n  }\n\n  &__input {\n    @include mixins.field;\n  }\n\n  &__input {\n    padding-right: 10px;\n    display: grid;\n    grid-template-columns: 1fr auto;\n    justify-content: space-between;\n    cursor: pointer;\n\n    @media only screen and (max-width: 480px) {\n      padding: 12px var(--ccb-mobile-field-side-indent);\n      min-height: var(--ccb-mobile-field-button-height);\n    }\n  }\n\n  &__icon {\n    font-size: 8px;\n    display: grid;\n    place-items: center;\n    transition: 300ms ease;\n  }\n\n  &__list {\n    margin-top: 5px;\n    border-radius: 4px;\n    background: #ffffff;\n    border-color: transparent;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\n    max-height: 261px;\n    position: absolute;\n    top: 55px;\n    left: 0;\n    width: 100%;\n    z-index: 100;\n    visibility: hidden;\n    opacity: 0;\n    transition: 200ms ease;\n    overflow-y: auto;\n\n    ul {\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      background: var(--ccb-fields-bg-color);\n\n      li {\n        margin: 0;\n        background: var(--ccb-fields-bg-color);\n        color: var(--ccb-text-color);\n        font-size: 15px;\n        font-weight: var(--ccb-field-weight);\n\n        padding: 10px;\n        border-bottom: 1px solid var(--ccb-fields-border-color);\n        cursor: pointer;\n\n        display: flex;\n        align-items: center;\n\n        @media only screen and (max-width: 480px) {\n          font-weight: var(--ccb-mobile-field-weight);\n        }\n\n        img {\n          width: 50px;\n          height: 50px;\n          margin-right: 10px;\n        }\n\n        &:hover {\n          background: var(--ccb-fields-hover-color) !important;\n        }\n      }\n    }\n  }\n}\n\n.ccb-dropdown-img-field {\n  .ccb-dropdown__label {\n    display: flex;\n    align-items: center;\n\n    img {\n      width: 30px;\n      height: 30px;\n      margin-right: 10px;\n    }\n  }\n  &.active {\n    .ccb-dropdown__input {\n      border-color: var(--ccb-accent-color);\n    }\n    .ccb-dropdown__list {\n      visibility: visible;\n      opacity: 1;\n      top: 55px;\n    }\n\n    .ccb-dropdown__icon {\n      transform: rotate(180deg);\n    }\n  }\n}\n</style>\n"],"names":["defaultImg","props","__props","field","toRefs","fieldStore","useFieldsStore","singleFieldInstance","useSingleField","appearanceStore","useAppearanceStore","translationsStore","useTranslationsStore","isBodyVisible","ref","conditionsStore","useConditionsStore","pageBreakerStore","usePageBreakerStore","dropdownWrapper","requiredWarningText","computed","_a","useSettingsStore","toggleBody","handleClickOutside","event","selectValue","option","toggle","selectedValue","value","fieldOptions","f","isRequired","additionalClasses"],"mappings":"0gBAAA,MAAeA,EAAA,0lCC0Gf,MAAMC,EAAQC,EACR,CAAE,MAAAC,CAAA,EAAUC,EAAOH,CAAK,EAExBI,EAAaC,EAAe,EAC5BC,EAAsBC,EAAe,EACrCC,EAAkBC,EAAmB,EACrCC,EAAoBC,EAAqB,EAEzCC,EAAgBC,EAAa,EAAK,EAClCC,EAAkBC,EAAmB,EACrCC,EAAmBC,EAAoB,EAEvCC,EAAkBL,EAAwB,IAAI,EAE9CM,EAAsBC,EAAS,IAAM,OAElC,QAAAC,EADcC,EAAiB,EAClB,kBAAb,YAAAD,EAA8B,cAAe,EAAA,CACrD,EAEKE,EAAa,IAAM,CAClBX,EAAc,MAGR,SAAA,oBAAoB,QAASY,CAAkB,EAF/C,SAAA,iBAAiB,QAASA,CAAkB,EAIzCZ,EAAA,MAAQ,CAACA,EAAc,KACvC,EAEMY,EAAsBC,GAAsB,CAE9CP,EAAgB,OAChB,aAAcA,EAAgB,OAC9B,CAACA,EAAgB,MAAM,SAASO,EAAM,MAAc,IAEpDb,EAAc,MAAQ,GACb,SAAA,oBAAoB,QAASY,CAAkB,EAE5D,EAEME,EAAc,CAACC,EAA8BC,EAAkB,KAAS,OAC5E,IAAID,GAAA,YAAAA,EAAQ,iBAAgBN,EAAAQ,EAAc,QAAd,YAAAR,EAAqB,aAAa,CAC5D,IAAIS,EAAgB,EAGlBH,GAAA,MAAAA,EAAQ,aACRzB,EAAM,MAAM,cAAgB,8BAG5B4B,EAAQ,EADoBH,GAAA,YAAAA,EAAQ,aACf,MAAM,GAAG,EAAE,CAAC,GAAK,GAGxCzB,EAAM,MAAM,eAAiByB,EAC7BzB,EAAM,MAAM,MAAQ4B,EAEd5B,EAAA,MAAM,aACVI,EAAoB,mCAClBJ,EAAM,KACR,EAEFE,EAAW,YAAYF,EAAM,MAAM,MAAOA,EAAM,KAAK,EACrCY,EAAA,uBAAuBZ,EAAM,MAAM,KAAK,EAGtDE,EAAW,qBACXA,EAAW,cAAc,SAAW,YAEpCY,EAAiB,0BAA0B,CAC7C,CAGEY,GACSL,EAAA,CAEf,EAEMM,EAAgBT,EAAS,IACtBlB,EAAM,MAAM,cACpB,EAEK6B,EAAeX,EAAS,IAAM,OAClC,OAAOC,EAAAnB,EAAM,MAAM,UAAZ,YAAAmB,EAAqB,IAAKW,IACxB,CACL,GAAGA,CACL,GACD,CACF,EAEKC,EAAab,EAAS,IACnBhB,EAAW,mBAAmBF,EAAM,KAAK,CACjD,EAEKgC,EAAoBd,EAAS,IAAM,OAChC,QAAAC,EAAAnB,EAAM,QAAN,YAAAmB,EAAa,mBAAoB,EAAA,CACzC"}
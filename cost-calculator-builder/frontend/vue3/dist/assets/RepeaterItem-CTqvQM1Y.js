import{a as defineComponent,C as toRefs,k as ref,b as computed,m as createElementBlock,g as openBlock,F as Fragment,H as renderList,u as unref,q as createCommentVNode,p as createBaseVNode,I as normalizeClass,D as toDisplayString,f as createBlock,w as withCtx,n as createVNode,T as Transition}from"./convert-case-to-camel-case.utils-DRsbC-qG.js";import{a as _sfc_main$1}from"./index-BBr9cKur.js";import"./widget-aE3IoCbC.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./translationsStore-C34buciO.js";import"./Wrapper.vue_vue_type_script_setup_true_lang-D_Su8LOM.js";import"./ThankYouPage-BB_2TAkH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _hoisted_1={class:"ccb-summary-repeater"},_hoisted_2=["onClick"],_hoisted_3={class:"ccb-summary-repeater__left"},_hoisted_4=["aria-expanded"],_hoisted_5={class:"ccb-summary-repeater__title"},_hoisted_6={class:"ccb-summary-repeater__count"},_hoisted_7={class:"ccb-summary-repeater__value"},_sfc_main=defineComponent({__name:"RepeaterItem",props:{summary:{}},setup(__props){const props=__props,{summary}=toRefs(props),collapseStore=ref({}),getFieldsFromMap=computed(()=>o=>Array.from(o.values()).filter(e=>e.addToSummary)),getGroupTotal=computed(()=>data=>{if(summary.value.enableFormula){const baseFormula=summary.value.originalFormula&&summary.value.originalFormula.trim()||summary.value.formula&&summary.value.formula.trim()||"0";let groupFormula=baseFormula;const fieldsAliasList=groupFormula.match(/\w+_field_id_\d+/g)||[];fieldsAliasList.forEach(o=>{var a,r;let e=0;for(const t of data.values())if(t.alias===o){e=typeof t.value=="number"?t.value:Number((r=(a=t==null?void 0:t.displayValue)==null?void 0:a.toString())==null?void 0:r.replace(/[^\d.-]/g,"")),Number.isNaN(e)&&(e=0);break}groupFormula=groupFormula.replace(new RegExp("\\b"+o+"\\b","g"),e.toString())});try{const res=Number(eval(groupFormula));return Number.isFinite(res)?res:0}catch{return 0}}else return Array.from(data.values()).filter(e=>e.addToSummary).reduce((e,a)=>{var t,s;const r=typeof a.value=="number"?a.value:Number((s=(t=a==null?void 0:a.displayValue)==null?void 0:t.toString())==null?void 0:s.replace(/[^\d.-]/g,""));return e+(isNaN(r)?0:r)},0)});return(o,e)=>(openBlock(),createElementBlock("div",_hoisted_1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(summary).groupElements,(a,r)=>(openBlock(),createElementBlock(Fragment,null,[getFieldsFromMap.value(a).length>0?(openBlock(),createElementBlock("div",{key:0,class:"ccb-summary-repeater__header",onClick:t=>collapseStore.value[r]=!collapseStore.value[r]},[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",{class:normalizeClass(["ccb-summary-repeater__btn",{rotated:collapseStore.value[r]}]),"aria-expanded":!collapseStore.value[r]},e[0]||(e[0]=[createBaseVNode("i",{class:"ccb-icon-Path-3514"},null,-1)]),10,_hoisted_4),createBaseVNode("div",_hoisted_5,toDisplayString(unref(summary).label),1),createBaseVNode("div",_hoisted_6,"#"+toDisplayString(r+1),1)]),createBaseVNode("div",_hoisted_7,toDisplayString(getGroupTotal.value(a)),1)],8,_hoisted_2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["ccb-summary-repeater__list",{hidden:collapseStore.value[r]}])},[getFieldsFromMap.value(a).length>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(getFieldsFromMap.value(a),t=>(openBlock(),createBlock(Transition,{name:"fade"},{default:withCtx(()=>[createVNode(_sfc_main$1,{"item-type":"summary",summary:t},null,8,["summary"])]),_:2},1024))),256)):createCommentVNode("",!0)],2)],64))),256))]))}});export{_sfc_main as default};
//# sourceMappingURL=RepeaterItem-CTqvQM1Y.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./widget-DZZgQDKu.css","./RequiredHint-DySjuwMC.css","./index-BkHszxMX.css","./OrderEmail-CDL72wGN.css","./OrderPhone-DLhTHF1_.css","./OrderTextarea-BeyyFHRz.css","./OrderNumber-C85wQNJC.css","./OrderSpace-DPu2rkSM.css","./OrderRadio-CfY9A864.css","./OrderCheckbox-bRiJUzMz.css","./OrderDate-CZU6STgb.css","./main-CWmBI_q2.css","./index-CYSgyfdx.css"])))=>i.map(i=>d[i]);
import{e as d,_ as p,a as M,C as re,b as i,f as P,g as u,r as Te,u as v,m as g,I as H,p as y,q as k,O as we,$ as Ae,L as Q,D as X,k as E,M as Fe,o as he,n as L,F as D,H as Ee,w as Pe,T as Oe}from"./convert-case-to-camel-case.utils-DRsbC-qG.js";import{a as oe,j as Be,e as Ie,b as Le,c as Y,h as q,i as Z,f as ee,t as De}from"./widget-DTyF7X6W.js";import{b as Ne}from"./WooRedirectCart-D7ZU4w8a.js";import{c as Re,a as te}from"./ThankYouPage-COolTCjK.js";import{_ as Ve}from"./RequiredHint.vue_vue_type_style_index_0_lang-DFYyucnB.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";const qe=S=>new DOMParser().parseFromString("<!doctype html><body>"+S,"text/html").body.textContent||"",He={name:d(()=>p(()=>import("./OrderName-BFckaAK2.js"),__vite__mapDeps([0,1]),import.meta.url)),dropdown:d(()=>p(()=>import("./index-D1oNLtkE.js"),__vite__mapDeps([0,1,2]),import.meta.url)),email:d(()=>p(()=>import("./OrderEmail-CCT3aAoO.js"),__vite__mapDeps([0,1,3]),import.meta.url)),phone:d(()=>p(()=>import("./OrderPhone-BhiEPQ95.js"),__vite__mapDeps([0,1,4]),import.meta.url)),text:d(()=>p(()=>import("./OrderText-Bp1vJ3Ao.js"),__vite__mapDeps([0,1]),import.meta.url)),textarea:d(()=>p(()=>import("./OrderTextarea-BykKUf4S.js"),__vite__mapDeps([0,1,5]),import.meta.url)),"input-textbox":d(()=>p(()=>import("./OrderTextBox-CJDIO5oZ.js"),__vite__mapDeps([0,1]),import.meta.url)),number:d(()=>p(()=>import("./OrderNumber-CtqbW2s3.js"),__vite__mapDeps([0,1,6]),import.meta.url)),space:d(()=>p(()=>import("./OrderSpace-CMydVLE4.js"),__vite__mapDeps([7]),import.meta.url)),radio:d(()=>p(()=>import("./OrderRadio-CCmIVsxe.js"),__vite__mapDeps([0,1,8]),import.meta.url)),checkbox:d(()=>p(()=>import("./OrderCheckbox-xHV5tpcV.js"),__vite__mapDeps([0,1,9]),import.meta.url)),"formatted-text":d(()=>p(()=>import("./OrderFormattedText-irhHpelN.js"),[],import.meta.url)),"date-picker":d(()=>p(()=>import("./OrderDate-H2CEvOyN.js"),__vite__mapDeps([0,1,10,11]),import.meta.url)),"time-picker":d(()=>p(()=>import("./index-DtbukZFf.js"),__vite__mapDeps([0,1,12,11]),import.meta.url))},Me=M({__name:"OrderFormItem",props:{name:{},field:{}},setup(S){const m=S,{field:b,name:x}=re(m),T=i(()=>{const n=x.value;return He[n]||""});return(n,w)=>(u(),P(Te(T.value),{field:v(b)},null,8,["field"]))}}),Ke={class:"ccb-order-field__wrapper"},je={for:"terms_and_conditions"},We={class:"ccb-checkbox-label"},ze=["href"],Ue=M({__name:"TermsAndConditions",setup(S){const m=oe(),b=i({get(){var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.checkbox)||!1},set(a){m.updateTermsValue(a)}}),x=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.text)||""}),T=i(()=>{var a,o;return((o=(a=m.getWarningTexts)==null?void 0:a.formFields)==null?void 0:o.termsAndConditionsField)||"Please, check out our terms and click on the checkbox"}),n=i(()=>m.checkTermsAndConditionsApproved),w=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.linkText)||""}),c=i(()=>{var a,o;return((o=(a=m.getFormSettings)==null?void 0:a.termsAndConditions)==null?void 0:o.link)||""});return(a,o)=>(u(),g("div",{class:H(["ccb-default-checkbox ccb-terms-check",{"ccb-terms-and-conditions-required":n.value}])},[y("div",Ke,[n.value?(u(),P(Ve,{key:0,text:T.value},null,8,["text"])):k("",!0),y("label",je,[we(y("input",{type:"checkbox",id:"terms_and_conditions",name:"terms_and_conditions","onUpdate:modelValue":o[0]||(o[0]=A=>b.value=A),value:!0},null,512),[[Ae,b.value]]),y("span",We,[Q(X(x.value)+" ",1),y("a",{href:c.value,target:"_blank"},[Q(X(w.value)+" ",1),o[1]||(o[1]=y("i",{class:"ccb-icon-click-out"},null,-1))],8,ze)])])])],2))}}),Ge=$e(Ue,[["__scopeId","data-v-b1d2f2cc"]]),Je={key:0,class:"ccb-order-form__submit ccb-col-12"},Qe=["innerHTML"],Xe=["id"],Ye={key:1,class:"ccb-order-form__submit ccb-col-12"},nt=M({__name:"OrderFormList",props:{payment:{type:Boolean},skipCreateOrder:{type:Boolean}},setup(S){const m=E(!1),b=S,{payment:x}=re(b),{validateOrderFormSettings:T}=De(),n=Be(),w=Ie(),c=oe(),a=Le(),o=E(null),A=E(!1),F=Y(),K=E(!1),se=i(()=>n.getFormFields),ne=i(()=>{var e;return((e=c.getFormSettings)==null?void 0:e.openModalBtnText)||"Make Order"}),ae=i(()=>{const e=c.getRecaptchaSettings;return(e==null?void 0:e.enable)&&(e==null?void 0:e.type)==="v2"||!1}),ie=i(()=>{var t,r;const e=(t=c.getFormSettings)==null?void 0:t.summaryDisplay;return B.value==="woocommerce"?"Add to cart":e!=null&&e.enable?e.submitBtnText||"View Summary":((r=c.getFormSettings)==null?void 0:r.submitBtnText)||"Submit Order"}),h=E(!1),O=i(()=>a.getIsLive),ce=()=>{var s;if(O.value){h.value=!0,setTimeout(()=>{h.value=!1},5e3);return}const e=c.getRecaptchaSettings;let t=!0;const r=ee();if(e!=null&&e.enable){if(e.type==="v2"){if(!n.getCaptchaToken){r.updateNotifications({status:!0,type:"error",message:"reCAPTCHA verification failed"});return}}else if(e.type==="v3"){t=!1,(s=window.grecaptcha)==null||s.ready(()=>{var l;(l=window.grecaptcha)==null||l.execute(e.siteKey,{action:"submit"}).then(f=>{n.setCaptchaToken(f),t=!0,j()}).catch(f=>{r.updateNotifications({status:!0,type:"error",message:"reCAPTCHA v3 verification failed"})})});return}}t&&j()},j=()=>{(B.value==="woocommerce"||!T())&&w.submissionCreateOrder()},le=e=>{const t=e.detail.inputs.map(r=>({label:r.name||"",value:r.value.replace(/\n/g," ")||"",attributes:{label:r.name||"",type:r.name||""}}));w.submissionCreateOrder(t)},W=i(()=>{const e=q(),t=Z();return x.value?t.isPaymentAfterSubmit&&t.getSubmit?!1:e.showForm:!0}),B=i(()=>q().paymentType),ue=i(()=>{var t;if((t=c.getFormSettings)!=null&&t.contactFormId)return!1;const e=Z();return!(e.isPaymentAfterSubmit&&e.getSubmit)}),z=i(()=>{var t;const e=q();return F.pageBreakEnabled&&F.getActivePageIndex!==F.getPages.length-1&&!((t=c.getPageBreakerSettings)!=null&&t.summaryAfterLastPage)?!0:W.value?!1:e.paymentType&&!F.checkRequiredFields()?!0:!e.paymentType}),me=()=>{F.checkRequiredFields()&&(n.updateNextButtonStatus(!1),n.updateNextButton(!0),A.value=!0,K.value=!0,setTimeout(()=>{be()}))},de=i(()=>{const t=`ccb_front_template_${N.value}`,r=window[t];return r&&"cf7_form"in r?r.cf7_form:""}),N=i(()=>{var e;return((e=a.getCalcId)==null?void 0:e.toString())||""}),pe=()=>{var r;if(o.value=document.querySelector(`#ccb_app_${N.value}`),!o.value||((r=o.value)==null?void 0:r.getElementsByClassName("ccb-contact-form7").length)<=0||o.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form").length<=0)return;let e=o.value.getElementsByClassName("ccb-contact-form7")[0].getElementsByTagName("form")[0];[...e.getElementsByTagName("p")].forEach(s=>{s.classList.contains("ccb-hidden")&&(s.classList.remove("ccb-hidden"),s.style.display="block")}),e.getElementsByClassName("wpcf7-response-output").length>0&&(e.getElementsByClassName("wpcf7-response-output")[0].innerHTML="")},fe=e=>{var t;e.preventDefault(),!O.value&&A.value&&(le(e),A.value=!1,((t=e==null?void 0:e.detail)==null?void 0:t.status)==="mail_sent"&&n.updateContactFormDisabled(!0))},_e=()=>{var t,r,s,l,f,I;const e=Y();if((t=c.getFormSettings)!=null&&t.contactFormId){let C=(r=c.getFormSettings)==null?void 0:r.body;const R=(s=o.value)==null?void 0:s.querySelector(".wpcf7-form");if(C.indexOf("[ccb-subtotal]")!==-1){let _=e.parseContactFormDescriptions();C=C.replaceAll("[ccb-subtotal]",_)}const Ce=(f=(l=c.getFormSettings)==null?void 0:l.formulas)==null?void 0:f.map(_=>_.alias);let V=e.parseContactFormTotals(Ce);V||(V=e.getTotalsList.map(_=>_.displayValue).filter(Boolean).map(_=>Array.isArray(_)?_.join(", "):_).find(Boolean)??"");const ke=/\[ccb-total(?:-\d+)?\]/g;C=C.replaceAll(ke,`${V}
`);const G=R==null?void 0:R.querySelector("textarea");if(G&&(G.value=qe(C)),window.wpcf7&&"init"in window.wpcf7){const _=(I=o.value)==null?void 0:I.querySelectorAll(".wpcf7 > form");_==null||_.forEach($=>{var J;(J=window.wpcf7)==null||J.init($),O.value&&$.addEventListener("submit",xe=>{xe.preventDefault(),h.value=!0,setTimeout(()=>{h.value=!1},5e3)})})}}},ge=()=>{document.addEventListener("wpcf7mailsent",fe,!1)},be=()=>{pe(),ge(),_e()},U=()=>{const e=c.getRecaptchaSettings;e!=null&&e.enable&&(e!=null&&e.siteKey)&&(e!=null&&e.secretKey)&&(ve(e),ye(e))},ve=e=>{const t=ee();if(e.type==="v2"){const r=document.querySelectorAll(".g-rec");window.ccbCaptchaFnc=()=>{r.forEach(s=>{var l;try{const f=(l=window==null?void 0:window.grecaptcha)==null?void 0:l.render(s,{sitekey:e.siteKey,callback:I=>{n.setCaptchaToken(I)},"expired-callback":()=>{n.setCaptchaToken("")}});f&&s.setAttribute("data-widget_id",f.toString())}catch{t.updateNotifications({status:!0,type:"error",message:"Error rendering reCAPTCHA"})}})}}else e.type==="v3"&&(window.ccbCaptchaFnc=()=>{var r;(r=window.grecaptcha)==null||r.ready(()=>{var s;(s=window.grecaptcha)==null||s.execute(e.siteKey,{action:"submit"}).then(l=>{n.setCaptchaToken(l)}).catch(l=>{t.updateNotifications({status:!0,type:"error",message:"Error executing reCAPTCHA v3"})})})})},ye=async e=>{var l;if(m.value&&(e==null?void 0:e.type)==="v3")return;const t={v2:"https://www.google.com/recaptcha/api.js?onload=ccbCaptchaFnc&render=explicit",v3:`https://www.google.com/recaptcha/api.js?render=${e.siteKey}`},r=document.createElement("script");r.src=t[e.type],r.setAttribute("defer",""),r.setAttribute("async","");const s=document.querySelectorAll("script")[0];(l=s==null?void 0:s.parentNode)==null||l.insertBefore(r,s),m.value=!0},Se=i(()=>n.getNextButtonStatus);return Fe(Se,e=>{const t=c.getRecaptchaSettings;!e&&(t!=null&&t.enable)&&(t==null?void 0:t.type)==="v2"?setTimeout(()=>{U()}):e&&(t!=null&&t.enable)&&(t==null?void 0:t.type)==="v2"&&n.setCaptchaToken("")}),he(()=>{const e=c.getRecaptchaSettings;e!=null&&e.enable&&(e==null?void 0:e.type)==="v3"&&!m.value&&setTimeout(()=>{U()},1e3)}),(e,t)=>{var r,s,l;return u(),g("div",{class:H(["ccb-order-form",{"ccb-order-form-legacy":!((r=v(c).getFormSettings)!=null&&r.contactFormId),"is-live-form":!v(n).getNextButtonStatus&&O.value,"order-open":K.value}])},[L(Re),v(n).getNextButtonStatus&&B.value!=="woocommerce"?(u(),g("div",Je,[L(te,{type:"success",text:ne.value,"on-click":me,disabled:z.value},null,8,["text","disabled"])])):(u(),g(D,{key:1},[W.value&&B.value!=="woocommerce"?(u(),g(D,{key:0},[(s=v(c).getFormSettings)!=null&&s.contactFormId?(u(),g("div",{key:0,class:H(["ccb-contact-form7",{"calc-cf7-disabled":v(n).getContactFormDisabled}])},[y("div",{class:"ccb-contact-form7-container",innerHTML:de.value},null,8,Qe)],2)):(u(),g(D,{key:1},[(u(!0),g(D,null,Ee(se.value,f=>(u(),P(Me,{field:f,key:f.id,name:f.type},null,8,["field","name"]))),128)),(l=v(c).getFormSettings)!=null&&l.accessTermsEmail?(u(),P(Ge,{key:0})):k("",!0),ae.value?(u(),g("div",{key:1,id:N.value,class:"g-rec",style:{"max-width":"100px"}},null,8,Xe)):k("",!0)],64))],64)):k("",!0),ue.value?(u(),g("div",Ye,[L(te,{type:"success",text:ie.value,"on-click":ce,disabled:z.value},null,8,["text","disabled"])])):k("",!0),L(Oe,{name:"fade"},{default:Pe(()=>[h.value?(u(),P(Ne,{key:0})):k("",!0)]),_:1})],64))],2)}}});export{nt as _};
//# sourceMappingURL=OrderFormList.vue_vue_type_style_index_0_lang-CWdX72b2.js.map

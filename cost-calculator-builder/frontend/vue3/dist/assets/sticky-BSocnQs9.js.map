{"version":3,"mappings":"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","names":["useAppStore","defineStore","state","settings","currency","calcId","title","isProActive","toCamelCase","str","_","letter","convertKeysToCamelCase","data","result","key","camelKey","appStore","translationsStore","useTranslationsStore","showSticky","ref","inject","calcData","_a","stickySettings","showActionHandler","timeout","$wrapper","_b","onMounted","currentComponent","computed","defineAsyncComponent","__vitePreload","rootElements","rootElement","rootRef","app","createApp","App","createPinia"],"ignoreList":[],"sources":["../../src/sticky/app/providers/app.store.ts","../../src/sticky/shared/utils/convert-case-to-camel-case.utils.ts","../../src/sticky/app/App.vue","../../src/sticky/main.ts"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { IStickySettings, IStickyWooCheckout } from \"@/sticky/shared/types/app\";\nimport { CurrencyFormatOptions } from \"@/widget/shared/types/common/currency.type\";\n\ninterface IAppStore {\n  settings: IStickySettings | null;\n  calcId: number | null;\n  title: string;\n  wooCheckoutSettings: IStickyWooCheckout | null;\n  currencySettings: CurrencyFormatOptions | null;\n  isProActive: boolean;\n}\n\nexport const useAppStore = defineStore(\"stickyApp\", {\n  state: (): IAppStore => ({\n    settings: null,\n    calcId: null,\n    title: \"\",\n    wooCheckoutSettings: null,\n    currencySettings: null,\n    isProActive: false,\n  }),\n\n  getters: {\n    getStickySettings: (state: IAppStore): IStickySettings | null =>\n      state.settings,\n\n    getCalcId: (state: IAppStore): number | null => state.calcId,\n\n    getCalcTitle: (state: IAppStore): string => state.title,\n\n    getWooCheckoutSettings: (state: IAppStore): IStickyWooCheckout | null =>\n      state.wooCheckoutSettings,\n\n    getCurrencySettings: (state: IAppStore): CurrencyFormatOptions | null =>\n      state.currencySettings,\n\n    getIsProActive: (state: IAppStore): boolean => state.isProActive,\n  },\n\n  actions: {\n    initStickySettings(settings: IStickySettings): void {\n      this.settings = settings;\n    },\n\n    initWooCheckoutSettings(settings: IStickyWooCheckout): void {\n      this.wooCheckoutSettings = settings;\n    },\n\n    initCurrencySettings(currency: CurrencyFormatOptions): void {\n      this.currencySettings = currency;\n    },\n\n    initCalcId(calcId: number): void {\n      this.calcId = +calcId || null;\n    },\n\n    initTitle(title: string): void {\n      this.title = title;\n    },\n\n    setIsProActive(isProActive: boolean): void {\n      this.isProActive = isProActive;\n    },\n  },\n});\n","const toCamelCase = (str: string): string => {\n  return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n};\n\nexport function convertKeysToCamelCase<T>(data: any): T {\n  if (Array.isArray(data)) {\n    return data.map(convertKeysToCamelCase) as T;\n  } else if (data !== null && typeof data === \"object\") {\n    return Object.keys(data).reduce((result: any, key: string) => {\n      const camelKey = toCamelCase(key);\n      result[camelKey] = convertKeysToCamelCase<T>(data[key]);\n      return result;\n    }, {});\n  }\n  return data;\n}\n","<template>\n  <component :is=\"currentComponent\" v-if=\"showSticky\"></component>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineAsyncComponent, inject, onMounted, ref } from \"vue\";\nimport { IncomingStickyData } from \"@/sticky/shared/types/app\";\nimport { useAppStore } from \"@/sticky/app/providers/app.store.ts\";\nimport { convertKeysToCamelCase } from \"@/sticky/shared/utils/convert-case-to-camel-case.utils.ts\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\n\ndeclare global {\n  interface Window {\n    ccb_sticky_data?: Record<number, IncomingStickyData>;\n  }\n}\n\nconst appStore = useAppStore();\nconst translationsStore = useTranslationsStore();\n\nconst showSticky = ref<boolean>(false);\n\nconst calcId = inject(\"calc_id\") as number;\nconst calcData = window[\"ccb_sticky_data\"]?.[\n  calcId\n] as unknown as IncomingStickyData;\n\nif (calcData && \"stickySettings\" in calcData) {\n  const stickySettings: IncomingStickyData =\n    convertKeysToCamelCase<IncomingStickyData>(calcData);\n\n  appStore.setIsProActive(stickySettings.is_pro_active);\n  appStore.initTitle(stickySettings.title);\n  appStore.initCalcId(stickySettings.calcId);\n  appStore.initStickySettings(stickySettings.stickySettings);\n  appStore.initWooCheckoutSettings(stickySettings.wooCheckoutSettings);\n  appStore.initCurrencySettings(stickySettings.currency);\n  translationsStore.initTranslations(calcData.translations);\n}\n\nconst showActionHandler = (): void => {\n  let timeout = 0;\n  if (appStore.getStickySettings?.displayType !== \"banner\") {\n    timeout = 100;\n  }\n\n  setTimeout(() => {\n    showSticky.value = true;\n\n    setTimeout(() => {\n      const $wrapper: HTMLElement | null = document.querySelector(\n        \"#ccb-sticky-floating-wrapper\",\n      );\n\n      if (!$wrapper?.classList?.contains(\"ccb-show\")) {\n        $wrapper?.classList?.add(\"ccb-show\");\n      }\n    }, 500);\n  }, timeout);\n};\n\nonMounted(() => {\n  if (appStore.getStickySettings?.oneClickAction === \"scroll_to\") {\n    const $wrapper: NodeList = document.querySelectorAll(\n      `.ccb-main-widget[data-calc-id=\"${appStore.getCalcId}\"]`,\n    );\n\n    if ($wrapper?.length) showActionHandler();\n  } else {\n    showActionHandler();\n  }\n});\n\nconst currentComponent = computed(() => {\n  return appStore.getStickySettings?.displayType === \"banner\"\n    ? defineAsyncComponent(() => import(\"@/sticky/widgets/floating-bar\"))\n    : defineAsyncComponent(() => import(\"@/sticky/widgets/floating-cart\"));\n});\n</script>\n\n<style lang=\"scss\">\nbody {\n  .pac-container {\n    z-index: 9999;\n  }\n}\n\n#ccb-sticky-floating-wrapper {\n  display: flex;\n\n  transition: all 200ms linear;\n  opacity: 0;\n  visibility: hidden;\n  z-index: -1111;\n\n  &.ccb-show {\n    opacity: 1;\n    visibility: visible;\n    z-index: 111;\n  }\n}\n\n.ccb-sticky-modal {\n  &.modal {\n    &.show {\n      &.fade {\n        opacity: 1;\n      }\n    }\n  }\n}\n\n.ccb-sticky-modal {\n  padding: 0 !important;\n  margin: 0 !important;\n  height: 100% !important;\n  max-width: 100% !important;\n  overflow: hidden !important;\n\n  .modal-dialog {\n    top: 0 !important;\n    margin-top: -20px !important;\n    display: flex;\n    align-items: center;\n    max-width: 983px !important;\n    height: 100% !important;\n\n    .modal-content {\n      max-height: calc(100% - 200px) !important;\n      overflow-x: hidden;\n      overflow-y: scroll;\n    }\n  }\n\n  &.show {\n    .modal-dialog {\n      max-width: 983px;\n    }\n  }\n\n  @media screen and (max-width: 1024px) {\n    .modal-dialog {\n      margin: 20px auto !important;\n      max-width: calc(100% - 60px) !important;\n\n      .modal-content {\n        max-height: calc(100% - 60px) !important;\n\n        .calc-container {\n          grid-template-columns: repeat(1, 1fr) !important;\n        }\n      }\n    }\n  }\n\n  &.pro_features {\n    .ccb-vertical {\n      display: flex !important;\n    }\n\n    .ccb-fields-block {\n      display: none !important;\n    }\n\n    .ccb-subtotals-block {\n      width: 100%;\n    }\n\n    .modal-dialog {\n      max-width: 500px !important;\n    }\n\n    @media screen and (max-width: 600px) {\n      .modal-dialog {\n        margin: 20px auto !important;\n        max-width: calc(100% - 60px) !important;\n\n        .modal-content {\n          max-height: calc(100% - 60px) !important;\n        }\n      }\n    }\n\n    .calc-container {\n      grid-template-columns: repeat(1, 1fr) !important;\n    }\n  }\n}\n\n@media screen and (max-width: 1280px) {\n  .ccb-sticky-calc {\n    display: none;\n\n    &.is-banner,\n    &.allow-on-mobile {\n      display: block !important;\n    }\n  }\n}\n\n.ccb-sticky-calc {\n  &[data-position=\"hidden\"] {\n    display: none !important;\n  }\n}\n\n.modal-content {\n  background:\n    linear-gradient(0deg, rgba(0, 0, 0, 0.12) 0%, rgba(0, 0, 0, 0.12) 100%),\n    var(--ccb-container-color, #fff) !important;\n  border-radius: var(--ccb-container-border-radius, 20px) !important;\n}\n</style>\n","import { createApp, ref, App as VueApp } from \"vue\";\nimport App from \"@/sticky/app/App.vue\";\nimport { createPinia } from \"pinia\";\n\nconst rootElements: NodeListOf<Element> =\n  document.querySelectorAll(\".ccb-sticky-calc\");\n\nrootElements.forEach((rootElement) => {\n  const rootRef = ref<VueApp<Element> | null>(null);\n  const app: VueApp<Element> = createApp(App).provide(\n    \"calc_id\",\n    rootElement.getAttribute(\"data-calc-id\"),\n  );\n  rootRef.value = app;\n\n  app.use(createPinia());\n  app.mount(rootElement);\n});\n"],"file":"assets/sticky-BSocnQs9.js"}
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Buttons-CBrZGue6.css"])))=>i.map(i=>d[i]);
import{d as ue,t as ce,k as M,c as _,a as O,_ as z,m as de,l as p,o as u,n as E,q as g,b as N,u as r,s as c,r as pe,A as fe}from"./pinia-Bf90yW2D.js";import{m as ge,u as ve,f as me,n as Se,j as _e,a as T,o as ye,p as he}from"./widget-3EoCCszU.js";import{_ as K}from"./RequiredHint.vue_vue_type_style_index_0_lang-DK4Jaja3.js";import{u as Ce}from"./translationsStore-B0jdQEiB.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./jquery-C7OTzgKr.js";const L=v=>{if(v===void 0||(v==null?void 0:v.length)<0)return!1;const q=/^[-+]?[0-9]+\.[0-9]+$/;return!!v.toString().match(q)},xe={class:"ccb-field__label"},ke={key:0,class:"ccb-required-tooltip"},Fe={class:"ccb-field__title"},Ve={key:0,class:"ccb-field-required-mark"},Me={key:0,class:"ccb-field__descriptions ccb-before"},Te={key:0,class:"ccb-field__description"},qe={key:1,class:"ccb-field__description"},Ae={key:1,class:"ccb-field__descriptions ccb-after"},Ie={key:0,class:"ccb-field__description"},Be={key:1,class:"ccb-field__description"},Ee=ue({__name:"Quantity",props:{field:{}},setup(v){const q=v,{field:e}=ce(q),A=M("required"),W=ge(),D=he(),P=ve(),V=me(),U=Se(),G=ye(),S=Ce(),H=_e(),s=M(e.value.originalValue.toString()),I=M(!1),J=M(0),X=_(()=>{var a;return((a=T().getWarningTexts)==null?void 0:a.requiredMsg)||""}),Y=_(()=>{if(I.value)return s.value;s.value=se(s.value).toString();let t=e.value.round?Math.round(+s.value):+s.value;return w(t.toString())}),Z=_(()=>{if(e.value.styles.style==="default")return O(()=>z(()=>import("./Default-CRR8b8KJ.js"),[],import.meta.url));if(e.value.styles.style==="buttons")return O(()=>z(()=>import("./Buttons-CmVJ4100.js"),__vite__mapDeps([0]),import.meta.url))}),B=(t=!1,a,n,l)=>{n&&n!==e.value.alias||(s.value=a.toString(),ne(),t&&typeof a<"u"&&(e.value.value=a,e.value.originalValue=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=G.getCommonFieldDisplayView(e.value,s.value),V.updateField(e.value.alias,e.value,l),U.applyConditionForField(e.value.alias),V.getPageBreakEnabled&&V.getActivePage.action==="not_skip"&&H.checkPageFieldsConditions())},ee=t=>{var o,i;const a=t.target;(i=(o=a.value)==null?void 0:o.toString())!=null&&i.includes(",")&&(a.value=a.value.replace(",","."));let n=e.value.round?Math.round(parseFloat(a.value)):parseFloat(a.value);if(isNaN(n))return;let l=D.parseCurrency(n.toString(),D.getCurrencyOptions(e.value));B(!0,l)},te=t=>{const a=t.target;I.value=!0,s.value=a.value},ae=()=>{I.value=!1},re=()=>{s.value=w(s.value)},ne=()=>{const t=Number(s.value)<+e.value.min,a=Number(s.value)>+e.value.max;t||a?A.value="value_range":A.value="required"},ie=_(()=>{let t=0;if(L(e.value.defaultValue.toString())||L(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,n=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,n)}return t}),R=(t,a)=>{const n=Math.pow(10,a);return Math.floor(t*n)/n},w=t=>{var m,d,y,h,C,b,x,k,F;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings){const f=parseFloat(t);return R(f,ie.value).toString()}(isNaN(Number(t))||t.length===0)&&(t="0");let a=parseFloat(t);const n=T();let l=((m=n.getCurrencySettings)==null?void 0:m.numAfterInteger)||0,o=((d=n.getCurrencySettings)==null?void 0:d.decimalSeparator)||".",i=((y=n.getCurrencySettings)==null?void 0:y.thousandsSeparator)||",";if(e.value.fieldCurrency&&(l=((C=(h=e.value)==null?void 0:h.fieldCurrencySettings)==null?void 0:C.numAfterInteger)||0,o=((x=(b=e.value)==null?void 0:b.fieldCurrencySettings)==null?void 0:x.decimalSeparator)||".",i=((F=(k=e.value)==null?void 0:k.fieldCurrencySettings)==null?void 0:F.thousandsSeparator)||","),l>0){a=R(a,parseInt(l.toString())),t=a.toFixed(l),t=t.toString().replace(".",o);const f=t.split(o);f[0]=f[0].replace(/\B(?=(\d{3})+(?!\d))/g,i),t=f.join(o)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i);return t},se=t=>{var y,h,C,b,x,k,F,f,j;const a=T();let n=((y=a.getCurrencySettings)==null?void 0:y.numAfterInteger)||0,l=((h=a.getCurrencySettings)==null?void 0:h.decimalSeparator)||".",o=((C=a.getCurrencySettings)==null?void 0:C.thousandsSeparator)||",";e.value.fieldCurrency&&(n=((x=(b=e.value)==null?void 0:b.fieldCurrencySettings)==null?void 0:x.numAfterInteger)||0,l=((F=(k=e.value)==null?void 0:k.fieldCurrencySettings)==null?void 0:F.decimalSeparator)||".",o=((j=(f=e.value)==null?void 0:f.fieldCurrencySettings)==null?void 0:j.thousandsSeparator)||",");let i;t.includes(".")&&t.includes(",")?i=t.split(l):t.includes(",")?i=t.split(","):t.includes(".")?i=t.split("."):i=[t],i[0]=i[0].split(o).join("");let m=i.join("."),d=parseFloat(m)||0;if(n!==void 0){let Q=Math.pow(10,n);d=Math.round(d*Q)/Q}return d},le=t=>{var i,m,d;let n=((i=T().getCurrencySettings)==null?void 0:i.decimalSeparator)||".";e.value.fieldCurrency&&(n=((d=(m=e.value)==null?void 0:m.fieldCurrencySettings)==null?void 0:d.decimalSeparator)||".");let l=t.keyCode?t.keyCode:t.which,o=46;n===","&&(o=44),(l<48||l>57)&&l!==o&&t.preventDefault()},$=_(()=>{const t=Number(s.value)<e.value.min,a=Number(s.value)>e.value.max;return t||a?!0:V.checkFieldRequired(e.value)}),oe=_(()=>`
    ${S.getTranslations.valueMustBeBetween} ${e.value.min} ${S.getTranslations.and} ${e.value.max}
  `);return W.add("updateQuantity",B),de(()=>{s.value=e.value.originalValue.toString(),B(!1,e.value.originalValue,void 0,!0)}),(t,a)=>(u(),p("div",{class:fe(["ccb-field ccb-field-quantity",{required:$.value,"ccb-field-disabled":r(e).disabled,[r(e).additionalStyles||""]:!!r(e).additionalStyles}])},[E("div",xe,[$.value?(u(),p("div",ke,[A.value==="value_range"?(u(),N(K,{key:0,field:r(e),text:oe.value},null,8,["field","text"])):(u(),N(K,{key:1,field:r(e),text:X.value},null,8,["field","text"]))])):g("",!0),E("div",Fe,[E("span",null,c(r(e).label),1),r(e).required?(u(),p("span",Ve,"*")):g("",!0)])]),r(P).getAppearanceDescriptionPosition==="before"?(u(),p("div",Me,[r(e).hideMinMax?g("",!0):(u(),p("div",Te,c(r(S).getTranslations.min)+": "+c(r(e).min)+" - "+c(r(S).getTranslations.max)+": "+c(r(e).max),1)),r(e).description?(u(),p("div",qe,c(r(e).description),1)):g("",!0)])):g("",!0),(u(),N(pe(Z.value),{field:r(e),value:Y.value,onInput:ee,onFocus:te,onFocusout:re,onBlur:ae,onKeypress:le,key:J.value},null,40,["field","value"])),r(P).getAppearanceDescriptionPosition==="after"?(u(),p("div",Ae,[r(e).hideMinMax?g("",!0):(u(),p("div",Ie,c(r(S).getTranslations.min)+": "+c(r(e).min)+" - "+c(r(S).getTranslations.max)+": "+c(r(e).max),1)),r(e).description?(u(),p("div",Be,c(r(e).description),1)):g("",!0)])):g("",!0)],2))}}),je=be(Ee,[["__scopeId","data-v-b73a9319"]]);export{je as default};
//# sourceMappingURL=index-0XFCTjPP.js.map
